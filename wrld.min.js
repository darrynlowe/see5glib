var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(G){var r=0;return function(){return r<G.length?{done:!1,value:G[r++]}:{done:!0}}};$jscomp.arrayIterator=function(G){return{next:$jscomp.arrayIteratorImpl(G)}};$jscomp.makeIterator=function(G){var r="undefined"!=typeof Symbol&&Symbol.iterator&&G[Symbol.iterator];return r?r.call(G):$jscomp.arrayIterator(G)};$jscomp.owns=function(G,r){return Object.prototype.hasOwnProperty.call(G,r)};$jscomp.ASSUME_ES5=!1;
$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(G,r,u){if(G==Array.prototype||G==Object.prototype)return G;G[r]=u.value;return G};
$jscomp.getGlobal=function(G){G=["object"==typeof globalThis&&globalThis,G,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var r=0;r<G.length;++r){var u=G[r];if(u&&u.Math==Math)return u}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(G,r){var u=$jscomp.propertyToPolyfillSymbol[r];if(null==u)return G[r];u=G[u];return void 0!==u?u:G[r]};$jscomp.polyfill=function(G,r,u,v){r&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(G,r,u,v):$jscomp.polyfillUnisolated(G,r,u,v))};
$jscomp.polyfillUnisolated=function(G,r,u,v){u=$jscomp.global;G=G.split(".");for(v=0;v<G.length-1;v++){var p=G[v];if(!(p in u))return;u=u[p]}G=G[G.length-1];v=u[G];r=r(v);r!=v&&null!=r&&$jscomp.defineProperty(u,G,{configurable:!0,writable:!0,value:r})};
$jscomp.polyfillIsolated=function(G,r,u,v){var p=G.split(".");G=1===p.length;v=p[0];v=!G&&v in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var k=0;k<p.length-1;k++){var f=p[k];if(!(f in v))return;v=v[f]}p=p[p.length-1];u=$jscomp.IS_SYMBOL_NATIVE&&"es6"===u?v[p]:null;r=r(u);null!=r&&(G?$jscomp.defineProperty($jscomp.polyfills,p,{configurable:!0,writable:!0,value:r}):r!==u&&($jscomp.propertyToPolyfillSymbol[p]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(p):$jscomp.POLYFILL_PREFIX+p,p=
$jscomp.propertyToPolyfillSymbol[p],$jscomp.defineProperty(v,p,{configurable:!0,writable:!0,value:r})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(G,r){for(var u=1;u<arguments.length;u++){var v=arguments[u];if(v)for(var p in v)$jscomp.owns(v,p)&&(G[p]=v[p])}return G};$jscomp.polyfill("Object.assign",function(G){return G||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Object.entries",function(G){return G?G:function(r){var u=[],v;for(v in r)$jscomp.owns(r,v)&&u.push([v,r[v]]);return u}},"es8","es3");$jscomp.checkStringArgs=function(G,r,u){if(null==G)throw new TypeError("The 'this' value for String.prototype."+u+" must not be null or undefined");if(r instanceof RegExp)throw new TypeError("First argument to String.prototype."+u+" must not be a regular expression");return G+""};
$jscomp.polyfill("String.prototype.repeat",function(G){return G?G:function(r){var u=$jscomp.checkStringArgs(this,null,"repeat");if(0>r||1342177279<r)throw new RangeError("Invalid count value");r|=0;for(var v="";r;)if(r&1&&(v+=u),r>>>=1)u+=u;return v}},"es6","es3");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(G){if(G)return G;var r=function(p,k){this.$jscomp$symbol$id_=p;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:k})};r.prototype.toString=function(){return this.$jscomp$symbol$id_};var u=0,v=function(p){if(this instanceof v)throw new TypeError("Symbol is not a constructor");return new r("jscomp_symbol_"+(p||"")+"_"+u++,p)};return v},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(G){if(G)return G;G=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<r.length;u++){var v=$jscomp.global[r[u]];"function"===typeof v&&"function"!=typeof v.prototype[G]&&$jscomp.defineProperty(v.prototype,G,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return G},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(G){G={next:G};G[Symbol.iterator]=function(){return this};return G};$jscomp.iteratorFromArray=function(G,r){G instanceof String&&(G+="");var u=0,v=!1,p={next:function(){if(!v&&u<G.length){var k=u++;return{value:r(k,G[k]),done:!1}}v=!0;return{done:!0,value:void 0}}};p[Symbol.iterator]=function(){return p};return p};
$jscomp.polyfill("Array.prototype.keys",function(G){return G?G:function(){return $jscomp.iteratorFromArray(this,function(r){return r})}},"es6","es3");$jscomp.findInternal=function(G,r,u){G instanceof String&&(G=String(G));for(var v=G.length,p=0;p<v;p++){var k=G[p];if(r.call(u,k,p,G))return{i:p,v:k}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(G){return G?G:function(r,u){return $jscomp.findInternal(this,r,u).v}},"es6","es3");
$jscomp.polyfill("Object.values",function(G){return G?G:function(r){var u=[],v;for(v in r)$jscomp.owns(r,v)&&u.push(r[v]);return u}},"es8","es3");$jscomp.polyfill("Array.prototype.findIndex",function(G){return G?G:function(r,u){return $jscomp.findInternal(this,r,u).i}},"es6","es3");
(function(G){"object"===typeof exports&&"undefined"!==typeof module?module.exports=G():"function"===typeof define&&define.amd?define([],G):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).WRLD=G()})(function(){return function p(r,u,v){function k(c,h){if(!u[c]){if(!r[c]){var a="function"==typeof require&&require;if(!h&&a)return a(c,!0);if(f)return f(c,!0);h=Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h;}h=u[c]={exports:{}};
r[c][0].call(h.exports,function(b){var d=r[c][1][b];return k(d?d:b)},h,h.exports,p,r,u,v)}return u[c].exports}for(var f="function"==typeof require&&require,l=0;l<v.length;l++)k(v[l]);return k}({1:[function(r,u,v){(function(p,k,f){function l(){var a=p.L;c.noConflict=function(){p.L=a;return this};p.L=c}var c={version:"1.0.1"};"object"===typeof u&&"object"===typeof u.exports&&(u.exports=c);"undefined"!==typeof p&&l();c.Util={extend:function(a){var b,d;var e=1;for(d=arguments.length;e<d;e++){var g=arguments[e];
for(b in g)a[b]=g[b]}return a},create:Object.create||function(){function a(){}return function(b){a.prototype=b;return new a}}(),bind:function(a,b){var d=Array.prototype.slice;if(a.bind)return a.bind.apply(a,d.call(arguments,1));var e=d.call(arguments,2);return function(){return a.apply(b,e.length?e.concat(d.call(arguments)):arguments)}},stamp:function(a){a._leaflet_id=a._leaflet_id||++c.Util.lastId;return a._leaflet_id},lastId:0,throttle:function(a,b,d){var e,g,n;var m=function(){e=!1;g&&(n.apply(d,
g),g=!1)};return n=function(){e?g=arguments:(a.apply(d,arguments),setTimeout(m,b),e=!0)}},wrapNum:function(a,b,d){var e=b[1];b=b[0];var g=e-b;return a===e&&d?a:((a-b)%g+g)%g+b},falseFn:function(){return!1},formatNum:function(a,b){b=Math.pow(10,b||5);return Math.round(a*b)/b},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return c.Util.trim(a).split(/\s+/)},setOptions:function(a,b){a.hasOwnProperty("options")||(a.options=a.options?c.Util.create(a.options):
{});for(var d in b)a.options[d]=b[d];return a.options},getParamString:function(a,b,d){var e=[],g;for(g in a)e.push(encodeURIComponent(d?g.toUpperCase():g)+"="+encodeURIComponent(a[g]));return(b&&-1!==b.indexOf("?")?"&":"?")+e.join("&")},template:function(a,b){return a.replace(c.Util.templateRe,function(d,e){e=b[e];if(e===f)throw Error("No value provided for variable "+d);"function"===typeof e&&(e=e(b));return e})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===
Object.prototype.toString.call(a)},indexOf:function(a,b){for(var d=0;d<a.length;d++)if(a[d]===b)return d;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function a(n){return p["webkit"+n]||p["moz"+n]||p["ms"+n]}function b(n){var m=+new Date,q=Math.max(0,16-(m-d));d=m+q;return p.setTimeout(n,q)}var d=0,e=p.requestAnimationFrame||a("RequestAnimationFrame")||b,g=p.cancelAnimationFrame||a("CancelAnimationFrame")||a("CancelRequestAnimationFrame")||function(n){p.clearTimeout(n)};
c.Util.requestAnimFrame=function(n,m,q){if(q&&e===b)n.call(m);else return e.call(p,c.bind(n,m))};c.Util.cancelAnimFrame=function(n){n&&g.call(p,n)}})();c.extend=c.Util.extend;c.bind=c.Util.bind;c.stamp=c.Util.stamp;c.setOptions=c.Util.setOptions;c.Class=function(){};c.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments);this.callInitHooks()},d=b.__super__=this.prototype,e=c.Util.create(d);e.constructor=b;b.prototype=e;for(var g in this)this.hasOwnProperty(g)&&
"prototype"!==g&&(b[g]=this[g]);a.statics&&(c.extend(b,a.statics),delete a.statics);a.includes&&(c.Util.extend.apply(null,[e].concat(a.includes)),delete a.includes);e.options&&(a.options=c.Util.extend(c.Util.create(e.options),a.options));c.extend(e,a);e._initHooks=[];e.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this);this._initHooksCalled=!0;for(var n=0,m=e._initHooks.length;n<m;n++)e._initHooks[n].call(this)}};return b};c.Class.include=function(a){c.extend(this.prototype,
a);return this};c.Class.mergeOptions=function(a){c.extend(this.prototype.options,a);return this};c.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1);this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push("function"===typeof a?a:function(){this[a].apply(this,b)});return this};c.Evented=c.Class.extend({on:function(a,b,d){if("object"===typeof a)for(var e in a)this._on(e,a[e],b);else{a=c.Util.splitWords(a);e=0;for(var g=a.length;e<g;e++)this._on(a[e],
b,d)}return this},off:function(a,b,d){if(a)if("object"===typeof a)for(var e in a)this._off(e,a[e],b);else{a=c.Util.splitWords(a);e=0;for(var g=a.length;e<g;e++)this._off(a[e],b,d)}else delete this._events;return this},_on:function(a,b,d){this._events=this._events||{};var e=this._events[a];e||(e=[],this._events[a]=e);d===this&&(d=f);a={fn:b,ctx:d};for(var g=e,n=0,m=g.length;n<m;n++)if(g[n].fn===b&&g[n].ctx===d)return;g.push(a);e.count++},_off:function(a,b,d){var e,g;if(this._events&&(e=this._events[a]))if(b){if(d===
this&&(d=f),e){var n=0;for(g=e.length;n<g;n++){var m=e[n];if(m.ctx===d&&m.fn===b){m.fn=c.Util.falseFn;this._firingCount&&(this._events[a]=e=e.slice());e.splice(n,1);break}}}}else{n=0;for(g=e.length;n<g;n++)e[n].fn=c.Util.falseFn;delete this._events[a]}},fire:function(a,b,d){if(!this.listens(a,d))return this;b=c.Util.extend({},b,{type:a,target:this});if(this._events&&(a=this._events[a])){this._firingCount=this._firingCount+1||1;for(var e=0,g=a.length;e<g;e++){var n=a[e];n.fn.call(n.ctx||this,b)}this._firingCount--}d&&
this._propagateEvent(b);return this},listens:function(a,b){var d=this._events&&this._events[a];if(d&&d.length)return!0;if(b)for(var e in this._eventParents)if(this._eventParents[e].listens(a,b))return!0;return!1},once:function(a,b,d){if("object"===typeof a){for(var e in a)this.once(e,a[e],b);return this}var g=c.bind(function(){this.off(a,b,d).off(a,g,d)},this);return this.on(a,b,d).on(a,g,d)},addEventParent:function(a){this._eventParents=this._eventParents||{};this._eventParents[c.stamp(a)]=a;return this},
removeEventParent:function(a){this._eventParents&&delete this._eventParents[c.stamp(a)];return this},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,c.extend({layer:a.target},a),!0)}});var h=c.Evented.prototype;h.addEventListener=h.on;h.removeEventListener=h.clearAllEventListeners=h.off;h.addOneTimeEventListener=h.once;h.fireEvent=h.fire;h.hasEventListeners=h.listens;c.Mixin={Events:h};(function(){var a=navigator.userAgent.toLowerCase(),b=k.documentElement,
d="ActiveXObject"in p,e=-1!==a.indexOf("webkit"),g=-1!==a.indexOf("phantom"),n=-1!==a.search("android [23]"),m=-1!==a.indexOf("chrome"),q=-1!==a.indexOf("gecko")&&!e&&!p.opera&&!d,t=0===navigator.platform.indexOf("Win"),w="undefined"!==typeof orientation||-1!==a.indexOf("mobile"),y=!p.PointerEvent&&p.MSPointerEvent,H=p.PointerEvent||y,F=d&&"transition"in b.style,C="WebKitCSSMatrix"in p&&"m11"in new p.WebKitCSSMatrix&&!n,I="MozPerspective"in b.style;b="OTransition"in b.style;var x=!p.L_NO_TOUCH&&(H||
"ontouchstart"in p||p.DocumentTouch&&k instanceof p.DocumentTouch);c.Browser={ie:d,ielt9:d&&!k.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in k),webkit:e,gecko:q,android:-1!==a.indexOf("android"),android23:n,chrome:m,safari:!m&&-1!==a.indexOf("safari"),win:t,ie3d:F,webkit3d:C,gecko3d:I,opera12:b,any3d:!p.L_DISABLE_3D&&(F||C||I)&&!b&&!g,mobile:w,mobileWebkit:w&&e,mobileWebkit3d:w&&C,mobileOpera:w&&p.opera,mobileGecko:w&&q,touch:!!x,msPointer:!!y,pointer:!!H,retina:1<(p.devicePixelRatio||
p.screen.deviceXDPI/p.screen.logicalXDPI)}})();c.Point=function(a,b,d){this.x=d?Math.round(a):a;this.y=d?Math.round(b):b};c.Point.prototype={clone:function(){return new c.Point(this.x,this.y)},add:function(a){return this.clone()._add(c.point(a))},_add:function(a){this.x+=a.x;this.y+=a.y;return this},subtract:function(a){return this.clone()._subtract(c.point(a))},_subtract:function(a){this.x-=a.x;this.y-=a.y;return this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){this.x/=
a;this.y/=a;return this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){this.x*=a;this.y*=a;return this},scaleBy:function(a){return new c.Point(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new c.Point(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);
return this},ceil:function(){return this.clone()._ceil()},_ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},distanceTo:function(a){a=c.point(a);var b=a.x-this.x;a=a.y-this.y;return Math.sqrt(b*b+a*a)},equals:function(a){a=c.point(a);return a.x===this.x&&a.y===this.y},contains:function(a){a=c.point(a);return Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+c.Util.formatNum(this.x)+", "+c.Util.formatNum(this.y)+")"}};
c.point=function(a,b,d){return a instanceof c.Point?a:c.Util.isArray(a)?new c.Point(a[0],a[1]):a===f||null===a?a:"object"===typeof a&&"x"in a&&"y"in a?new c.Point(a.x,a.y):new c.Point(a,b,d)};c.Bounds=function(a,b){if(a){a=b?[a,b]:a;b=0;for(var d=a.length;b<d;b++)this.extend(a[b])}};c.Bounds.prototype={extend:function(a){a=c.point(a);this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):
(this.min=a.clone(),this.max=a.clone());return this},getCenter:function(a){return new c.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new c.Point(this.min.x,this.max.y)},getTopRight:function(){return new c.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){a="number"===typeof a[0]||a instanceof c.Point?c.point(a):c.bounds(a);if(a instanceof c.Bounds){var b=a.min;a=a.max}else b=a;return b.x>=this.min.x&&
a.x<=this.max.x&&b.y>=this.min.y&&a.y<=this.max.y},intersects:function(a){a=c.bounds(a);var b=this.min,d=this.max,e=a.min;a=a.max;var g=a.y>=b.y&&e.y<=d.y;return a.x>=b.x&&e.x<=d.x&&g},overlaps:function(a){a=c.bounds(a);var b=this.min,d=this.max,e=a.min;a=a.max;var g=a.y>b.y&&e.y<d.y;return a.x>b.x&&e.x<d.x&&g},isValid:function(){return!(!this.min||!this.max)}};c.bounds=function(a,b){return!a||a instanceof c.Bounds?a:new c.Bounds(a,b)};c.Transformation=function(a,b,d,e){this._a=a;this._b=b;this._c=
d;this._d=e};c.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){b=b||1;a.x=b*(this._a*a.x+this._b);a.y=b*(this._c*a.y+this._d);return a},untransform:function(a,b){b=b||1;return new c.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}};c.DomUtil={get:function(a){return"string"===typeof a?k.getElementById(a):a},getStyle:function(a,b){var d=a.style[b]||a.currentStyle&&a.currentStyle[b];d&&"auto"!==d||!k.defaultView||(d=(a=k.defaultView.getComputedStyle(a,
null))?a[b]:null);return"auto"===d?null:d},create:function(a,b,d){a=k.createElement(a);a.className=b||"";d&&d.appendChild(a);return a},remove:function(a){var b=a.parentNode;b&&b.removeChild(a)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var b=a.parentNode;b.insertBefore(a,b.firstChild)},hasClass:function(a,b){if(a.classList!==f)return a.classList.contains(b);a=c.DomUtil.getClass(a);return 0<a.length&&(new RegExp("(^|\\s)"+
b+"(\\s|$)")).test(a)},addClass:function(a,b){if(a.classList!==f){b=c.Util.splitWords(b);for(var d=0,e=b.length;d<e;d++)a.classList.add(b[d])}else c.DomUtil.hasClass(a,b)||(d=c.DomUtil.getClass(a),c.DomUtil.setClass(a,(d?d+" ":"")+b))},removeClass:function(a,b){a.classList!==f?a.classList.remove(b):c.DomUtil.setClass(a,c.Util.trim((" "+c.DomUtil.getClass(a)+" ").replace(" "+b+" "," ")))},setClass:function(a,b){a.className.baseVal===f?a.className=b:a.className.baseVal=b},getClass:function(a){return a.className.baseVal===
f?a.className:a.className.baseVal},setOpacity:function(a,b){"opacity"in a.style?a.style.opacity=b:"filter"in a.style&&c.DomUtil._setOpacityIE(a,b)},_setOpacityIE:function(a,b){var d=!1;try{d=a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){if(1===b)return}b=Math.round(100*b);d?(d.Enabled=100!==b,d.Opacity=b):a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"},testProp:function(a){for(var b=k.documentElement.style,d=0;d<a.length;d++)if(a[d]in b)return a[d];return!1},
setTransform:function(a,b,d){b=b||new c.Point(0,0);a.style[c.DomUtil.TRANSFORM]=(c.Browser.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(d?" scale("+d+")":"")},setPosition:function(a,b){a._leaflet_pos=b;c.Browser.any3d?c.DomUtil.setTransform(a,b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos||new c.Point(0,0)}};(function(){c.DomUtil.TRANSFORM=c.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);
var a=c.DomUtil.TRANSITION=c.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);c.DomUtil.TRANSITION_END="webkitTransition"===a||"OTransition"===a?a+"End":"transitionend";if("onselectstart"in k)c.DomUtil.disableTextSelection=function(){c.DomEvent.on(p,"selectstart",c.DomEvent.preventDefault)},c.DomUtil.enableTextSelection=function(){c.DomEvent.off(p,"selectstart",c.DomEvent.preventDefault)};else{var b=c.DomUtil.testProp(["userSelect","WebkitUserSelect",
"OUserSelect","MozUserSelect","msUserSelect"]);c.DomUtil.disableTextSelection=function(){if(b){var d=k.documentElement.style;this._userSelect=d[b];d[b]="none"}};c.DomUtil.enableTextSelection=function(){b&&(k.documentElement.style[b]=this._userSelect,delete this._userSelect)}}c.DomUtil.disableImageDrag=function(){c.DomEvent.on(p,"dragstart",c.DomEvent.preventDefault)};c.DomUtil.enableImageDrag=function(){c.DomEvent.off(p,"dragstart",c.DomEvent.preventDefault)};c.DomUtil.preventOutline=function(d){for(;-1===
d.tabIndex;)d=d.parentNode;d&&d.style&&(c.DomUtil.restoreOutline(),this._outlineElement=d,this._outlineStyle=d.style.outline,d.style.outline="none",c.DomEvent.on(p,"keydown",c.DomUtil.restoreOutline,this))};c.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,c.DomEvent.off(p,"keydown",c.DomUtil.restoreOutline,this))}})();c.LatLng=function(a,b,d){if(isNaN(a)||isNaN(b))throw Error("Invalid LatLng object: ("+
a+", "+b+")");this.lat=+a;this.lng=+b;d!==f&&(this.alt=+d)};c.LatLng.prototype={equals:function(a,b){if(!a)return!1;a=c.latLng(a);return Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=(b===f?1E-9:b)},toString:function(a){return"LatLng("+c.Util.formatNum(this.lat,a)+", "+c.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return c.CRS.Earth.distance(this,c.latLng(a))},wrap:function(){return c.CRS.Earth.wrapLatLng(this)},toBounds:function(a){a=180*a/40075017;var b=a/Math.cos(Math.PI/
180*this.lat);return c.latLngBounds([this.lat-a,this.lng-b],[this.lat+a,this.lng+b])},clone:function(){return new c.LatLng(this.lat,this.lng,this.alt)}};c.latLng=function(a,b,d){return a instanceof c.LatLng?a:c.Util.isArray(a)&&"object"!==typeof a[0]?3===a.length?new c.LatLng(a[0],a[1],a[2]):2===a.length?new c.LatLng(a[0],a[1]):null:a===f||null===a?a:"object"===typeof a&&"lat"in a?new c.LatLng(a.lat,"lng"in a?a.lng:a.lon,a.alt):b===f?null:new c.LatLng(a,b,d)};c.LatLngBounds=function(a,b){if(a){a=
b?[a,b]:a;b=0;for(var d=a.length;b<d;b++)this.extend(a[b])}};c.LatLngBounds.prototype={extend:function(a){var b=this._southWest,d=this._northEast;if(a instanceof c.LatLng)var e=a;else if(a instanceof c.LatLngBounds){if(e=a._southWest,a=a._northEast,!e||!a)return this}else return a?this.extend(c.latLng(a)||c.latLngBounds(a)):this;b||d?(b.lat=Math.min(e.lat,b.lat),b.lng=Math.min(e.lng,b.lng),d.lat=Math.max(a.lat,d.lat),d.lng=Math.max(a.lng,d.lng)):(this._southWest=new c.LatLng(e.lat,e.lng),this._northEast=
new c.LatLng(a.lat,a.lng));return this},pad:function(a){var b=this._southWest,d=this._northEast,e=Math.abs(b.lat-d.lat)*a;a*=Math.abs(b.lng-d.lng);return new c.LatLngBounds(new c.LatLng(b.lat-e,b.lng-a),new c.LatLng(d.lat+e,d.lng+a))},getCenter:function(){return new c.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new c.LatLng(this.getNorth(),
this.getWest())},getSouthEast:function(){return new c.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"===typeof a[0]||a instanceof c.LatLng?c.latLng(a):c.latLngBounds(a);var b=this._southWest,d=this._northEast;if(a instanceof c.LatLngBounds){var e=a.getSouthWest();a=a.getNorthEast()}else e=
a;return e.lat>=b.lat&&a.lat<=d.lat&&e.lng>=b.lng&&a.lng<=d.lng},intersects:function(a){a=c.latLngBounds(a);var b=this._southWest,d=this._northEast,e=a.getSouthWest();a=a.getNorthEast();var g=a.lng>=b.lng&&e.lng<=d.lng;return a.lat>=b.lat&&e.lat<=d.lat&&g},overlaps:function(a){a=c.latLngBounds(a);var b=this._southWest,d=this._northEast,e=a.getSouthWest();a=a.getNorthEast();var g=a.lng>b.lng&&e.lng<d.lng;return a.lat>b.lat&&e.lat<d.lat&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),
this.getEast(),this.getNorth()].join()},equals:function(a){if(!a)return!1;a=c.latLngBounds(a);return this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())},isValid:function(){return!(!this._southWest||!this._northEast)}};c.latLngBounds=function(a,b){return a instanceof c.LatLngBounds?a:new c.LatLngBounds(a,b)};c.Projection={};c.Projection.LonLat={project:function(a){return new c.Point(a.lng,a.lat)},unproject:function(a){return new c.LatLng(a.y,a.x)},bounds:c.bounds([-180,
-90],[180,90])};c.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var b=Math.PI/180,d=this.MAX_LATITUDE;d=Math.sin(Math.max(Math.min(d,a.lat),-d)*b);return new c.Point(this.R*a.lng*b,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(a){var b=180/Math.PI;return new c.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*b,a.x*b/this.R)},bounds:function(){var a=6378137*Math.PI;return c.bounds([-a,-a],[a,a])}()};c.CRS={latLngToPoint:function(a,b){a=this.projection.project(a);
b=this.scale(b);return this.transformation._transform(a,b)},pointToLatLng:function(a,b){b=this.scale(b);a=this.transformation.untransform(a,b);return this.projection.unproject(a)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var b=this.projection.bounds,d=this.scale(a);a=this.transformation.transform(b.min,
d);b=this.transformation.transform(b.max,d);return c.bounds(a,b)},infinite:!1,wrapLatLng:function(a){var b=this.wrapLng?c.Util.wrapNum(a.lng,this.wrapLng,!0):a.lng,d=this.wrapLat?c.Util.wrapNum(a.lat,this.wrapLat,!0):a.lat;return c.latLng(d,b,a.alt)}};c.CRS.Simple=c.extend({},c.CRS,{projection:c.Projection.LonLat,transformation:new c.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,b){var d=b.lng-a.lng;a=b.lat-a.lat;
return Math.sqrt(d*d+a*a)},infinite:!0});c.CRS.Earth=c.extend({},c.CRS,{wrapLng:[-180,180],R:6371E3,distance:function(a,b){var d=Math.PI/180,e=a.lat*d,g=b.lat*d;return this.R*Math.acos(Math.min(Math.sin(e)*Math.sin(g)+Math.cos(e)*Math.cos(g)*Math.cos((b.lng-a.lng)*d),1))}});c.CRS.EPSG3857=c.extend({},c.CRS.Earth,{code:"EPSG:3857",projection:c.Projection.SphericalMercator,transformation:function(){var a=.5/(Math.PI*c.Projection.SphericalMercator.R);return new c.Transformation(a,.5,-a,.5)}()});c.CRS.EPSG900913=
c.extend({},c.CRS.EPSG3857,{code:"EPSG:900913"});c.CRS.EPSG4326=c.extend({},c.CRS.Earth,{code:"EPSG:4326",projection:c.Projection.LonLat,transformation:new c.Transformation(1/180,1,-1/180,.5)});c.Map=c.Evented.extend({options:{crs:c.CRS.EPSG3857,center:f,zoom:f,minZoom:f,maxZoom:f,layers:[],maxBounds:f,renderer:f,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,b){b=c.setOptions(this,b);this._initContainer(a);this._initLayout();
this._onResize=c.bind(this._onResize,this);this._initEvents();b.maxBounds&&this.setMaxBounds(b.maxBounds);b.zoom!==f&&(this._zoom=this._limitZoom(b.zoom));b.center&&b.zoom!==f&&this.setView(c.latLng(b.center),b.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=!0;this.callInitHooks();this._addLayers(this.options.layers)},setView:function(a,b){b=b===f?this.getZoom():b;this._resetView(c.latLng(a),b);return this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),
a,{zoom:b}):(this._zoom=a,this)},zoomIn:function(a,b){a=a||(c.Browser.any3d?this.options.zoomDelta:1);return this.setZoom(this._zoom+a,b)},zoomOut:function(a,b){a=a||(c.Browser.any3d?this.options.zoomDelta:1);return this.setZoom(this._zoom-a,b)},setZoomAround:function(a,b,d){var e=this.getZoomScale(b),g=this.getSize().divideBy(2);a=(a instanceof c.Point?a:this.latLngToContainerPoint(a)).subtract(g).multiplyBy(1-1/e);g=this.containerPointToLatLng(g.add(a));return this.setView(g,b,{zoom:d})},_getBoundsCenterZoom:function(a,
b){b=b||{};a=a.getBounds?a.getBounds():c.latLngBounds(a);var d=c.point(b.paddingTopLeft||b.padding||[0,0]),e=c.point(b.paddingBottomRight||b.padding||[0,0]),g=this.getBoundsZoom(a,!1,d.add(e));g="number"===typeof b.maxZoom?Math.min(b.maxZoom,g):g;b=e.subtract(d).divideBy(2);d=this.project(a.getSouthWest(),g);a=this.project(a.getNorthEast(),g);return{center:this.unproject(d.add(a).divideBy(2).add(b),g),zoom:g}},fitBounds:function(a,b){a=c.latLngBounds(a);if(!a.isValid())throw Error("Bounds are not valid.");
a=this._getBoundsCenterZoom(a,b);return this.setView(a.center,a.zoom,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){this.fire("movestart");this._rawPanBy(c.point(a));this.fire("move");return this.fire("moveend")},setMaxBounds:function(a){a=c.latLngBounds(a);if(a.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",
this._panInsideMaxBounds);this.options.maxBounds=a;this._loaded&&this._panInsideMaxBounds();return this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(a){this.options.minZoom=a;return this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){this.options.maxZoom=a;return this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(a,b){this._enforcingBounds=!0;var d=this.getCenter();a=this._limitCenter(d,this._zoom,
c.latLngBounds(a));d.equals(a)||this.panTo(a,b);this._enforcingBounds=!1;return this},invalidateSize:function(a){if(!this._loaded)return this;a=c.extend({animate:!1,pan:!0},!0===a?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0;this._lastCenter=null;var d=this.getSize(),e=b.divideBy(2).round(),g=d.divideBy(2).round();e=e.subtract(g);if(!e.x&&!e.y)return this;a.animate&&a.pan?this.panBy(e):(a.pan&&this._rawPanBy(e),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=
setTimeout(c.bind(this.fire,this,"moveend"),200)):this.fire("moveend"));return this.fire("resize",{oldSize:b,newSize:d})},stop:function(){this.setZoom(this._limitZoom(this._zoom));this.options.zoomSnap||this.fire("viewreset");return this._stop()},addHandler:function(a,b){if(!b)return this;b=this[a]=new b(this);this._handlers.push(b);this.options[a]&&b.enable();return this},remove:function(){this._initEvents(!0);if(this._containerId!==this._container._leaflet_id)throw Error("Map container is being reused by another instance");
try{delete this._container._leaflet_id,delete this._containerId}catch(b){this._containerId=this._container._leaflet_id=f}c.DomUtil.remove(this._mapPane);this._clearControlPos&&this._clearControlPos();this._clearHandlers();this._loaded&&this.fire("unload");for(var a in this._layers)this._layers[a].remove();return this},createPane:function(a,b){var d="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":"");b=c.DomUtil.create("div",d,b||this._mapPane);a&&(this._panes[a]=b);return b},getCenter:function(){this._checkIfLoaded();
return this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft());a=this.unproject(a.getTopRight());return new c.LatLngBounds(b,a)},getMinZoom:function(){return this.options.minZoom===f?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===f?this._layersMaxZoom===f?Infinity:this._layersMaxZoom:
this.options.maxZoom},getBoundsZoom:function(a,b,d){a=c.latLngBounds(a);d=c.point(d||[0,0]);var e=this.getZoom()||0,g=this.getMinZoom(),n=this.getMaxZoom(),m=a.getNorthWest();a=a.getSouthEast();d=this.getSize().subtract(d);m=this.project(a,e).subtract(this.project(m,e));a=c.Browser.any3d?this.options.zoomSnap:1;e=this.getScaleZoom(Math.min(d.x/m.x,d.y/m.y),e);a&&(e=a/100*Math.round(e/(a/100)),e=b?Math.ceil(e/a)*a:Math.floor(e/a)*a);return Math.max(g,Math.min(n,e))},getSize:function(){if(!this._size||
this._sizeChanged)this._size=new c.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1;return this._size.clone()},getPixelBounds:function(a,b){a=this._getTopLeftPoint(a,b);return new c.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===f?this.getZoom():a)},getPane:function(a){return"string"===typeof a?this._panes[a]:a},getPanes:function(){return this._panes},
getContainer:function(){return this._container},getZoomScale:function(a,b){var d=this.options.crs;b=b===f?this._zoom:b;return d.scale(a)/d.scale(b)},getScaleZoom:function(a,b){var d=this.options.crs;b=b===f?this._zoom:b;a=d.zoom(a*d.scale(b));return isNaN(a)?Infinity:a},project:function(a,b){b=b===f?this._zoom:b;return this.options.crs.latLngToPoint(c.latLng(a),b)},unproject:function(a,b){b=b===f?this._zoom:b;return this.options.crs.pointToLatLng(c.point(a),b)},layerPointToLatLng:function(a){a=c.point(a).add(this.getPixelOrigin());
return this.unproject(a)},latLngToLayerPoint:function(a){return this.project(c.latLng(a))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(c.latLng(a))},distance:function(a,b){return this.options.crs.distance(c.latLng(a),c.latLng(b))},containerPointToLayerPoint:function(a){return c.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return c.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){a=this.containerPointToLayerPoint(c.point(a));
return this.layerPointToLatLng(a)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(c.latLng(a)))},mouseEventToContainerPoint:function(a){return c.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){a=this._container=c.DomUtil.get(a);
if(!a)throw Error("Map container not found.");if(a._leaflet_id)throw Error("Map container is already initialized.");c.DomEvent.addListener(a,"scroll",this._onScroll,this);this._containerId=c.Util.stamp(a)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&c.Browser.any3d;c.DomUtil.addClass(a,"leaflet-container"+(c.Browser.touch?" leaflet-touch":"")+(c.Browser.retina?" leaflet-retina":"")+(c.Browser.ielt9?" leaflet-oldie":"")+(c.Browser.safari?" leaflet-safari":
"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=c.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative");this._initPanes();this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={};this._mapPane=this.createPane("mapPane",this._container);c.DomUtil.setPosition(this._mapPane,new c.Point(0,0));this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");
this.createPane("tooltipPane");this.createPane("popupPane");this.options.markerZoomAnimation||(c.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),c.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,b){c.DomUtil.setPosition(this._mapPane,new c.Point(0,0));var d=!this._loaded;this._loaded=!0;b=this._limitZoom(b);this.fire("viewprereset");var e=this._zoom!==b;this._moveStart(e)._move(a,b)._moveEnd(e);this.fire("viewreset");d&&this.fire("load")},_moveStart:function(a){a&&this.fire("zoomstart");
return this.fire("movestart")},_move:function(a,b,d){b===f&&(b=this._zoom);var e=this._zoom!==b;this._zoom=b;this._lastCenter=a;this._pixelOrigin=this._getNewPixelOrigin(a);(e||d&&d.pinch)&&this.fire("zoom",d);return this.fire("move",d)},_moveEnd:function(a){a&&this.fire("zoomend");return this.fire("moveend")},_stop:function(){c.Util.cancelAnimFrame(this._flyToFrame);this._panAnim&&this._panAnim.stop();return this},_rawPanBy:function(a){c.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},
_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.");},_initEvents:function(a){if(c.DomEvent){this._targets={};this._targets[c.stamp(this._container)]=this;a=a?"off":"on";c.DomEvent[a](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,
this);if(this.options.trackResize)c.DomEvent[a](p,"resize",this._onResize,this);if(c.Browser.any3d&&this.options.transform3DLimit)this[a]("moveend",this._onMoveEnd)}},_onResize:function(){c.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=c.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=
this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,b){for(var d=[],e,g="mouseout"===b||"mouseover"===b,n=a.target||a.srcElement,m=!1;n;){if((e=this._targets[c.stamp(n)])&&("click"===b||"preclick"===b)&&!a._simulated&&this._draggableMoved(e)){m=!0;break}if(e&&e.listens(b,!0)){if(g&&!c.DomEvent._isExternalTarget(n,a))break;d.push(e);if(g)break}if(n===this._container)break;n=n.parentNode}d.length||m||g||!c.DomEvent._isExternalTarget(n,a)||(d=
[this]);return d},_handleDOMEvent:function(a){if(this._loaded&&!c.DomEvent._skipped(a)){var b="keypress"===a.type&&13===a.keyCode?"click":a.type;"mousedown"===b&&c.DomUtil.preventOutline(a.target||a.srcElement);this._fireDOMEvent(a,b)}},_fireDOMEvent:function(a,b,d){if("click"===a.type){var e=c.Util.extend({},a);e.type="preclick";this._fireDOMEvent(e,e.type,d)}if(!a._stopped&&(d=(d||[]).concat(this._findEventTargets(a,b)),d.length)){var g=d[0];"contextmenu"===b&&g.listens(b,!0)&&c.DomEvent.preventDefault(a);
e={originalEvent:a};if("keypress"!==a.type){var n=g instanceof c.Marker;e.containerPoint=n?this.latLngToContainerPoint(g.getLatLng()):this.mouseEventToContainerPoint(a);e.layerPoint=this.containerPointToLayerPoint(e.containerPoint);e.latlng=n?g.getLatLng():this.layerPointToLatLng(e.layerPoint)}for(a=0;a<d.length&&!(d[a].fire(b,e,!0),e.originalEvent._stopped||d[a].options.nonBubblingEvents&&-1!==c.Util.indexOf(d[a].options.nonBubblingEvents,b));a++);}},_draggableMoved:function(a){a=a.dragging&&a.dragging.enabled()?
a:this;return a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,b=this._handlers.length;a<b;a++)this._handlers[a].disable()},whenReady:function(a,b){if(this._loaded)a.call(b||this,{target:this});else this.on("load",a,b);return this},_getMapPanePos:function(){return c.DomUtil.getPosition(this._mapPane)||new c.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,b){return(a&&b!==f?this._getNewPixelOrigin(a,
b):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,b){var d=this.getSize()._divideBy(2);return this.project(a,b)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,b,d){d=this._getNewPixelOrigin(d,b);return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},
_limitCenter:function(a,b,d){if(!d)return a;var e=this.project(a,b),g=this.getSize().divideBy(2);g=new c.Bounds(e.subtract(g),e.add(g));d=this._getBoundsOffset(g,d,b);return d.round().equals([0,0])?a:this.unproject(e.add(d),b)},_limitOffset:function(a,b){if(!b)return a;var d=this.getPixelBounds();d=new c.Bounds(d.min.add(a),d.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,d){d=c.bounds(this.project(b.getNorthEast(),d),this.project(b.getSouthWest(),d));b=d.min.subtract(a.min);
d=d.max.subtract(a.max);a=this._rebound(b.x,-d.x);b=this._rebound(b.y,-d.y);return new c.Point(a,b)},_rebound:function(a,b){return 0<a+b?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),d=this.getMaxZoom(),e=c.Browser.any3d?this.options.zoomSnap:1;e&&(a=Math.round(a/e)*e);return Math.max(b,Math.min(d,a))}});c.map=function(a,b){return new c.Map(a,b)};c.Layer=c.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(a){a.addLayer(this);
return this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){a&&a.removeLayer(this);return this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){this._map._targets[c.stamp(a)]=this;return this},removeInteractiveTarget:function(a){delete this._map._targets[c.stamp(a)];return this},_layerAdd:function(a){var b=a.target;if(b.hasLayer(this)){this._map=b;this._zoomAnimated=b._zoomAnimated;
if(this.getEvents){var d=this.getEvents();b.on(d,this);this.once("remove",function(){b.off(d,this)},this)}this.onAdd(b);this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution());this.fire("add");b.fire("layeradd",{layer:this})}}});c.Map.include({addLayer:function(a){var b=c.stamp(a);if(this._layers[b])return this;this._layers[b]=a;a._mapToAdd=this;a.beforeAdd&&a.beforeAdd(this);this.whenReady(a._layerAdd,a);return this},removeLayer:function(a){var b=
c.stamp(a);if(!this._layers[b])return this;if(this._loaded)a.onRemove(this);a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution());delete this._layers[b];this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove"));a._map=a._mapToAdd=null;return this},hasLayer:function(a){return!!a&&c.stamp(a)in this._layers},eachLayer:function(a,b){for(var d in this._layers)a.call(b,this._layers[d]);return this},_addLayers:function(a){a=a?c.Util.isArray(a)?
a:[a]:[];for(var b=0,d=a.length;b<d;b++)this.addLayer(a[b])},_addZoomLimit:function(a){if(isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))this._zoomBoundLayers[c.stamp(a)]=a,this._updateZoomLevels()},_removeZoomLimit:function(a){a=c.stamp(a);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var a=Infinity,b=-Infinity,d=this._getZoomSpan(),e;for(e in this._zoomBoundLayers){var g=this._zoomBoundLayers[e].options;a=g.minZoom===f?a:
Math.min(a,g.minZoom);b=g.maxZoom===f?b:Math.max(b,g.maxZoom)}this._layersMaxZoom=-Infinity===b?f:b;this._layersMinZoom=Infinity===a?f:a;d!==this._getZoomSpan()&&this.fire("zoomlevelschange")}});c.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:c.bounds([-2.003750834279E7,-1.549657073972E7],[2.003750834279E7,1.876465623138E7]),project:function(a){var b=Math.PI/180,d=this.R,e=a.lat*b,g=this.R_MINOR/d;g=Math.sqrt(1-g*g);var n=g*Math.sin(e);e=-d*Math.log(Math.max(Math.tan(Math.PI/4-e/
2)/Math.pow((1-n)/(1+n),g/2),1E-10));return new c.Point(a.lng*b*d,e)},unproject:function(a){var b=180/Math.PI,d=this.R,e=this.R_MINOR/d;e=Math.sqrt(1-e*e);for(var g=Math.exp(-a.y/d),n=Math.PI/2-2*Math.atan(g),m=0,q=.1;15>m&&1E-7<Math.abs(q);m++)q=e*Math.sin(n),q=Math.pow((1-q)/(1+q),e/2),q=Math.PI/2-2*Math.atan(g*q)-n,n+=q;return new c.LatLng(n*b,a.x*b/d)}};c.CRS.EPSG3395=c.extend({},c.CRS.Earth,{code:"EPSG:3395",projection:c.Projection.Mercator,transformation:function(){var a=.5/(Math.PI*c.Projection.Mercator.R);
return new c.Transformation(a,.5,-a,.5)}()});c.GridLayer=c.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:c.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:f,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){c.setOptions(this,a)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles();
c.DomUtil.remove(this._container);a._removeZoomLimit(this);this._tileZoom=this._container=null},bringToFront:function(){this._map&&(c.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max));return this},bringToBack:function(){this._map&&(c.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min));return this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){this.options.opacity=a;this._updateOpacity();return this},
setZIndex:function(a){this.options.zIndex=a;this._updateZIndex();return this},isLoading:function(){return this._loading},redraw:function(){this._map&&(this._removeAllTiles(),this._update());return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};this.options.updateWhenIdle||(this._onMove||(this._onMove=c.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove);this._zoomAnimated&&
(a.zoomanim=this._animateZoom);return a},createTile:function(){return k.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof c.Point?a:new c.Point(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==f&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var b=this.getPane().children,d=-a(-Infinity,Infinity),e=0,g=b.length,n;e<g;e++)n=b[e].style.zIndex,b[e]!==this._container&&n&&(d=
a(d,+n));isFinite(d)&&(this.options.zIndex=d+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!c.Browser.ielt9){c.DomUtil.setOpacity(this._container,this.options.opacity);var a=+new Date,b=!1,d=!1,e;for(e in this._tiles){var g=this._tiles[e];if(g.current&&g.loaded){var n=Math.min(1,(a-g.loaded)/200);c.DomUtil.setOpacity(g.el,n);1>n?b=!0:(g.active&&(d=!0),g.active=!0)}}d&&!this._noPrune&&this._pruneTiles();b&&(c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,
this))}},_initContainer:function(){this._container||(this._container=c.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),1>this.options.opacity&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,b=this.options.maxZoom;if(a===f)return f;for(var d in this._levels)this._levels[d].el.children.length||d===a?this._levels[d].el.style.zIndex=b-Math.abs(a-d):(c.DomUtil.remove(this._levels[d].el),this._removeTilesAtZoom(d),
delete this._levels[d]);d=this._levels[a];var e=this._map;d||(d=this._levels[a]={},d.el=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=b,d.origin=e.project(e.unproject(e.getPixelOrigin()),a).round(),d.zoom=a,this._setZoomTransform(d,e.getCenter(),e.getZoom()),c.Util.falseFn(d.el.offsetWidth));return this._level=d},_pruneTiles:function(){if(this._map){var a;var b=this._map.getZoom();if(b>this.options.maxZoom||b<this.options.minZoom)this._removeAllTiles();
else{for(a in this._tiles)b=this._tiles[a],b.retain=b.current;for(a in this._tiles)b=this._tiles[a],b.current&&!b.active&&(b=b.coords,this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2));for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}}},_removeTilesAtZoom:function(a){for(var b in this._tiles)this._tiles[b].coords.z===a&&this._removeTile(b)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)c.DomUtil.remove(this._levels[a].el),
delete this._levels[a];this._removeAllTiles();this._tileZoom=null},_retainParent:function(a,b,d,e){a=Math.floor(a/2);b=Math.floor(b/2);--d;var g=new c.Point(+a,+b);g.z=+d;g=this._tileCoordsToKey(g);if((g=this._tiles[g])&&g.active)return g.retain=!0;g&&g.loaded&&(g.retain=!0);return d>e?this._retainParent(a,b,d,e):!1},_retainChildren:function(a,b,d,e){for(var g=2*a;g<2*a+2;g++)for(var n=2*b;n<2*b+2;n++){var m=new c.Point(g,n);m.z=d+1;m=this._tileCoordsToKey(m);(m=this._tiles[m])&&m.active?m.retain=
!0:(m&&m.loaded&&(m.retain=!0),d+1<e&&this._retainChildren(g,n,d+1,e))}},_resetView:function(a){a=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(a,b,d,e){var g=Math.round(b);if(this.options.maxZoom!==f&&g>this.options.maxZoom||this.options.minZoom!==f&&g<this.options.minZoom)g=f;var n=this.options.updateWhenZooming&&g!==this._tileZoom;if(!e||n)this._tileZoom=g,this._abortLoading&&
this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==f&&this._update(a),d||this._pruneTiles(),this._noPrune=!!d;this._setZoomTransforms(a,b)},_setZoomTransforms:function(a,b){for(var d in this._levels)this._setZoomTransform(this._levels[d],a,b)},_setZoomTransform:function(a,b,d){var e=this._map.getZoomScale(d,a.zoom);b=a.origin.multiplyBy(e).subtract(this._map._getNewPixelOrigin(b,d)).round();c.Browser.any3d?c.DomUtil.setTransform(a.el,b,e):c.DomUtil.setPosition(a.el,b)},_resetGrid:function(){var a=
this._map,b=a.options.crs,d=this._tileSize=this.getTileSize(),e=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g));this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,b.wrapLng[0]],e).x/d.x),Math.ceil(a.project([0,b.wrapLng[1]],e).x/d.y)];this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([b.wrapLat[0],0],e).y/d.x),Math.ceil(a.project([b.wrapLat[1],0],e).y/d.y)]},_onMoveEnd:function(){this._map&&
!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(a){var b=this._map,d=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom();d=b.getZoomScale(d,this._tileZoom);a=b.project(a,this._tileZoom).floor();b=b.getSize().divideBy(2*d);return new c.Bounds(a.subtract(b),a.add(b))},_update:function(a){var b=this._map;if(b){var d=b.getZoom();a===f&&(a=b.getCenter());if(this._tileZoom!==f){b=this._getTiledPixelBounds(a);var e=this._pxBoundsToTileRange(b),g=e.getCenter();b=[];
var n=this.options.keepBuffer;n=new c.Bounds(e.getBottomLeft().subtract([n,-n]),e.getTopRight().add([n,-n]));for(var m in this._tiles){var q=this._tiles[m].coords;q.z===this._tileZoom&&n.contains(c.point(q.x,q.y))||(this._tiles[m].current=!1)}if(1<Math.abs(d-this._tileZoom))this._setView(a,d);else{for(d=e.min.y;d<=e.max.y;d++)for(a=e.min.x;a<=e.max.x;a++)m=new c.Point(a,d),m.z=this._tileZoom,this._isValidTile(m)&&((n=this._tiles[this._tileCoordsToKey(m)])?n.current=!0:b.push(m));b.sort(function(t,
w){return t.distanceTo(g)-w.distanceTo(g)});if(0!==b.length){this._loading||(this._loading=!0,this.fire("loading"));e=k.createDocumentFragment();for(a=0;a<b.length;a++)this._addTile(b[a],e);this._level.el.appendChild(e)}}}}},_isValidTile:function(a){var b=this._map.options.crs;if(!b.infinite){var d=this._globalTileRange;if(!b.wrapLng&&(a.x<d.min.x||a.x>d.max.x)||!b.wrapLat&&(a.y<d.min.y||a.y>d.max.y))return!1}if(!this.options.bounds)return!0;a=this._tileCoordsToBounds(a);return c.latLngBounds(this.options.bounds).overlaps(a)},
_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(a){var b=this._map,d=this.getTileSize(),e=a.scaleBy(d);d=e.add(d);e=b.unproject(e,a.z);a=b.unproject(d,a.z);this.options.noWrap||(e=b.wrapLatLng(e),a=b.wrapLatLng(a));return new c.LatLngBounds(e,a)},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){a=a.split(":");var b=new c.Point(+a[0],+a[1]);b.z=+a[2];return b},_removeTile:function(a){var b=this._tiles[a];
b&&(c.DomUtil.remove(b.el),delete this._tiles[a],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){c.DomUtil.addClass(a,"leaflet-tile");var b=this.getTileSize();a.style.width=b.x+"px";a.style.height=b.y+"px";a.onselectstart=c.Util.falseFn;a.onmousemove=c.Util.falseFn;c.Browser.ielt9&&1>this.options.opacity&&c.DomUtil.setOpacity(a,this.options.opacity);c.Browser.android&&!c.Browser.android23&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,
b){var d=this._getTilePos(a),e=this._tileCoordsToKey(a),g=this.createTile(this._wrapCoords(a),c.bind(this._tileReady,this,a));this._initTile(g);2>this.createTile.length&&c.Util.requestAnimFrame(c.bind(this._tileReady,this,a,null,g));c.DomUtil.setPosition(g,d);this._tiles[e]={el:g,coords:a,current:!0};b.appendChild(g);this.fire("tileloadstart",{tile:g,coords:a})},_tileReady:function(a,b,d){this._map&&(b&&this.fire("tileerror",{error:b,tile:d,coords:a}),d=this._tileCoordsToKey(a),d=this._tiles[d])&&
(d.loaded=+new Date,this._map._fadeAnimated?(c.DomUtil.setOpacity(d.el,0),c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),b||(c.DomUtil.addClass(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),c.Browser.ielt9||!this._map._fadeAnimated?c.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(c.bind(this._pruneTiles,this),250)))},
_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var b=new c.Point(this._wrapX?c.Util.wrapNum(a.x,this._wrapX):a.x,this._wrapY?c.Util.wrapNum(a.y,this._wrapY):a.y);b.z=a.z;return b},_pxBoundsToTileRange:function(a){var b=this.getTileSize();return new c.Bounds(a.min.unscaleBy(b).floor(),a.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});c.gridLayer=
function(a){return new c.GridLayer(a)};c.TileLayer=c.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,b){this._url=a;b=c.setOptions(this,b);b.detectRetina&&c.Browser.retina&&0<b.maxZoom&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom++):(b.zoomOffset++,b.maxZoom--),b.minZoom=Math.max(0,b.minZoom));"string"===typeof b.subdomains&&
(b.subdomains=b.subdomains.split(""));if(!c.Browser.android)this.on("tileunload",this._onTileRemove)},setUrl:function(a,b){this._url=a;b||this.redraw();return this},createTile:function(a,b){var d=k.createElement("img");c.DomEvent.on(d,"load",c.bind(this._tileOnLoad,this,b,d));c.DomEvent.on(d,"error",c.bind(this._tileOnError,this,b,d));this.options.crossOrigin&&(d.crossOrigin="");d.alt="";d.src=this.getTileUrl(a);return d},getTileUrl:function(a){var b={r:c.Browser.retina?"@2x":"",s:this._getSubdomain(a),
x:a.x,y:a.y,z:this._getZoomForUrl()};this._map&&!this._map.options.crs.infinite&&(a=this._globalTileRange.max.y-a.y,this.options.tms&&(b.y=a),b["-y"]=a);return c.Util.template(this._url,c.extend(b,this.options))},_tileOnLoad:function(a,b){c.Browser.ielt9?setTimeout(c.bind(a,this,null,b),0):a(null,b)},_tileOnError:function(a,b,d){var e=this.options.errorTileUrl;e&&(b.src=e);a(d,b)},getTileSize:function(){var a=this._map,b=c.GridLayer.prototype.getTileSize.call(this),d=this._tileZoom+this.options.zoomOffset,
e=this.options.maxNativeZoom;return null!==e&&d>e?b.divideBy(a.getZoomScale(e,d)).round():b},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this.options,b=this._tileZoom;a.zoomReverse&&(b=a.maxZoom-b);b+=a.zoomOffset;return null!==a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getSubdomain:function(a){return this.options.subdomains[Math.abs(a.x+a.y)%this.options.subdomains.length]},_abortLoading:function(){var a;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom){var b=
this._tiles[a].el;b.onload=c.Util.falseFn;b.onerror=c.Util.falseFn;b.complete||(b.src=c.Util.emptyImageUrl,c.DomUtil.remove(b))}}});c.tileLayer=function(a,b){return new c.TileLayer(a,b)};c.TileLayer.WMS=c.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,b){this._url=a;a=c.extend({},this.defaultWmsParams);for(var d in b)d in this.options||(a[d]=b[d]);b=c.setOptions(this,
b);a.width=a.height=b.tileSize*(b.detectRetina&&c.Browser.retina?2:1);this.wmsParams=a},onAdd:function(a){this._crs=this.options.crs||a.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code;c.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._tileCoordsToBounds(a),d=this._crs.project(b.getNorthWest());b=this._crs.project(b.getSouthEast());d=(1.3<=this._wmsVersion&&this._crs===c.CRS.EPSG4326?[b.y,d.x,
d.y,b.x]:[d.x,b.y,b.x,d.y]).join(",");a=c.TileLayer.prototype.getTileUrl.call(this,a);return a+c.Util.getParamString(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+d},setParams:function(a,b){c.extend(this.wmsParams,a);b||this.redraw();return this}});c.tileLayer.wms=function(a,b){return new c.TileLayer.WMS(a,b)};c.ImageOverlay=c.Layer.extend({options:{opacity:1,alt:"",interactive:!1,attribution:null,crossOrigin:!1},initialize:function(a,b,d){this._url=a;this._bounds=
c.latLngBounds(b);c.setOptions(this,d)},onAdd:function(){this._image||(this._initImage(),1>this.options.opacity&&this._updateOpacity());this.options.interactive&&(c.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image));this.getPane().appendChild(this._image);this._reset()},onRemove:function(){c.DomUtil.remove(this._image);this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){this.options.opacity=a;this._image&&this._updateOpacity();
return this},setStyle:function(a){a.opacity&&this.setOpacity(a.opacity);return this},bringToFront:function(){this._map&&c.DomUtil.toFront(this._image);return this},bringToBack:function(){this._map&&c.DomUtil.toBack(this._image);return this},setUrl:function(a){this._url=a;this._image&&(this._image.src=a);return this},setBounds:function(a){this._bounds=a;this._map&&this._reset();return this},getAttribution:function(){return this.options.attribution},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};
this._zoomAnimated&&(a.zoomanim=this._animateZoom);return a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._image=c.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=c.Util.falseFn;a.onmousemove=c.Util.falseFn;a.onload=c.bind(this.fire,this,"load");this.options.crossOrigin&&(a.crossOrigin="");a.src=this._url;a.alt=this.options.alt},_animateZoom:function(a){var b=this._map.getZoomScale(a.zoom);
a=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),a.zoom,a.center);c.DomUtil.setTransform(this._image,a,b)},_reset:function(){var a=this._image,b=new c.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=b.getSize();c.DomUtil.setPosition(a,b.min);a.style.width=d.x+"px";a.style.height=d.y+"px"},_updateOpacity:function(){c.DomUtil.setOpacity(this._image,this.options.opacity)}});c.imageOverlay=function(a,b,d){return new c.ImageOverlay(a,
b,d)};c.Icon=c.Class.extend({initialize:function(a){c.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var d=this._getIconUrl(a);if(!d){if("icon"===a)throw Error("iconUrl not set in Icon options (see the docs).");return null}b=this._createImg(d,b&&"IMG"===b.tagName?b:null);this._setIconStyles(b,a);return b},_setIconStyles:function(a,b){var d=this.options,e=d[b+"Size"];"number"===typeof e&&
(e=[e,e]);e=c.point(e);var g=c.point("shadow"===b&&d.shadowAnchor||d.iconAnchor||e&&e.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+(d.className||"");g&&(a.style.marginLeft=-g.x+"px",a.style.marginTop=-g.y+"px");e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){b=b||k.createElement("img");b.src=a;return b},_getIconUrl:function(a){return c.Browser.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});c.icon=function(a){return new c.Icon(a)};c.Icon.Default=
c.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){c.Icon.Default.imagePath||(c.Icon.Default.imagePath=this._detectIconPath());return(this.options.imagePath||c.Icon.Default.imagePath)+c.Icon.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var a=c.DomUtil.create("div","leaflet-default-icon-path",k.body),
b=c.DomUtil.getStyle(a,"background-image")||c.DomUtil.getStyle(a,"backgroundImage");k.body.removeChild(a);return 0===b.indexOf("url")?b.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""):""}});c.Marker=c.Layer.extend({options:{icon:new c.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(a,b){c.setOptions(this,
b);this._latlng=c.latLng(a)},onAdd:function(a){if(this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation)a.on("zoomanim",this._animateZoom,this);this._initIcon();this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks());this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this);this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},
setLatLng:function(a){var b=this._latlng;this._latlng=c.latLng(a);this.update();return this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){this.options.zIndexOffset=a;return this.update()},setIcon:function(a){this.options.icon=a;this._map&&(this._initIcon(),this.update());this._popup&&this.bindPopup(this._popup,this._popup.options);return this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();
this._setPos(a)}return this},_initIcon:function(){var a=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=a.icon.createIcon(this._icon),e=!1;d!==this._icon&&(this._icon&&this._removeIcon(),e=!0,a.title&&(d.title=a.title),a.alt&&(d.alt=a.alt));c.DomUtil.addClass(d,b);a.keyboard&&(d.tabIndex="0");this._icon=d;if(a.riseOnHover)this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});d=a.icon.createShadow(this._shadow);var g=!1;d!==this._shadow&&(this._removeShadow(),g=
!0);d&&c.DomUtil.addClass(d,b);this._shadow=d;1>a.opacity&&this._updateOpacity();e&&this.getPane().appendChild(this._icon);this._initInteraction();d&&g&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex});c.DomUtil.remove(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&c.DomUtil.remove(this._shadow);this._shadow=null},_setPos:function(a){c.DomUtil.setPosition(this._icon,
a);this._shadow&&c.DomUtil.setPosition(this._shadow,a);this._zIndex=a.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(c.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),c.Handler.MarkerDrag)){var a=this.options.draggable;
this.dragging&&(a=this.dragging.enabled(),this.dragging.disable());this.dragging=new c.Handler.MarkerDrag(this);a&&this.dragging.enable()}},setOpacity:function(a){this.options.opacity=a;this._map&&this._updateOpacity();return this},_updateOpacity:function(){var a=this.options.opacity;c.DomUtil.setOpacity(this._icon,a);this._shadow&&c.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});c.marker=function(a,
b){return new c.Marker(a,b)};c.DivIcon=c.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){a=a&&"DIV"===a.tagName?a:k.createElement("div");var b=this.options;a.innerHTML=!1!==b.html?b.html:"";b.bgPos&&(b=c.point(b.bgPos),a.style.backgroundPosition=-b.x+"px "+-b.y+"px");this._setIconStyles(a,"icon");return a},createShadow:function(){return null}});c.divIcon=function(a){return new c.DivIcon(a)};c.DivOverlay=c.Layer.extend({options:{offset:[0,
7],className:"",pane:"popupPane"},initialize:function(a,b){c.setOptions(this,a);this._source=b},onAdd:function(a){this._zoomAnimated=a._zoomAnimated;this._container||this._initLayout();a._fadeAnimated&&c.DomUtil.setOpacity(this._container,0);clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();a._fadeAnimated&&c.DomUtil.setOpacity(this._container,1);this.bringToFront()},onRemove:function(a){a._fadeAnimated?(c.DomUtil.setOpacity(this._container,0),this._removeTimeout=
setTimeout(c.bind(c.DomUtil.remove,c.DomUtil,this._container),200)):c.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){this._latlng=c.latLng(a);this._map&&(this._updatePosition(),this._adjustPan());return this},getContent:function(){return this._content},setContent:function(a){this._content=a;this.update();return this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),
this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};this._zoomAnimated&&(a.zoomanim=this._animateZoom);return a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){this._map&&c.DomUtil.toFront(this._container);return this},bringToBack:function(){this._map&&c.DomUtil.toBack(this._container);return this},_updateContent:function(){if(this._content){var a=
this._contentNode,b="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof b)a.innerHTML=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=c.point(this.options.offset),d=this._getAnchor();this._zoomAnimated?c.DomUtil.setPosition(this._container,a.add(d)):b=b.add(a).add(d);a=this._containerBottom=-b.y;b=this._containerLeft=
-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=a+"px";this._container.style.left=b+"px"}},_getAnchor:function(){return[0,0]}});c.Popup=c.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(a){a.openPopup(this);return this},onAdd:function(a){c.DivOverlay.prototype.onAdd.call(this,a);a.fire("popupopen",
{popup:this});if(this._source&&(this._source.fire("popupopen",{popup:this},!0),!(this._source instanceof c.Path)))this._source.on("preclick",c.DomEvent.stopPropagation)},onRemove:function(a){c.DivOverlay.prototype.onRemove.call(this,a);a.fire("popupclose",{popup:this});this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof c.Path||this._source.off("preclick",c.DomEvent.stopPropagation))},getEvents:function(){var a=c.DivOverlay.prototype.getEvents.call(this);if("closeOnClick"in
this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)a.preclick=this._close;this.options.keepInView&&(a.moveend=this._adjustPan);return a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a=this._container=c.DomUtil.create("div","leaflet-popup "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var b=this._closeButton=c.DomUtil.create("a","leaflet-popup-close-button",a);b.href="#close";b.innerHTML="&#215;";
c.DomEvent.on(b,"click",this._onCloseButtonClick,this)}b=this._wrapper=c.DomUtil.create("div","leaflet-popup-content-wrapper",a);this._contentNode=c.DomUtil.create("div","leaflet-popup-content",b);c.DomEvent.disableClickPropagation(b).disableScrollPropagation(this._contentNode).on(b,"contextmenu",c.DomEvent.stopPropagation);this._tipContainer=c.DomUtil.create("div","leaflet-popup-tip-container",a);this._tip=c.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_updateLayout:function(){var a=
this._contentNode,b=a.style;b.width="";b.whiteSpace="nowrap";var d=a.offsetWidth;d=Math.min(d,this.options.maxWidth);d=Math.max(d,this.options.minWidth);b.width=d+1+"px";b.whiteSpace="";b.height="";d=a.offsetHeight;var e=this.options.maxHeight;e&&d>e?(b.height=e+"px",c.DomUtil.addClass(a,"leaflet-popup-scrolled")):c.DomUtil.removeClass(a,"leaflet-popup-scrolled");this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);
var b=this._getAnchor();c.DomUtil.setPosition(this._container,a.add(b))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var a=this._map,b=parseInt(c.DomUtil.getStyle(this._container,"marginBottom"),10)||0;b=this._container.offsetHeight+b;var d=this._containerWidth,e=new c.Point(this._containerLeft,-b-this._containerBottom);e._add(c.DomUtil.getPosition(this._container));e=a.layerPointToContainerPoint(e);var g=c.point(this.options.autoPanPadding),
n=c.point(this.options.autoPanPaddingTopLeft||g);g=c.point(this.options.autoPanPaddingBottomRight||g);var m=a.getSize(),q=0,t=0;e.x+d+g.x>m.x&&(q=e.x+d-m.x+g.x);0>e.x-q-n.x&&(q=e.x-n.x);e.y+b+g.y>m.y&&(t=e.y+b-m.y+g.y);0>e.y-t-n.y&&(t=e.y-n.y);(q||t)&&a.fire("autopanstart").panBy([q,t])}},_onCloseButtonClick:function(a){this._close();c.DomEvent.stop(a)},_getAnchor:function(){return c.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});c.popup=function(a,b){return new c.Popup(a,
b)};c.Map.mergeOptions({closePopupOnClick:!0});c.Map.include({openPopup:function(a,b,d){a instanceof c.Popup||(a=(new c.Popup(d)).setContent(a));b&&a.setLatLng(b);if(this.hasLayer(a))return this;this._popup&&this._popup.options.autoClose&&this.closePopup();this._popup=a;return this.addLayer(a)},closePopup:function(a){a&&a!==this._popup||(a=this._popup,this._popup=null);a&&this.removeLayer(a);return this}});c.Layer.include({bindPopup:function(a,b){if(a instanceof c.Popup)c.setOptions(a,b),this._popup=
a,a._source=this;else{if(!this._popup||b)this._popup=new c.Popup(b,this);this._popup.setContent(a)}this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0);return this},unbindPopup:function(){this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null);return this},openPopup:function(a,b){a instanceof c.Layer||(b=a,a=this);if(a instanceof c.FeatureGroup)for(var d in this._layers){a=
this._layers[d];break}b||(b=a.getCenter?a.getCenter():a.getLatLng());this._popup&&this._map&&(this._popup._source=a,this._popup.update(),this._map.openPopup(this._popup,b));return this},closePopup:function(){this._popup&&this._popup._close();return this},togglePopup:function(a){this._popup&&(this._popup._map?this.closePopup():this.openPopup(a));return this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(a){this._popup&&this._popup.setContent(a);return this},getPopup:function(){return this._popup},
_openPopup:function(a){var b=a.layer||a.target;this._popup&&this._map&&(c.DomEvent.stop(a),b instanceof c.Path?this.openPopup(a.layer||a.target,a.latlng):this._map.hasLayer(this._popup)&&this._popup._source===b?this.closePopup():this.openPopup(b,a.latlng))},_movePopup:function(a){this._popup.setLatLng(a.latlng)}});c.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}});c.Tooltip=c.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",
permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){c.DivOverlay.prototype.onAdd.call(this,a);this.setOpacity(this.options.opacity);a.fire("tooltipopen",{tooltip:this});this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){c.DivOverlay.prototype.onRemove.call(this,a);a.fire("tooltipclose",{tooltip:this});this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var a=c.DivOverlay.prototype.getEvents.call(this);c.Browser.touch&&
!this.options.permanent&&(a.preclick=this._close);return a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=c.DomUtil.create("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var b=this._map,d=this._container,e=b.latLngToContainerPoint(b.getCenter());b=b.layerPointToContainerPoint(a);var g=this.options.direction,
n=d.offsetWidth,m=d.offsetHeight,q=c.point(this.options.offset),t=this._getAnchor();"top"===g?a=a.add(c.point(-n/2+q.x,-m+q.y+t.y)):"bottom"===g?a=a.subtract(c.point(n/2-q.x,-q.y)):"center"===g?a=a.subtract(c.point(n/2+q.x,m/2-t.y+q.y)):"right"===g||"auto"===g&&b.x<e.x?(g="right",a=a.add([q.x+t.x,t.y-m/2+q.y])):(g="left",a=a.subtract(c.point(n+t.x-q.x,m/2-t.y-q.y)));c.DomUtil.removeClass(d,"leaflet-tooltip-right");c.DomUtil.removeClass(d,"leaflet-tooltip-left");c.DomUtil.removeClass(d,"leaflet-tooltip-top");
c.DomUtil.removeClass(d,"leaflet-tooltip-bottom");c.DomUtil.addClass(d,"leaflet-tooltip-"+g);c.DomUtil.setPosition(d,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a;this._container&&c.DomUtil.setOpacity(this._container,a)},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(a)},_getAnchor:function(){return c.point(this._source&&this._source._getTooltipAnchor&&
!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});c.tooltip=function(a,b){return new c.Tooltip(a,b)};c.Map.include({openTooltip:function(a,b,d){a instanceof c.Tooltip||(a=(new c.Tooltip(d)).setContent(a));b&&a.setLatLng(b);return this.hasLayer(a)?this:this.addLayer(a)},closeTooltip:function(a){a&&this.removeLayer(a);return this}});c.Layer.include({bindTooltip:function(a,b){if(a instanceof c.Tooltip)c.setOptions(a,b),this._tooltip=a,a._source=this;else{if(!this._tooltip||b)this._tooltip=
c.tooltip(b,this);this._tooltip.setContent(a)}this._initTooltipInteractions();this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip();return this},unbindTooltip:function(){this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null);return this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var b={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?b.add=this._openTooltip:(b.mouseover=
this._openTooltip,b.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(b.mousemove=this._moveTooltip),c.Browser.touch&&(b.click=this._openTooltip));this[a?"off":"on"](b);this._tooltipHandlersAdded=!a}},openTooltip:function(a,b){a instanceof c.Layer||(b=a,a=this);if(a instanceof c.FeatureGroup)for(var d in this._layers){a=this._layers[d];break}b||(b=a.getCenter?a.getCenter():a.getLatLng());this._tooltip&&this._map&&(this._tooltip._source=a,this._tooltip.update(),this._map.openTooltip(this._tooltip,
b),this._tooltip.options.interactive&&this._tooltip._container&&(c.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container)));return this},closeTooltip:function(){this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(c.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container)));return this},toggleTooltip:function(a){this._tooltip&&
(this._tooltip._map?this.closeTooltip():this.openTooltip(a));return this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){this._tooltip&&this._tooltip.setContent(a);return this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){this._tooltip&&this._map&&this.openTooltip(a.layer||a.target,this._tooltip.options.sticky?a.latlng:f)},_moveTooltip:function(a){var b=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(a=this._map.mouseEventToContainerPoint(a.originalEvent),
a=this._map.containerPointToLayerPoint(a),b=this._map.layerPointToLatLng(a));this._tooltip.setLatLng(b)}});c.Marker.include({_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}});c.LayerGroup=c.Layer.extend({initialize:function(a){this._layers={};var b;if(a){var d=0;for(b=a.length;d<b;d++)this.addLayer(a[d])}},addLayer:function(a){var b=this.getLayerId(a);this._layers[b]=a;this._map&&this._map.addLayer(a);return this},removeLayer:function(a){a=a in this._layers?a:this.getLayerId(a);
this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]);delete this._layers[a];return this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){for(var a in this._layers)this.removeLayer(this._layers[a]);return this},invoke:function(a){var b=Array.prototype.slice.call(arguments,1),d;for(d in this._layers){var e=this._layers[d];e[a]&&e[a].apply(e,b)}return this},onAdd:function(a){for(var b in this._layers)a.addLayer(this._layers[b])},
onRemove:function(a){for(var b in this._layers)a.removeLayer(this._layers[b])},eachLayer:function(a,b){for(var d in this._layers)a.call(b,this._layers[d]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[],b;for(b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c.stamp(a)}});c.layerGroup=function(a){return new c.LayerGroup(a)};c.FeatureGroup=c.LayerGroup.extend({addLayer:function(a){if(this.hasLayer(a))return this;
a.addEventParent(this);c.LayerGroup.prototype.addLayer.call(this,a);return this.fire("layeradd",{layer:a})},removeLayer:function(a){if(!this.hasLayer(a))return this;a in this._layers&&(a=this._layers[a]);a.removeEventParent(this);c.LayerGroup.prototype.removeLayer.call(this,a);return this.fire("layerremove",{layer:a})},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=
new c.LatLngBounds,b;for(b in this._layers){var d=this._layers[b];a.extend(d.getBounds?d.getBounds():d.getLatLng())}return a}});c.featureGroup=function(a){return new c.FeatureGroup(a)};c.Renderer=c.Layer.extend({options:{padding:.1},initialize:function(a){c.setOptions(this,a);c.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&c.DomUtil.addClass(this._container,"leaflet-zoom-animated"));this.getPane().appendChild(this._container);this._update()},onRemove:function(){c.DomUtil.remove(this._container)},
getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};this._zoomAnimated&&(a.zoomanim=this._onAnimZoom);return a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,b){var d=this._map.getZoomScale(b,this._zoom),e=c.DomUtil.getPosition(this._container),g=this._map.getSize().multiplyBy(.5+this.options.padding),n=this._map.project(this._center,
b);a=this._map.project(a,b).subtract(n);e=g.multiplyBy(-d).add(e).add(g).subtract(a);c.Browser.any3d?c.DomUtil.setTransform(this._container,e,d):c.DomUtil.setPosition(this._container,e)},_reset:function(){this._update();this._updateTransform(this._center,this._zoom)},_update:function(){var a=this.options.padding,b=this._map.getSize(),d=this._map.containerPointToLayerPoint(b.multiplyBy(-a)).round();this._bounds=new c.Bounds(d,d.add(b.multiplyBy(1+2*a)).round());this._center=this._map.getCenter();this._zoom=
this._map.getZoom()}});c.Map.include({getRenderer:function(a){a=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;a||(a=this._renderer=this.options.preferCanvas&&c.canvas()||c.svg());this.hasLayer(a)||this.addLayer(a);return a},_getPaneRenderer:function(a){if("overlayPane"===a||a===f)return!1;var b=this._paneRenderers[a];b===f&&(b=c.SVG&&c.svg({pane:a})||c.Canvas&&c.canvas({pane:a}),this._paneRenderers[a]=b);return b}});c.Path=c.Layer.extend({options:{stroke:!0,
color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);this._reset();this._renderer._addPath(this);this._renderer.on("update",this._update,this)},onRemove:function(){this._renderer._removePath(this);this._renderer.off("update",this._update,this)},getEvents:function(){return{zoomend:this._project,
viewreset:this._reset}},redraw:function(){this._map&&this._renderer._updatePath(this);return this},setStyle:function(a){c.setOptions(this,a);this._renderer&&this._renderer._updateStyle(this);return this},bringToFront:function(){this._renderer&&this._renderer._bringToFront(this);return this},bringToBack:function(){this._renderer&&this._renderer._bringToBack(this);return this},getElement:function(){return this._path},_reset:function(){this._project();this._update()},_clickTolerance:function(){return(this.options.stroke?
this.options.weight/2:0)+(c.Browser.touch?10:0)}});c.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();b*=b;a=this._reducePoints(a,b);return a=this._simplifyDP(a,b)},pointToSegmentDistance:function(a,b,d){return Math.sqrt(this._sqClosestPointOnSegment(a,b,d,!0))},closestPointOnSegment:function(a,b,d){return this._sqClosestPointOnSegment(a,b,d)},_simplifyDP:function(a,b){var d=a.length,e=new (typeof Uint8Array!==f+""?Uint8Array:Array)(d);e[0]=e[d-1]=1;this._simplifyDPStep(a,e,b,0,
d-1);var g=[];for(b=0;b<d;b++)e[b]&&g.push(a[b]);return g},_simplifyDPStep:function(a,b,d,e,g){var n=0,m;for(m=e+1;m<=g-1;m++){var q=this._sqClosestPointOnSegment(a[m],a[e],a[g],!0);if(q>n){var t=m;n=q}}n>d&&(b[t]=1,this._simplifyDPStep(a,b,d,e,t),this._simplifyDPStep(a,b,d,t,g))},_reducePoints:function(a,b){for(var d=[a[0]],e=1,g=0,n=a.length;e<n;e++)this._sqDist(a[e],a[g])>b&&(d.push(a[e]),g=e);g<n-1&&d.push(a[n-1]);return d},clipSegment:function(a,b,d,e,g){e=e?this._lastCode:this._getBitCode(a,
d);var n=this._getBitCode(b,d);for(this._lastCode=n;;){if(!(e|n))return[a,b];if(e&n)return!1;var m=e||n;var q=this._getEdgeIntersection(a,b,m,d,g);var t=this._getBitCode(q,d);m===e?(a=q,e=t):(b=q,n=t)}},_getEdgeIntersection:function(a,b,d,e,g){var n=b.x-a.x;b=b.y-a.y;var m=e.min;e=e.max;if(d&8){var q=a.x+n*(e.y-a.y)/b;var t=e.y}else d&4?(q=a.x+n*(m.y-a.y)/b,t=m.y):d&2?(q=e.x,t=a.y+b*(e.x-a.x)/n):d&1&&(q=m.x,t=a.y+b*(m.x-a.x)/n);return new c.Point(q,t,g)},_getBitCode:function(a,b){var d=0;a.x<b.min.x?
d|=1:a.x>b.max.x&&(d|=2);a.y<b.min.y?d|=4:a.y>b.max.y&&(d|=8);return d},_sqDist:function(a,b){var d=b.x-a.x;a=b.y-a.y;return d*d+a*a},_sqClosestPointOnSegment:function(a,b,d,e){var g=b.x;b=b.y;var n=d.x-g,m=d.y-b,q=n*n+m*m;0<q&&(q=((a.x-g)*n+(a.y-b)*m)/q,1<q?(g=d.x,b=d.y):0<q&&(g+=n*q,b+=m*q));n=a.x-g;m=a.y-b;return e?n*n+m*m:new c.Point(g,b)}};c.Polyline=c.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,b){c.setOptions(this,b);this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},
setLatLngs:function(a){this._setLatLngs(a);return this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var b=Infinity,d=null,e=c.LineUtil._sqClosestPointOnSegment,g,n,m=0,q=this._parts.length;m<q;m++)for(var t=this._parts[m],w=1,y=t.length;w<y;w++){g=t[w-1];n=t[w];var H=e(a,g,n,!0);H<b&&(b=H,d=e(a,g,n))}d&&(d.distance=Math.sqrt(b));return d},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");var a,b,d,e=this._rings[0],
g=e.length;if(!g)return null;for(b=a=0;a<g-1;a++)b+=e[a].distanceTo(e[a+1])/2;if(0===b)return this._map.layerPointToLatLng(e[0]);for(d=a=0;a<g-1;a++){var n=e[a];var m=e[a+1];var q=n.distanceTo(m);d+=q;if(d>b)return a=(d-b)/q,this._map.layerPointToLatLng([m.x-a*(m.x-n.x),m.y-a*(m.y-n.y)])}},getBounds:function(){return this._bounds},addLatLng:function(a,b){b=b||this._defaultShape();a=c.latLng(a);b.push(a);this._bounds.extend(a);return this.redraw()},_setLatLngs:function(a){this._bounds=new c.LatLngBounds;
this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return c.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var b=[],d=c.Polyline._flat(a),e=0,g=a.length;e<g;e++)d?(b[e]=c.latLng(a[e]),this._bounds.extend(b[e])):b[e]=this._convertLatLngs(a[e]);return b},_project:function(){var a=new c.Bounds;this._rings=[];this._projectLatlngs(this._latlngs,this._rings,a);var b=this._clickTolerance();b=new c.Point(b,b);this._bounds.isValid()&&a.isValid()&&
(a.min._subtract(b),a.max._add(b),this._pxBounds=a)},_projectLatlngs:function(a,b,d){var e=a.length,g;if(a[0]instanceof c.LatLng){var n=[];for(g=0;g<e;g++)n[g]=this._map.latLngToLayerPoint(a[g]),d.extend(n[g]);b.push(n)}else for(g=0;g<e;g++)this._projectLatlngs(a[g],b,d)},_clipPoints:function(){var a=this._renderer._bounds;this._parts=[];if(this._pxBounds&&this._pxBounds.intersects(a))if(this.options.noClip)this._parts=this._rings;else{var b=this._parts,d,e,g,n;var m=d=0;for(e=this._rings.length;d<
e;d++){var q=this._rings[d];var t=0;for(g=q.length;t<g-1;t++)if(n=c.LineUtil.clipSegment(q[t],q[t+1],a,t,!0))if(b[m]=b[m]||[],b[m].push(n[0]),n[1]!==q[t+1]||t===g-2)b[m].push(n[1]),m++}}},_simplifyPoints:function(){for(var a=this._parts,b=this.options.smoothFactor,d=0,e=a.length;d<e;d++)a[d]=c.LineUtil.simplify(a[d],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}});c.polyline=function(a,b){return new c.Polyline(a,
b)};c.Polyline._flat=function(a){return!c.Util.isArray(a[0])||"object"!==typeof a[0][0]&&"undefined"!==typeof a[0][0]};c.PolyUtil={};c.PolyUtil.clipPolygon=function(a,b,d){var e=[1,4,2,8],g,n,m,q=c.LineUtil;var t=0;for(m=a.length;t<m;t++)a[t]._code=q._getBitCode(a[t],b);for(n=0;4>n;n++){var w=e[n];var y=[];t=0;m=a.length;for(g=m-1;t<m;g=t++){var H=a[t];g=a[g];H._code&w?g._code&w||(g=q._getEdgeIntersection(g,H,w,b,d),g._code=q._getBitCode(g,b),y.push(g)):(g._code&w&&(g=q._getEdgeIntersection(g,H,w,
b,d),g._code=q._getBitCode(g,b),y.push(g)),y.push(H))}a=y}return a};c.Polygon=c.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");var a,b,d,e,g=this._rings[0],n=g.length;if(!n)return null;var m=b=d=e=0;for(a=n-1;m<n;a=m++){var q=g[m];a=g[a];var t=q.y*a.x-a.y*q.x;d+=(q.x+a.x)*t;e+=(q.y+a.y)*t;b+=3*t}return this._map.layerPointToLatLng(0===b?g[0]:
[d/b,e/b])},_convertLatLngs:function(a){a=c.Polyline.prototype._convertLatLngs.call(this,a);var b=a.length;2<=b&&a[0]instanceof c.LatLng&&a[0].equals(a[b-1])&&a.pop();return a},_setLatLngs:function(a){c.Polyline.prototype._setLatLngs.call(this,a);c.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,b=this.options.weight;b=new c.Point(b,
b);a=new c.Bounds(a.min.subtract(b),a.max.add(b));this._parts=[];if(this._pxBounds&&this._pxBounds.intersects(a))if(this.options.noClip)this._parts=this._rings;else{b=0;for(var d=this._rings.length,e;b<d;b++)e=c.PolyUtil.clipPolygon(this._rings[b],a,!0),e.length&&this._parts.push(e)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}});c.polygon=function(a,b){return new c.Polygon(a,b)};c.Rectangle=c.Polygon.extend({initialize:function(a,b){c.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),
b)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){a=c.latLngBounds(a);return[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});c.rectangle=function(a,b){return new c.Rectangle(a,b)};c.CircleMarker=c.Path.extend({options:{fill:!0,radius:10},initialize:function(a,b){c.setOptions(this,b);this._latlng=c.latLng(a);this._radius=this.options.radius},setLatLng:function(a){this._latlng=c.latLng(a);this.redraw();return this.fire("move",
{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){this.options.radius=this._radius=a;return this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var b=a&&a.radius||this._radius;c.Path.prototype.setStyle.call(this,a);this.setRadius(b);return this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var a=this._radius,b=this._radiusY||a,d=this._clickTolerance();a=[a+d,
b+d];this._pxBounds=new c.Bounds(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}});c.circleMarker=function(a,b){return new c.CircleMarker(a,b)};c.Circle=c.CircleMarker.extend({initialize:function(a,b,d){"number"===typeof b&&(b=c.extend({},d,{radius:b}));c.setOptions(this,b);this._latlng=c.latLng(a);if(isNaN(this.options.radius))throw Error("Circle radius cannot be NaN");
this._mRadius=this.options.radius},setRadius:function(a){this._mRadius=a;return this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new c.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:c.Path.prototype.setStyle,_project:function(){var a=this._latlng.lng,b=this._latlng.lat,d=this._map,e=d.options.crs;if(e.distance===c.CRS.Earth.distance){var g=
Math.PI/180;e=this._mRadius/c.CRS.Earth.R/g;var n=d.project([b+e,a]),m=d.project([b-e,a]);m=n.add(m).divideBy(2);var q=d.unproject(m).lat;g=Math.acos((Math.cos(e*g)-Math.sin(b*g)*Math.sin(q*g))/(Math.cos(b*g)*Math.cos(q*g)))/g;if(isNaN(g)||0===g)g=e/Math.cos(Math.PI/180*b);this._point=m.subtract(d.getPixelOrigin());this._radius=isNaN(g)?0:Math.max(Math.round(m.x-d.project([q,a-g]).x),1);this._radiusY=Math.max(Math.round(m.y-n.y),1)}else a=e.unproject(e.project(this._latlng).subtract([this._mRadius,
0])),this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(a).x;this._updateBounds()}});c.circle=function(a,b,d){return new c.Circle(a,b,d)};c.SVG=c.Renderer.extend({getEvents:function(){var a=c.Renderer.prototype.getEvents.call(this);a.zoomstart=this._onZoomStart;return a},_initContainer:function(){this._container=c.SVG.create("svg");this._container.setAttribute("pointer-events","none");this._rootGroup=c.SVG.create("g");this._container.appendChild(this._rootGroup)},
_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){c.Renderer.prototype._update.call(this);var a=this._bounds,b=a.getSize(),d=this._container;this._svgSize&&this._svgSize.equals(b)||(this._svgSize=b,d.setAttribute("width",b.x),d.setAttribute("height",b.y));c.DomUtil.setPosition(d,a.min);d.setAttribute("viewBox",[a.min.x,a.min.y,b.x,b.y].join(" "));this.fire("update")}},_initPath:function(a){var b=a._path=c.SVG.create("path");a.options.className&&
c.DomUtil.addClass(b,a.options.className);a.options.interactive&&c.DomUtil.addClass(b,"leaflet-interactive");this._updateStyle(a)},_addPath:function(a){this._rootGroup.appendChild(a._path);a.addInteractiveTarget(a._path)},_removePath:function(a){c.DomUtil.remove(a._path);a.removeInteractiveTarget(a._path)},_updatePath:function(a){a._project();a._update()},_updateStyle:function(a){var b=a._path;a=a.options;b&&(a.stroke?(b.setAttribute("stroke",a.color),b.setAttribute("stroke-opacity",a.opacity),b.setAttribute("stroke-width",
a.weight),b.setAttribute("stroke-linecap",a.lineCap),b.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?b.setAttribute("stroke-dasharray",a.dashArray):b.removeAttribute("stroke-dasharray"),a.dashOffset?b.setAttribute("stroke-dashoffset",a.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),a.fill?(b.setAttribute("fill",a.fillColor||a.color),b.setAttribute("fill-opacity",a.fillOpacity),b.setAttribute("fill-rule",a.fillRule||"evenodd")):b.setAttribute("fill","none"))},
_updatePoly:function(a,b){this._setPath(a,c.SVG.pointsToPath(a._parts,b))},_updateCircle:function(a){var b=a._point,d=a._radius,e="a"+d+","+(a._radiusY||d)+" 0 1,0 ";b=a._empty()?"M0 0":"M"+(b.x-d)+","+b.y+e+2*d+",0 "+e+2*-d+",0 ";this._setPath(a,b)},_setPath:function(a,b){a._path.setAttribute("d",b)},_bringToFront:function(a){c.DomUtil.toFront(a._path)},_bringToBack:function(a){c.DomUtil.toBack(a._path)}});c.extend(c.SVG,{create:function(a){return k.createElementNS("http://www.w3.org/2000/svg",a)},
pointsToPath:function(a,b){var d="",e,g;var n=0;for(e=a.length;n<e;n++){var m=a[n];var q=0;for(g=m.length;q<g;q++){var t=m[q];d+=(q?"L":"M")+t.x+" "+t.y}d+=b?c.Browser.svg?"z":"x":""}return d||"M0 0"}});c.Browser.svg=!(!k.createElementNS||!c.SVG.create("svg").createSVGRect);c.svg=function(a){return c.Browser.svg||c.Browser.vml?new c.SVG(a):null};c.Browser.vml=!c.Browser.svg&&function(){try{var a=k.createElement("div");a.innerHTML='<v:shape adj="1"/>';var b=a.firstChild;b.style.behavior="url(#default#VML)";
return b&&"object"===typeof b.adj}catch(d){return!1}}();c.SVG.include(c.Browser.vml?{_initContainer:function(){this._container=c.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(c.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var b=a._container=c.SVG.create("shape");c.DomUtil.addClass(b,"leaflet-vml-shape "+(this.options.className||""));b.coordsize="1 1";a._path=c.SVG.create("path");b.appendChild(a._path);this._updateStyle(a)},
_addPath:function(a){var b=a._container;this._container.appendChild(b);a.options.interactive&&a.addInteractiveTarget(b)},_removePath:function(a){var b=a._container;c.DomUtil.remove(b);a.removeInteractiveTarget(b)},_updateStyle:function(a){var b=a._stroke,d=a._fill,e=a.options,g=a._container;g.stroked=!!e.stroke;g.filled=!!e.fill;e.stroke?(b||(b=a._stroke=c.SVG.create("stroke")),g.appendChild(b),b.weight=e.weight+"px",b.color=e.color,b.opacity=e.opacity,b.dashStyle=e.dashArray?c.Util.isArray(e.dashArray)?
e.dashArray.join(" "):e.dashArray.replace(/( *, *)/g," "):"",b.endcap=e.lineCap.replace("butt","flat"),b.joinstyle=e.lineJoin):b&&(g.removeChild(b),a._stroke=null);e.fill?(d||(d=a._fill=c.SVG.create("fill")),g.appendChild(d),d.color=e.fillColor||e.color,d.opacity=e.fillOpacity):d&&(g.removeChild(d),a._fill=null)},_updateCircle:function(a){var b=a._point.round(),d=Math.round(a._radius),e=Math.round(a._radiusY||d);this._setPath(a,a._empty()?"M0 0":"AL "+b.x+","+b.y+" "+d+","+e+" 0,23592600")},_setPath:function(a,
b){a._path.v=b},_bringToFront:function(a){c.DomUtil.toFront(a._container)},_bringToBack:function(a){c.DomUtil.toBack(a._container)}}:{});c.Browser.vml&&(c.SVG.create=function(){try{return k.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return k.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(b){return k.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}());c.Canvas=c.Renderer.extend({onAdd:function(){c.Renderer.prototype.onAdd.call(this);
this._layers=this._layers||{};this._draw()},_initContainer:function(){var a=this._container=k.createElement("canvas");c.DomEvent.on(a,"mousemove",c.Util.throttle(this._onMouseMove,32,this),this).on(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(a,"mouseout",this._handleMouseOut,this);this._ctx=a.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={};c.Renderer.prototype._update.call(this);var a=this._bounds,b=this._container,
d=a.getSize(),e=c.Browser.retina?2:1;c.DomUtil.setPosition(b,a.min);b.width=e*d.x;b.height=e*d.y;b.style.width=d.x+"px";b.style.height=d.y+"px";c.Browser.retina&&this._ctx.scale(2,2);this._ctx.translate(-a.min.x,-a.min.y);this.fire("update")}},_initPath:function(a){this._updateDashArray(a);this._layers[c.stamp(a)]=a},_addPath:c.Util.falseFn,_removePath:function(a){a._removed=!0;this._requestRedraw(a)},_updatePath:function(a){this._redrawBounds=a._pxBounds;this._draw(!0);a._project();a._update();this._draw();
this._redrawBounds=null},_updateStyle:function(a){this._updateDashArray(a);this._requestRedraw(a)},_updateDashArray:function(a){if(a.options.dashArray){var b=a.options.dashArray.split(","),d=[],e;for(e=0;e<b.length;e++)d.push(Number(b[e]));a.options._dashArray=d}},_requestRedraw:function(a){if(this._map){var b=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new c.Bounds;this._redrawBounds.extend(a._pxBounds.min.subtract([b,b]));this._redrawBounds.extend(a._pxBounds.max.add([b,b]));
this._redrawRequest=this._redrawRequest||c.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null;this._draw(!0);this._draw();this._redrawBounds=null},_draw:function(a){this._clear=a;var b=this._redrawBounds;this._ctx.save();b&&(this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y),this._ctx.clip());for(var d in this._layers){var e=this._layers[d];(!b||e._pxBounds&&e._pxBounds.intersects(b))&&e._updatePath();a&&e._removed&&(delete e._removed,
delete this._layers[d])}this._ctx.restore()},_updatePoly:function(a,b){var d,e,g=a._parts,n=g.length,m=this._ctx;if(n){this._drawnLayers[a._leaflet_id]=a;m.beginPath();m.setLineDash&&m.setLineDash(a.options&&a.options._dashArray||[]);for(d=0;d<n;d++){var q=0;for(e=g[d].length;q<e;q++){var t=g[d][q];m[q?"lineTo":"moveTo"](t.x,t.y)}b&&m.closePath()}this._fillStroke(m,a)}},_updateCircle:function(a){if(!a._empty()){var b=a._point,d=this._ctx,e=a._radius,g=(a._radiusY||e)/e;this._drawnLayers[a._leaflet_id]=
a;1!==g&&(d.save(),d.scale(1,g));d.beginPath();d.arc(b.x,b.y/g,e,0,2*Math.PI,!1);1!==g&&d.restore();this._fillStroke(d,a)}},_fillStroke:function(a,b){var d=this._clear,e=b.options;a.globalCompositeOperation=d?"destination-out":"source-over";e.fill&&(a.globalAlpha=d?1:e.fillOpacity,a.fillStyle=e.fillColor||e.color,a.fill(e.fillRule||"evenodd"));e.stroke&&0!==e.weight&&(a.globalAlpha=d?1:e.opacity,b._prevWeight=a.lineWidth=d?b._prevWeight+1:e.weight,a.strokeStyle=e.color,a.lineCap=e.lineCap,a.lineJoin=
e.lineJoin,a.stroke())},_onClick:function(a){var b=this._map.mouseEventToLayerPoint(a),d=[],e;for(e in this._layers){var g=this._layers[e];g.options.interactive&&g._containsPoint(b)&&!this._map._draggableMoved(g)&&(c.DomEvent._fakeStop(a),d.push(g))}d.length&&this._fireEvent(d,a)},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var b=this._map.mouseEventToLayerPoint(a);this._handleMouseOut(a,b);this._handleMouseHover(a,b)}},_handleMouseOut:function(a,
b){var d=this._hoveredLayer;!d||"mouseout"!==a.type&&d._containsPoint(b)||(c.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(a,b){var d;for(d in this._drawnLayers){var e=this._drawnLayers[d];e.options.interactive&&e._containsPoint(b)&&(c.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([e],a,"mouseover"),this._hoveredLayer=e)}this._hoveredLayer&&this._fireEvent([this._hoveredLayer],
a)},_fireEvent:function(a,b,d){this._map._fireDOMEvent(b,d||b.type,a)},_bringToFront:c.Util.falseFn,_bringToBack:c.Util.falseFn});c.Browser.canvas=!!k.createElement("canvas").getContext;c.canvas=function(a){return c.Browser.canvas?new c.Canvas(a):null};c.Polyline.prototype._containsPoint=function(a,b){var d,e,g=this._clickTolerance();if(!this._pxBounds.contains(a))return!1;var n=0;for(e=this._parts.length;n<e;n++){var m=this._parts[n];var q=0;var t=m.length;for(d=t-1;q<t;d=q++)if((b||0!==q)&&c.LineUtil.pointToSegmentDistance(a,
m[d],m[q])<=g)return!0}return!1};c.Polygon.prototype._containsPoint=function(a){var b=!1,d,e;if(!this._pxBounds.contains(a))return!1;var g=0;for(e=this._parts.length;g<e;g++){var n=this._parts[g];var m=0;var q=n.length;for(d=q-1;m<q;d=m++){var t=n[m];d=n[d];t.y>a.y!==d.y>a.y&&a.x<(d.x-t.x)*(a.y-t.y)/(d.y-t.y)+t.x&&(b=!b)}}return b||c.Polyline.prototype._containsPoint.call(this,a,!0)};c.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()};
c.GeoJSON=c.FeatureGroup.extend({initialize:function(a,b){c.setOptions(this,b);this._layers={};a&&this.addData(a)},addData:function(a){var b=c.Util.isArray(a)?a:a.features,d;if(b){a=0;for(d=b.length;a<d;a++){var e=b[a];(e.geometries||e.geometry||e.features||e.coordinates)&&this.addData(e)}return this}b=this.options;if(b.filter&&!b.filter(a))return this;d=c.GeoJSON.geometryToLayer(a,b);if(!d)return this;d.feature=c.GeoJSON.asFeature(a);d.defaultOptions=d.options;this.resetStyle(d);if(b.onEachFeature)b.onEachFeature(a,
d);return this.addLayer(d)},resetStyle:function(a){a.options=c.Util.extend({},a.defaultOptions);this._setLayerStyle(a,this.options.style);return this},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"===typeof b&&(b=b(a.feature));a.setStyle&&a.setStyle(b)}});c.extend(c.GeoJSON,{geometryToLayer:function(a,b){var d="Feature"===a.type?a.geometry:a,e=d?d.coordinates:null,g=[],n=b&&b.pointToLayer,m=b&&b.coordsToLatLng||this.coordsToLatLng,
q;if(!e&&!d)return null;switch(d.type){case "Point":return b=m(e),n?n(a,b):new c.Marker(b);case "MultiPoint":var t=0;for(q=e.length;t<q;t++)b=m(e[t]),g.push(n?n(a,b):new c.Marker(b));return new c.FeatureGroup(g);case "LineString":case "MultiLineString":return a=this.coordsToLatLngs(e,"LineString"===d.type?0:1,m),new c.Polyline(a,b);case "Polygon":case "MultiPolygon":return a=this.coordsToLatLngs(e,"Polygon"===d.type?1:2,m),new c.Polygon(a,b);case "GeometryCollection":t=0;for(q=d.geometries.length;t<
q;t++)(e=this.geometryToLayer({geometry:d.geometries[t],type:"Feature",properties:a.properties},b))&&g.push(e);return new c.FeatureGroup(g);default:throw Error("Invalid GeoJSON object.");}},coordsToLatLng:function(a){return new c.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,d){for(var e=[],g=0,n=a.length,m;g<n;g++)m=b?this.coordsToLatLngs(a[g],b-1,d):(d||this.coordsToLatLng)(a[g]),e.push(m);return e},latLngToCoords:function(a){return a.alt!==f?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(a,
b,d){for(var e=[],g=0,n=a.length;g<n;g++)e.push(b?c.GeoJSON.latLngsToCoords(a[g],b-1,d):c.GeoJSON.latLngToCoords(a[g]));!b&&d&&e.push(e[0]);return e},getFeature:function(a,b){return a.feature?c.extend({},a.feature,{geometry:b}):c.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});h={toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"Point",coordinates:c.GeoJSON.latLngToCoords(this.getLatLng())})}};c.Marker.include(h);c.Circle.include(h);
c.CircleMarker.include(h);c.Polyline.prototype.toGeoJSON=function(){var a=!c.Polyline._flat(this._latlngs),b=c.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return c.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"LineString",coordinates:b})};c.Polygon.prototype.toGeoJSON=function(){var a=!c.Polyline._flat(this._latlngs),b=a&&!c.Polyline._flat(this._latlngs[0]),d=c.GeoJSON.latLngsToCoords(this._latlngs,b?2:a?1:0,!0);a||(d=[d]);return c.GeoJSON.getFeature(this,{type:(b?"Multi":"")+"Polygon",coordinates:d})};
c.LayerGroup.include({toMultiPoint:function(){var a=[];this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)});return c.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===a)return this.toMultiPoint();var b="GeometryCollection"===a,d=[];this.eachLayer(function(e){e.toGeoJSON&&(e=e.toGeoJSON(),d.push(b?e.geometry:c.GeoJSON.asFeature(e)))});return b?c.GeoJSON.getFeature(this,
{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});c.geoJSON=function(a,b){return new c.GeoJSON(a,b)};c.geoJson=c.geoJSON;c.DomEvent={on:function(a,b,d,e){if("object"===typeof b)for(var g in b)this._on(a,g,b[g],d);else{b=c.Util.splitWords(b);g=0;for(var n=b.length;g<n;g++)this._on(a,b[g],d,e)}return this},off:function(a,b,d,e){if("object"===typeof b)for(var g in b)this._off(a,g,b[g],d);else{b=c.Util.splitWords(b);g=0;for(var n=b.length;g<n;g++)this._off(a,b[g],d,e)}return this},
_on:function(a,b,d,e){var g=b+c.stamp(d)+(e?"_"+c.stamp(e):"");if(a._leaflet_events&&a._leaflet_events[g])return this;var n=function(q){return d.call(e||a,q||p.event)},m=n;c.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,n,g):c.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener?this.addDoubleTapListener(a,n,g):"addEventListener"in a?"mousewheel"===b?a.addEventListener("onwheel"in a?"wheel":"mousewheel",n,!1):"mouseenter"===b||"mouseleave"===b?(n=function(q){q=q||p.event;
c.DomEvent._isExternalTarget(a,q)&&m(q)},a.addEventListener("mouseenter"===b?"mouseover":"mouseout",n,!1)):("click"===b&&c.Browser.android&&(n=function(q){return c.DomEvent._filterClick(q,m)}),a.addEventListener(b,n,!1)):"attachEvent"in a&&a.attachEvent("on"+b,n);a._leaflet_events=a._leaflet_events||{};a._leaflet_events[g]=n;return this},_off:function(a,b,d,e){d=b+c.stamp(d)+(e?"_"+c.stamp(e):"");e=a._leaflet_events&&a._leaflet_events[d];if(!e)return this;c.Browser.pointer&&0===b.indexOf("touch")?
this.removePointerListener(a,b,d):c.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?a.removeEventListener("onwheel"in a?"wheel":"mousewheel",e,!1):a.removeEventListener("mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,e,!1):"detachEvent"in a&&a.detachEvent("on"+b,e);a._leaflet_events[d]=null;return this},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=
!0:a.cancelBubble=!0;c.DomEvent._skipped(a);return this},disableScrollPropagation:function(a){return c.DomEvent.on(a,"mousewheel",c.DomEvent.stopPropagation)},disableClickPropagation:function(a){var b=c.DomEvent.stopPropagation;c.DomEvent.on(a,c.Draggable.START.join(" "),b);return c.DomEvent.on(a,{click:c.DomEvent._fakeStop,dblclick:b})},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return this},stop:function(a){return c.DomEvent.preventDefault(a).stopPropagation(a)},
getMousePosition:function(a,b){if(!b)return new c.Point(a.clientX,a.clientY);var d=b.getBoundingClientRect();return new c.Point(a.clientX-d.left-b.clientLeft,a.clientY-d.top-b.clientTop)},_wheelPxFactor:c.Browser.win&&c.Browser.chrome?2:c.Browser.gecko?p.devicePixelRatio:1,getWheelDelta:function(a){return c.Browser.edge?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/c.DomEvent._wheelPxFactor:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?
(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&32765>Math.abs(a.detail)?20*-a.detail:a.detail?a.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(a){c.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];this._skipEvents[a.type]=!1;return b},_isExternalTarget:function(a,b){b=b.relatedTarget;if(!b)return!0;try{for(;b&&b!==a;)b=b.parentNode}catch(d){return!1}return b!==a},_filterClick:function(a,b){var d=a.timeStamp||a.originalEvent&&a.originalEvent.timeStamp,e=c.DomEvent._lastClick&&
d-c.DomEvent._lastClick;e&&100<e&&500>e||a.target._simulatedClick&&!a._simulated?c.DomEvent.stop(a):(c.DomEvent._lastClick=d,b(a))}};c.DomEvent.addListener=c.DomEvent.on;c.DomEvent.removeListener=c.DomEvent.off;c.Draggable=c.Evented.extend({options:{clickTolerance:3},statics:{START:c.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",
MSPointerDown:"touchmove"}},initialize:function(a,b,d){this._element=a;this._dragStartTarget=b||a;this._preventOutline=d},enable:function(){this._enabled||(c.DomEvent.on(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(c.DomEvent.off(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._moved=this._enabled=!1)},_onDown:function(a){if(!a._simulated&&this._enabled&&(this._moved=!1,!(c.DomUtil.hasClass(this._element,
"leaflet-zoom-anim")||c.Draggable._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches)&&this._enabled&&(c.Draggable._dragging=!0,this._preventOutline&&c.DomUtil.preventOutline(this._element),c.DomUtil.disableImageDrag(),c.DomUtil.disableTextSelection(),!this._moving))){this.fire("down");var b=a.touches?a.touches[0]:a;this._startPoint=new c.Point(b.clientX,b.clientY);c.DomEvent.on(k,c.Draggable.MOVE[a.type],this._onMove,this).on(k,c.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(!a._simulated&&
this._enabled)if(a.touches&&1<a.touches.length)this._moved=!0;else{var b=a.touches&&1===a.touches.length?a.touches[0]:a;b=(new c.Point(b.clientX,b.clientY)).subtract(this._startPoint);!b.x&&!b.y||Math.abs(b.x)+Math.abs(b.y)<this.options.clickTolerance||(c.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=c.DomUtil.getPosition(this._element).subtract(b),c.DomUtil.addClass(k.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,p.SVGElementInstance&&
this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),c.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(b),this._moving=!0,c.Util.cancelAnimFrame(this._animRequest),this._lastEvent=a,this._animRequest=c.Util.requestAnimFrame(this._updatePosition,this,!0))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a);c.DomUtil.setPosition(this._element,this._newPos);this.fire("drag",
a)},_onUp:function(a){if(!a._simulated&&this._enabled){c.DomUtil.removeClass(k.body,"leaflet-dragging");this._lastTarget&&(c.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var b in c.Draggable.MOVE)c.DomEvent.off(k,c.Draggable.MOVE[b],this._onMove,this).off(k,c.Draggable.END[b],this._onUp,this);c.DomUtil.enableImageDrag();c.DomUtil.enableTextSelection();this._moved&&this._moving&&(c.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)}));
this._moving=!1;c.Draggable._dragging=!1}}});c.Handler=c.Class.extend({initialize:function(a){this._map=a},enable:function(){if(this._enabled)return this;this._enabled=!0;this.addHooks();return this},disable:function(){if(!this._enabled)return this;this._enabled=!1;this.removeHooks();return this},enabled:function(){return!!this._enabled}});c.Map.mergeOptions({dragging:!0,inertia:!c.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});
c.Map.Drag=c.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new c.Draggable(a._mapPane,a._container);this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on("predrag",this._onPreDragLimit,this);a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}c.DomUtil.addClass(this._map._container,
"leaflet-grab leaflet-touch-drag");this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-grab");c.DomUtil.removeClass(this._map._container,"leaflet-touch-drag");this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var a=this._map;if(this._map.options.maxBounds&&
this._map.options.maxBoundsViscosity){var b=c.latLngBounds(this._map.options.maxBounds);this._offsetLimit=c.bounds(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart");a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var b=
this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d);this._times.push(b);50<b-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move",a).fire("drag",a)},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(a).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,b){return a-(a-b)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&
this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;a.x<b.min.x&&(a.x=this._viscousLimit(a.x,b.min.x));a.y<b.min.y&&(a.y=this._viscousLimit(a.y,b.min.y));a.x>b.max.x&&(a.x=this._viscousLimit(a.x,b.max.x));a.y>b.max.y&&(a.y=this._viscousLimit(a.y,b.max.y));this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,b=Math.round(a/2),d=this._initialWorldOffset,e=this._draggable._newPos.x,g=(e-b+d)%a+
b-d;a=(e+b+d)%a-b-d;d=Math.abs(g+d)<Math.abs(a+d)?g:a;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=d},_onDragEnd:function(a){var b=this._map,d=b.options,e=!d.inertia||2>this._times.length;b.fire("dragend",a);if(e)b.fire("moveend");else{a=this._lastPos.subtract(this._positions[0]);var g=d.easeLinearity;e=a.multiplyBy(g/((this._lastTime-this._times[0])/1E3));var n=e.distanceTo([0,0]);a=Math.min(d.inertiaMaxSpeed,n);e=e.multiplyBy(a/n);var m=a/(d.inertiaDeceleration*
g),q=e.multiplyBy(-m/2).round();q.x||q.y?(q=b._limitOffset(q,b.options.maxBounds),c.Util.requestAnimFrame(function(){b.panBy(q,{duration:m,easeLinearity:g,noMoveStart:!0,animate:!0})})):b.fire("moveend")}}});c.Map.addInitHook("addHandler","dragging",c.Map.Drag);c.Map.mergeOptions({doubleClickZoom:!0});c.Map.DoubleClickZoom=c.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=
this._map,d=b.getZoom(),e=b.options.zoomDelta;d=a.originalEvent.shiftKey?d-e:d+e;"center"===b.options.doubleClickZoom?b.setZoom(d):b.setZoomAround(a.containerPoint,d)}});c.Map.addInitHook("addHandler","doubleClickZoom",c.Map.DoubleClickZoom);c.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});c.Map.ScrollWheelZoom=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){c.DomEvent.off(this._map._container,
"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var b=c.DomEvent.getWheelDelta(a),d=this._map.options.wheelDebounceTime;this._delta+=b;this._lastMousePos=this._map.mouseEventToContainerPoint(a);this._startTime||(this._startTime=+new Date);b=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(c.bind(this._performZoom,this),b);c.DomEvent.stop(a)},_performZoom:function(){var a=this._map,b=a.getZoom(),d=this._map.options.zoomSnap||0;a._stop();
var e=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2;d=d?Math.ceil(e/d)*d:e;d=a._limitZoom(b+(0<this._delta?d:-d))-b;this._delta=0;this._startTime=null;d&&("center"===a.options.scrollWheelZoom?a.setZoom(b+d):a.setZoomAround(this._lastMousePos,b+d))}});c.Map.addInitHook("addHandler","scrollWheelZoom",c.Map.ScrollWheelZoom);c.extend(c.DomEvent,{_touchstart:c.Browser.msPointer?"MSPointerDown":c.Browser.pointer?"pointerdown":"touchstart",_touchend:c.Browser.msPointer?
"MSPointerUp":c.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,d){function e(y){if(!(1<(c.Browser.pointer?c.DomEvent._pointersCount:y.touches.length))){var H=Date.now(),F=H-(n||H);m=y.touches?y.touches[0]:y;q=0<F&&250>=F;n=H}}function g(){if(q&&!m.cancelBubble){if(c.Browser.pointer){var y={},H;for(H in m){var F=m[H];y[H]=F&&F.bind?F.bind(m):F}m=y}m.type="dblclick";b(m);n=null}}var n,m,q=!1,t=this._touchstart,w=this._touchend;a["_leaflet_"+t+d]=e;a["_leaflet_"+w+d]=g;a["_leaflet_dblclick"+
d]=b;a.addEventListener(t,e,!1);a.addEventListener(w,g,!1);c.Browser.edge||a.addEventListener("dblclick",b,!1);return this},removeDoubleTapListener:function(a,b){var d=a["_leaflet_"+this._touchend+b],e=a["_leaflet_dblclick"+b];a.removeEventListener(this._touchstart,a["_leaflet_"+this._touchstart+b],!1);a.removeEventListener(this._touchend,d,!1);c.Browser.edge||a.removeEventListener("dblclick",e,!1);return this}});c.extend(c.DomEvent,{POINTER_DOWN:c.Browser.msPointer?"MSPointerDown":"pointerdown",
POINTER_MOVE:c.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:c.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:c.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(a,b,d,e){"touchstart"===b?this._addPointerStart(a,d,e):"touchmove"===b?this._addPointerMove(a,d,e):"touchend"===b&&this._addPointerEnd(a,d,e);return this},removePointerListener:function(a,b,d){d=a["_leaflet_"+b+
d];"touchstart"===b?a.removeEventListener(this.POINTER_DOWN,d,!1):"touchmove"===b?a.removeEventListener(this.POINTER_MOVE,d,!1):"touchend"===b&&(a.removeEventListener(this.POINTER_UP,d,!1),a.removeEventListener(this.POINTER_CANCEL,d,!1));return this},_addPointerStart:function(a,b,d){var e=c.bind(function(g){if("mouse"!==g.pointerType&&g.pointerType!==g.MSPOINTER_TYPE_MOUSE)if(0>this.TAG_WHITE_LIST.indexOf(g.target.tagName))c.DomEvent.preventDefault(g);else return;this._handlePointer(g,b)},this);a["_leaflet_touchstart"+
d]=e;a.addEventListener(this.POINTER_DOWN,e,!1);this._pointerDocListener||(a=c.bind(this._globalPointerUp,this),k.documentElement.addEventListener(this.POINTER_DOWN,c.bind(this._globalPointerDown,this),!0),k.documentElement.addEventListener(this.POINTER_MOVE,c.bind(this._globalPointerMove,this),!0),k.documentElement.addEventListener(this.POINTER_UP,a,!0),k.documentElement.addEventListener(this.POINTER_CANCEL,a,!0),this._pointerDocListener=!0)},_globalPointerDown:function(a){this._pointers[a.pointerId]=
a;this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId];this._pointersCount--},_handlePointer:function(a,b){a.touches=[];for(var d in this._pointers)a.touches.push(this._pointers[d]);a.changedTouches=[a];b(a)},_addPointerMove:function(a,b,d){var e=c.bind(function(g){(g.pointerType!==g.MSPOINTER_TYPE_MOUSE&&"mouse"!==g.pointerType||0!==g.buttons)&&this._handlePointer(g,b)},
this);a["_leaflet_touchmove"+d]=e;a.addEventListener(this.POINTER_MOVE,e,!1)},_addPointerEnd:function(a,b,d){var e=c.bind(function(g){this._handlePointer(g,b)},this);a["_leaflet_touchend"+d]=e;a.addEventListener(this.POINTER_UP,e,!1);a.addEventListener(this.POINTER_CANCEL,e,!1)}});c.Map.mergeOptions({touchZoom:c.Browser.touch&&!c.Browser.android23,bounceAtZoomLimits:!0});c.Map.TouchZoom=c.Handler.extend({addHooks:function(){c.DomUtil.addClass(this._map._container,"leaflet-touch-zoom");c.DomEvent.on(this._map._container,
"touchstart",this._onTouchStart,this)},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom");c.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var d=b.mouseEventToContainerPoint(a.touches[0]),e=b.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=b.getSize()._divideBy(2);this._startLatLng=b.containerPointToLatLng(this._centerPoint);
"center"!==b.options.touchZoom&&(this._pinchStartLatLng=b.containerPointToLatLng(d.add(e)._divideBy(2)));this._startDist=d.distanceTo(e);this._startZoom=b.getZoom();this._moved=!1;this._zooming=!0;b._stop();c.DomEvent.on(k,"touchmove",this._onTouchMove,this).on(k,"touchend",this._onTouchEnd,this);c.DomEvent.preventDefault(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var b=this._map,d=b.mouseEventToContainerPoint(a.touches[0]),e=b.mouseEventToContainerPoint(a.touches[1]),
g=d.distanceTo(e)/this._startDist;this._zoom=b.getScaleZoom(g,this._startZoom);!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&1>g||this._zoom>b.getMaxZoom()&&1<g)&&(this._zoom=b._limitZoom(this._zoom));if("center"===b.options.touchZoom){if(this._center=this._startLatLng,1===g)return}else{d=d._add(e)._divideBy(2)._subtract(this._centerPoint);if(1===g&&0===d.x&&0===d.y)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(b._moveStart(!0),
this._moved=!0);c.Util.cancelAnimFrame(this._animRequest);b=c.bind(b._move,b,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=c.Util.requestAnimFrame(b,this,!0);c.DomEvent.preventDefault(a)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,c.Util.cancelAnimFrame(this._animRequest),c.DomEvent.off(k,"touchmove",this._onTouchMove).off(k,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,
this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});c.Map.addInitHook("addHandler","touchZoom",c.Map.TouchZoom);c.Map.mergeOptions({tap:!0,tapTolerance:15});c.Map.Tap=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){c.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches)if(c.DomEvent.preventDefault(a),this._fireClick=
!0,1<a.touches.length)this._fireClick=!1,clearTimeout(this._holdTimeout);else{var b=a.touches[0];a=b.target;this._startPos=this._newPos=new c.Point(b.clientX,b.clientY);a.tagName&&"a"===a.tagName.toLowerCase()&&c.DomUtil.addClass(a,"leaflet-active");this._holdTimeout=setTimeout(c.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},this),1E3);this._simulateEvent("mousedown",b);c.DomEvent.on(k,{touchmove:this._onMove,touchend:this._onUp},this)}},
_onUp:function(a){clearTimeout(this._holdTimeout);c.DomEvent.off(k,{touchmove:this._onMove,touchend:this._onUp},this);if(this._fireClick&&a&&a.changedTouches){a=a.changedTouches[0];var b=a.target;b&&b.tagName&&"a"===b.tagName.toLowerCase()&&c.DomUtil.removeClass(b,"leaflet-active");this._simulateEvent("mouseup",a);this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){a=a.touches[0];
this._newPos=new c.Point(a.clientX,a.clientY);this._simulateEvent("mousemove",a)},_simulateEvent:function(a,b){var d=k.createEvent("MouseEvents");d._simulated=!0;b.target._simulatedClick=!0;d.initMouseEvent(a,!0,!0,p,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(d)}});c.Browser.touch&&!c.Browser.pointer&&c.Map.addInitHook("addHandler","tap",c.Map.Tap);c.Map.mergeOptions({boxZoom:!0});c.Map.BoxZoom=c.Handler.extend({initialize:function(a){this._map=a;this._container=
a._container;this._pane=a._panes.overlayPane},addHooks:function(){c.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){c.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(a){if(!a.shiftKey||1!==a.which&&1!==a.button)return!1;this._resetState();c.DomUtil.disableTextSelection();c.DomUtil.disableImageDrag();this._startPoint=this._map.mouseEventToContainerPoint(a);
c.DomEvent.on(k,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=c.DomUtil.create("div","leaflet-zoom-box",this._container),c.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart"));this._point=this._map.mouseEventToContainerPoint(a);a=new c.Bounds(this._point,this._startPoint);var b=a.getSize();c.DomUtil.setPosition(this._box,a.min);this._box.style.width=
b.x+"px";this._box.style.height=b.y+"px"},_finish:function(){this._moved&&(c.DomUtil.remove(this._box),c.DomUtil.removeClass(this._container,"leaflet-crosshair"));c.DomUtil.enableTextSelection();c.DomUtil.enableImageDrag();c.DomEvent.off(k,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(1===a.which||1===a.button)this._finish(),this._moved&&(setTimeout(c.bind(this._resetState,this),0),a=new c.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),
this._map.containerPointToLatLng(this._point)),this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a}))},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});c.Map.addInitHook("addHandler","boxZoom",c.Map.BoxZoom);c.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80});c.Map.Keyboard=c.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a;this._setPanDelta(a.options.keyboardPanDelta);this._setZoomDelta(a.options.zoomDelta)},
addHooks:function(){var a=this._map._container;0>=a.tabIndex&&(a.tabIndex="0");c.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();c.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=
k.body,b=k.documentElement,d=a.scrollTop||b.scrollTop;a=a.scrollLeft||b.scrollLeft;this._map._container.focus();p.scrollTo(a,d)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanDelta:function(a){var b=this._panKeys={},d=this.keyCodes,e;var g=0;for(e=d.left.length;g<e;g++)b[d.left[g]]=[-1*a,0];g=0;for(e=d.right.length;g<e;g++)b[d.right[g]]=[a,0];g=0;for(e=d.down.length;g<e;g++)b[d.down[g]]=[0,a];g=0;for(e=d.up.length;g<
e;g++)b[d.up[g]]=[0,-1*a]},_setZoomDelta:function(a){var b=this._zoomKeys={},d=this.keyCodes,e;var g=0;for(e=d.zoomIn.length;g<e;g++)b[d.zoomIn[g]]=a;g=0;for(e=d.zoomOut.length;g<e;g++)b[d.zoomOut[g]]=-a},_addHooks:function(){c.DomEvent.on(k,"keydown",this._onKeyDown,this)},_removeHooks:function(){c.DomEvent.off(k,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b=a.keyCode,d=this._map;if(b in this._panKeys){if(d._panAnim&&d._panAnim._inProgress)return;
b=this._panKeys[b];a.shiftKey&&(b=c.point(b).multiplyBy(3));d.panBy(b);d.options.maxBounds&&d.panInsideBounds(d.options.maxBounds)}else if(b in this._zoomKeys)d.setZoom(d.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[b]);else if(27===b)d.closePopup();else return;c.DomEvent.stop(a)}}});c.Map.addInitHook("addHandler","keyboard",c.Map.Keyboard);c.Handler.MarkerDrag=c.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new c.Draggable(a,
a,!0));this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable();c.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable();this._marker._icon&&c.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();
this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(a){var b=this._marker,d=b._shadow,e=c.DomUtil.getPosition(b._icon),g=b._map.layerPointToLatLng(e);d&&c.DomUtil.setPosition(d,e);b._latlng=g;a.latlng=g;a.oldLatLng=this._oldLatLng;b.fire("move",a).fire("drag",a)},_onDragEnd:function(a){delete this._oldLatLng;this._marker.fire("moveend").fire("dragend",a)}});c.Control=c.Class.extend({options:{position:"topright"},initialize:function(a){c.setOptions(this,a)},getPosition:function(){return this.options.position},
setPosition:function(a){var b=this._map;b&&b.removeControl(this);this.options.position=a;b&&b.addControl(this);return this},getContainer:function(){return this._container},addTo:function(a){this.remove();this._map=a;var b=this._container=this.onAdd(a),d=this.getPosition();a=a._controlCorners[d];c.DomUtil.addClass(b,"leaflet-control");-1!==d.indexOf("bottom")?a.insertBefore(b,a.firstChild):a.appendChild(b);return this},remove:function(){if(!this._map)return this;c.DomUtil.remove(this._container);if(this.onRemove)this.onRemove(this._map);
this._map=null;return this},_refocusOnMap:function(a){this._map&&a&&0<a.screenX&&0<a.screenY&&this._map.getContainer().focus()}});c.control=function(a){return new c.Control(a)};c.Map.include({addControl:function(a){a.addTo(this);return this},removeControl:function(a){a.remove();return this},_initControlPos:function(){function a(e,g){b[e+g]=c.DomUtil.create("div","leaflet-"+e+" leaflet-"+g,d)}var b=this._controlCorners={},d=this._controlContainer=c.DomUtil.create("div","leaflet-control-container",
this._container);a("top","left");a("top","right");a("bottom","left");a("bottom","right")},_clearControlPos:function(){c.DomUtil.remove(this._controlContainer)}});c.Control.Zoom=c.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b=c.DomUtil.create("div","leaflet-control-zoom leaflet-bar"),d=this.options;this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,"leaflet-control-zoom-in",b,this._zoomIn);
this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,"leaflet-control-zoom-out",b,this._zoomOut);this._updateDisabled();a.on("zoomend zoomlevelschange",this._updateDisabled,this);return b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){this._disabled=!0;this._updateDisabled();return this},enable:function(){this._disabled=!1;this._updateDisabled();return this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&
this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,b,d,e,g){d=c.DomUtil.create("a",d,e);d.innerHTML=a;d.href="#";d.title=b;c.DomEvent.on(d,"mousedown dblclick",c.DomEvent.stopPropagation).on(d,"click",c.DomEvent.stop).on(d,"click",g,this).on(d,"click",this._refocusOnMap,this);return d},_updateDisabled:function(){var a=
this._map;c.DomUtil.removeClass(this._zoomInButton,"leaflet-disabled");c.DomUtil.removeClass(this._zoomOutButton,"leaflet-disabled");(this._disabled||a._zoom===a.getMinZoom())&&c.DomUtil.addClass(this._zoomOutButton,"leaflet-disabled");(this._disabled||a._zoom===a.getMaxZoom())&&c.DomUtil.addClass(this._zoomInButton,"leaflet-disabled")}});c.Map.mergeOptions({zoomControl:!0});c.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new c.Control.Zoom,this.addControl(this.zoomControl))});
c.control.zoom=function(a){return new c.Control.Zoom(a)};c.Control.Attribution=c.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){c.setOptions(this,a);this._attributions={}},onAdd:function(a){a.attributionControl=this;this._container=c.DomUtil.create("div","leaflet-control-attribution");c.DomEvent&&c.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&
this.addAttribution(a._layers[b].getAttribution());this._update();return this._container},setPrefix:function(a){this.options.prefix=a;this._update();return this},addAttribution:function(a){if(!a)return this;this._attributions[a]||(this._attributions[a]=0);this._attributions[a]++;this._update();return this},removeAttribution:function(a){if(!a)return this;this._attributions[a]&&(this._attributions[a]--,this._update());return this},_update:function(){if(this._map){var a=[];for(b in this._attributions)this._attributions[b]&&
a.push(b);var b=[];this.options.prefix&&b.push(this.options.prefix);a.length&&b.push(a.join(", "));this._container.innerHTML=b.join(" | ")}}});c.Map.mergeOptions({attributionControl:!0});c.Map.addInitHook(function(){this.options.attributionControl&&(new c.Control.Attribution).addTo(this)});c.control.attribution=function(a){return new c.Control.Attribution(a)};c.Control.Scale=c.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var b=c.DomUtil.create("div",
"leaflet-control-scale"),d=this.options;this._addScales(d,"leaflet-control-scale-line",b);a.on(d.updateWhenIdle?"moveend":"move",this._update,this);a.whenReady(this._update,this);return b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,d){a.metric&&(this._mScale=c.DomUtil.create("div",b,d));a.imperial&&(this._iScale=c.DomUtil.create("div",b,d))},_update:function(){var a=this._map,b=a.getSize().y/2;a=a.distance(a.containerPointToLatLng([0,
b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(a)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a);this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var b=this._getRoundNum(a);this._updateScale(this._mScale,1E3>b?b+" m":b/1E3+" km",b/a)},_updateImperial:function(a){a*=3.2808399;if(5280<a){a/=5280;var b=this._getRoundNum(a);this._updateScale(this._iScale,b+" mi",b/a)}else b=this._getRoundNum(a),this._updateScale(this._iScale,
b+" ft",b/a)},_updateScale:function(a,b,d){a.style.width=Math.round(this.options.maxWidth*d)+"px";a.innerHTML=b},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1);a/=b;return b*(10<=a?10:5<=a?5:3<=a?3:2<=a?2:1)}});c.control.scale=function(a){return new c.Control.Scale(a)};c.Control.Layers=c.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(a,b,d){c.setOptions(this,d);this._layers=[];this._lastZIndex=0;this._handlingClick=
!1;for(var e in a)this._addLayer(a[e],e);for(e in b)this._addLayer(b[e],e,!0)},onAdd:function(a){this._initLayout();this._update();this._map=a;a.on("zoomend",this._checkDisabledLayers,this);return this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,b){this._addLayer(a,b);return this._map?this._update():this},addOverlay:function(a,
b){this._addLayer(a,b,!0);return this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);(a=this._getLayer(c.stamp(a)))&&this._layers.splice(this._layers.indexOf(a),1);return this._map?this._update():this},expand:function(){c.DomUtil.addClass(this._container,"leaflet-control-layers-expanded");this._form.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);a<this._form.clientHeight?(c.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),
this._form.style.height=a+"px"):c.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar");this._checkDisabledLayers();return this},collapse:function(){c.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded");return this},_initLayout:function(){var a=this._container=c.DomUtil.create("div","leaflet-control-layers");a.setAttribute("aria-haspopup",!0);c.DomEvent.disableClickPropagation(a);c.Browser.touch||c.DomEvent.disableScrollPropagation(a);var b=this._form=c.DomUtil.create("form",
"leaflet-control-layers-list");if(this.options.collapsed){if(!c.Browser.android)c.DomEvent.on(a,{mouseenter:this.expand,mouseleave:this.collapse},this);var d=this._layersLink=c.DomUtil.create("a","leaflet-control-layers-toggle",a);d.href="#";d.title="Layers";if(c.Browser.touch)c.DomEvent.on(d,"click",c.DomEvent.stop).on(d,"click",this.expand,this);else c.DomEvent.on(d,"focus",this.expand,this);c.DomEvent.on(b,"click",function(){setTimeout(c.bind(this._onInputClick,this),0)},this);this._map.on("click",
this.collapse,this)}else this.expand();this._baseLayersList=c.DomUtil.create("div","leaflet-control-layers-base",b);this._separator=c.DomUtil.create("div","leaflet-control-layers-separator",b);this._overlaysList=c.DomUtil.create("div","leaflet-control-layers-overlays",b);a.appendChild(b)},_getLayer:function(a){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&c.stamp(this._layers[b].layer)===a)return this._layers[b]},_addLayer:function(a,b,d){a.on("add remove",this._onLayerChange,this);this._layers.push({layer:a,
name:b,overlay:d});this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;c.DomUtil.empty(this._baseLayersList);c.DomUtil.empty(this._overlaysList);var a,b=0;for(a=0;a<this._layers.length;a++){var d=this._layers[a];this._addItem(d);var e=e||d.overlay;var g=g||!d.overlay;b+=d.overlay?0:1}this.options.hideSingleBase&&(g=g&&1<b,this._baseLayersList.style.display=g?"":"none");this._separator.style.display=e&&g?"":"none";
return this},_onLayerChange:function(a){this._handlingClick||this._update();var b=this._getLayer(c.stamp(a.target));(a=b.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null)&&this._map.fire(a,b)},_createRadioElement:function(a,b){a='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(b?' checked="checked"':"")+"/>";b=k.createElement("div");b.innerHTML=a;return b.firstChild},_addItem:function(a){var b=k.createElement("label"),d=this._map.hasLayer(a.layer);
if(a.overlay){var e=k.createElement("input");e.type="checkbox";e.className="leaflet-control-layers-selector";e.defaultChecked=d}else e=this._createRadioElement("leaflet-base-layers",d);e.layerId=c.stamp(a.layer);c.DomEvent.on(e,"click",this._onInputClick,this);d=k.createElement("span");d.innerHTML=" "+a.name;var g=k.createElement("div");b.appendChild(g);g.appendChild(e);g.appendChild(d);(a.overlay?this._overlaysList:this._baseLayersList).appendChild(b);this._checkDisabledLayers();return b},_onInputClick:function(){var a=
this._form.getElementsByTagName("input"),b=[],d=[];this._handlingClick=!0;for(var e=a.length-1;0<=e;e--){var g=a[e];var n=this._getLayer(g.layerId).layer;var m=this._map.hasLayer(n);g.checked&&!m?b.push(n):!g.checked&&m&&d.push(n)}for(e=0;e<d.length;e++)this._map.removeLayer(d[e]);for(e=0;e<b.length;e++)this._map.addLayer(b[e]);this._handlingClick=!1;this._refocusOnMap()},_checkDisabledLayers:function(){for(var a=this._form.getElementsByTagName("input"),b,d,e=this._map.getZoom(),g=a.length-1;0<=g;g--)b=
a[g],d=this._getLayer(b.layerId).layer,b.disabled=d.options.minZoom!==f&&e<d.options.minZoom||d.options.maxZoom!==f&&e>d.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}});c.control.layers=function(a,b,d){return new c.Control.Layers(a,b,d)};c.PosAnimation=c.Evented.extend({run:function(a,b,d,e){this.stop();this._el=a;this._inProgress=!0;this._duration=d||.25;this._easeOutPower=1/Math.max(e||.5,.2);this._startPos=c.DomUtil.getPosition(a);this._offset=
b.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=c.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(a){var b=+new Date-this._startTime,d=1E3*this._duration;b<d?this._runFrame(this._easeOut(b/d),a):(this._runFrame(1),this._complete())},_runFrame:function(a,b){a=this._startPos.add(this._offset.multiplyBy(a));b&&a._round();c.DomUtil.setPosition(this._el,
a);this.fire("step")},_complete:function(){c.Util.cancelAnimFrame(this._animId);this._inProgress=!1;this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}});c.Map.include({setView:function(a,b,d){b=b===f?this._zoom:this._limitZoom(b);a=this._limitCenter(c.latLng(a),b,this.options.maxBounds);d=d||{};this._stop();if(this._loaded&&!d.reset&&!0!==d&&(d.animate!==f&&(d.zoom=c.extend({animate:d.animate},d.zoom),d.pan=c.extend({animate:d.animate,duration:d.duration},d.pan)),this._zoom!==
b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,d.zoom):this._tryAnimatedPan(a,d.pan)))return clearTimeout(this._sizeTimer),this;this._resetView(a,b);return this},panBy:function(a,b){a=c.point(a).round();b=b||{};if(!a.x&&!a.y)return this.fire("moveend");if(!0!==b.animate&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;this._panAnim||(this._panAnim=new c.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},
this));b.noMoveStart||this.fire("movestart");!1!==b.animate?(c.DomUtil.addClass(this._mapPane,"leaflet-pan-anim"),a=this._getMapPanePos().subtract(a).round(),this._panAnim.run(this._mapPane,a,b.duration||.25,b.easeLinearity)):(this._rawPanBy(a),this.fire("move").fire("moveend"));return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){c.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(a,b){a=this._getCenterOffset(a)._floor();
if(!0!==(b&&b.animate)&&!this.getSize().contains(a))return!1;this.panBy(a,b);return!0}});c.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});(h=c.DomUtil.TRANSITION&&c.Browser.any3d&&!c.Browser.mobileOpera)&&c.Map.addInitHook(function(){if(this._zoomAnimated=this.options.zoomAnimation)this._createAnimProxy(),c.DomEvent.on(this._proxy,c.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)});c.Map.include(h?{_createAnimProxy:function(){var a=this._proxy=c.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");
this._panes.mapPane.appendChild(a);this.on("zoomanim",function(b){var d=c.DomUtil.TRANSFORM,e=a.style[d];c.DomUtil.setTransform(a,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1));e===a.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this);this.on("load moveend",function(){var b=this.getCenter(),d=this.getZoom();c.DomUtil.setTransform(a,this.project(b,d),this.getZoomScale(d,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&0<=a.propertyName.indexOf("transform")&&
this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,d){if(this._animatingZoom)return!0;d=d||{};if(!this._zoomAnimated||!1===d.animate||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var e=this.getZoomScale(b);e=this._getCenterOffset(a)._divideBy(1-1/e);if(!0!==d.animate&&!this.getSize().contains(e))return!1;c.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(a,
b,!0)},this);return!0},_animateZoom:function(a,b,d,e){d&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=b,c.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"));this.fire("zoomanim",{center:a,zoom:b,noUpdate:e});setTimeout(c.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(c.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),c.Util.requestAnimFrame(function(){this._moveEnd(!0)},
this))}}:{});c.Map.include({flyTo:function(a,b,d){function e(A){A=(C*C-F*F+2.0164*(A?-1:1)*2.0164*I*I)/(4.0328*(A?C:F)*I);A=Math.sqrt(A*A+1)-A;return 1E-9>A?-18:Math.log(A)}function g(A){return(Math.exp(A)+Math.exp(-A))/2}function n(A){return F*(g(x)/g(x+1.42*A))}function m(A){var J=g(x);A=x+1.42*A;A=(Math.exp(A)-Math.exp(-A))/2/g(A);return F*(J*A-(Math.exp(x)-Math.exp(-x))/2)/2.0164}function q(){var A=(Date.now()-D)/B,J=(1-Math.pow(1-A,1.5))*z;1>=A?(this._flyToFrame=c.Util.requestAnimFrame(q,this),
this._move(this.unproject(t.add(w.subtract(t).multiplyBy(m(J)/I)),H),this.getScaleZoom(F/n(J),H),{flyTo:!0})):this._move(a,b)._moveEnd(!0)}d=d||{};if(!1===d.animate||!c.Browser.any3d)return this.setView(a,b,d);this._stop();var t=this.project(this.getCenter()),w=this.project(a),y=this.getSize(),H=this._zoom;a=c.latLng(a);b=b===f?H:b;var F=Math.max(y.x,y.y),C=F*this.getZoomScale(H,b),I=w.distanceTo(t)||1,x=e(0),D=Date.now(),z=(e(1)-x)/1.42,B=d.duration?1E3*d.duration:800*z;this._moveStart(!0);q.call(this);
return this},flyToBounds:function(a,b){a=this._getBoundsCenterZoom(a,b);return this.flyTo(a.center,a.zoom,b)}});c.Map.include({_defaultLocateOptions:{timeout:1E4,watch:!1},locate:function(a){a=this._locateOptions=c.extend({},this._defaultLocateOptions,a);if(!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=c.bind(this._handleGeolocationResponse,this),d=c.bind(this._handleGeolocationError,this);a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,
d,a):navigator.geolocation.getCurrentPosition(b,d,a);return this},stopLocate:function(){navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId);this._locateOptions&&(this._locateOptions.setView=!1);return this},_handleGeolocationError:function(a){var b=a.code;a=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:b,message:"Geolocation error: "+
a+"."})},_handleGeolocationResponse:function(a){var b=new c.LatLng(a.coords.latitude,a.coords.longitude),d=b.toBounds(a.coords.accuracy),e=this._locateOptions;if(e.setView){var g=this.getBoundsZoom(d);this.setView(b,e.maxZoom?Math.min(g,e.maxZoom):g)}b={latlng:b,bounds:d,timestamp:a.timestamp};for(var n in a.coords)"number"===typeof a.coords[n]&&(b[n]=a.coords[n]);this.fire("locationfound",b)}})})(window,document)},{}],2:[function(r,u,v){function p(k){var f=!1,l=null,c=!1,h="",a=0,b=0,d=0,e=!1,g=
!0;this.isEnabled=function(){return c};this.setEnabled=function(n){c=n?!0:!1};this.getLocation=function(){return l};this.setLocation=function(n){l=L.latLng(n);e=!0};this.getIndoorMapId=function(){return h};this.getIndoorMapFloorId=function(){return a};this.setIndoorMap=function(n,m){h=n;a=m};this.isOrientationVisible=function(){return g};this.getHeadingDegrees=function(){return b};this.setHeadingDegrees=function(n){b=n;e=!0};this.getElevation=function(){return d};this.setElevation=function(n){d=n;
e=!0};this.showOrientation=function(n){g=n;e=!0};this.onInitialized=function(){f=!0;k.blueSphereApi.updateNativeState(this)};this.onUpdate=function(){f&&e&&(k.blueSphereApi.updateNativeState(this),e=!1)}}r=r("./map_module");p.prototype=r;u.exports=p},{"./map_module":43}],3:[function(r,u,v){function p(f){var l={},c={},h=[],a=!1,b=null,d=function(){h.forEach(function(m){e(m)});h=[]},e=function(m){var q=f.buildingsApi.createBuildingHighlight(m);l[q]=m;m._setNativeHandle(q);q in c&&(delete c[q],n(q));
return q};this.addBuildingHighlight=function(m){a?e(m):h.push(m)};this.removeBuildingHighlight=function(m){if(a){var q=m.getId();void 0!==q&&(f.buildingsApi.destroyBuildingHighlight(q),delete l[q],m._setNativeHandle(null))}else m=h.indexOf(m),-1<m&&h.splice(m,1)};this.notifyBuildingHighlightChanged=function(m){if(a){var q=m.getId();void 0!==q&&f.buildingsApi.setHighlightColor(q,m.getColor())}};this.findIntersectionWithBuilding=function(m){if(a)return f.buildingsApi.findIntersectionWithBuilding(m)};
this.screenPointToRay=function(m){if(a)return f.spacesApi.screenPointToRay(m)};this.latLongToVerticallyDownRay=function(m){if(a)return f.spacesApi.latLongToVerticallyDownRay(m)};this.findBuildingAtScreenPoint=function(m){if(a)return m=f.spacesApi.screenPointToRay(m),this.findIntersectionWithBuilding(m)};this.findBuildingAtLatLng=function(m){if(a)return m=f.spacesApi.latLongToVerticallyDownRay(m),this.findIntersectionWithBuilding(m)};this.onInitialized=function(){a=!0;f.buildingsApi.registerBuildingInformationReceivedCallback(g);
d()};this.isReady=function(){return a};this.setBuildingInformationReceivedCallback=function(m){b=m};var g=function(m){m in l?n(m):c[m]=!0},n=function(m){var q=l[m];m=f.buildingsApi.tryGetBuildingInformation(m);null!==m&&q._setBuildingInformation(m);null!==b&&b(q)}}function k(f){var l=new p(f),c=this,h=function(a){c.fire("buildinginformationreceived",{buildingHighlight:a})};this.screenPointToRay=function(a){return l.screenPointToRay(a)};this.latLongToVerticallyDownRay=function(a){return l.latLongToVerticallyDownRay(a)};
this.tryGetBuildingInformation=function(a){return l.tryGetBuildingInformation(a)};this.createBuildingHighlight=function(a){return l.createBuildingHighlight(a)};this.findIntersectionWithBuilding=function(a){return l.findIntersectionWithBuilding(a)};this.findBuildingAtScreenPoint=function(a){return l.findBuildingAtScreenPoint(a)};this.findBuildingAtLatLng=function(a){return l.findBuildingAtLatLng(a)};this.onInitialized=function(){l.setBuildingInformationReceivedCallback(h);l.onInitialized()};this._getImpl=
function(){return l}}r=r("./map_module");r=L.extend({},r,L.Mixin.Events);k.prototype=r;u.exports=k},{"./map_module":43}],4:[function(r,u,v){r=r("./map_module");v=function(p,k,f,l){var c=!1,h=null,a=null,b=k,d=l,e=function(n){c?p.cameraApi.setView(n):h=null===h?{}:Object.assign(h,n)},g=function(){return b=c?p.cameraApi.getInterestLatLong():h.location||b};this.setView=function(n){e(n)};this.setViewToBounds=function(n){c?p.cameraApi.setViewToBounds(n):a=n};this.onInitialized=function(){c=!0;p.cameraApi.setVerticallyLocked(d);
if(c&&(null!==h&&(e(h),h=null),null!==a)){var n=a;c?p.cameraApi.setViewToBounds(n):a=n;a=null}};this.getCurrentZoomLevel=function(){var n=c?p.cameraApi.getZoomLevel():parseFloat(h.zoom)||0;return n};this.getCenter=function(){return L.latLng(g())};this.getDistanceToInterest=function(){var n=c?p.cameraApi.getDistanceToInterest():0;return n};this.getPitchDegrees=function(){var n=c?p.cameraApi.getPitchDegrees():0;return n};this.getTiltDegrees=function(){var n=c?90-p.cameraApi.getPitchDegrees():0;return n};
this.setTiltDegrees=function(n){e({tiltDegrees:n,animate:!0})};this.getHeadingDegrees=function(){var n=c?p.cameraApi.getHeadingDegrees():parseFloat(h.headingDegrees)||0;return n};this.setHeadingDegrees=function(n){return e({headingDegrees:n,animate:!0})};this.setVerticallyLocked=function(n){d=n;c&&p.cameraApi.setVerticallyLocked(d)}};v.prototype=r;u.exports=v},{"./map_module":43}],5:[function(r,u,v){u.exports={setPositionSmooth:function(p,k,f){L.DomUtil.setPosition(p,k,f);!f&&L.Browser.any3d&&(p.style[L.DomUtil.TRANSFORM]+=
" rotate(0.0001deg)")}}},{}],6:[function(r,u,v){var p=r("./html_map_container"),k=r("./themes_module"),f=r("./indoors_module"),l=r("./precache_module"),c=r("./camera_module"),h=r("./polygon_module"),a=r("./polyline_module"),b=r("./routing_module"),d=r("./rendering_module"),e=r("./buildings_module"),g=r("./prop_module"),n=r("./indoor_map_entity_information_module"),m=r("./indoor_map_floor_outline_information_module"),q=r("./blue_sphere_module"),t=r("./map_runtime_module"),w=r("./layer_point_mapping_module"),
y=r("./version_module"),H=r("./heatmap_module"),F=r("./frame_rate_module"),C=r("./indoor_entrance_marker_updater"),I=r("../public/eegeo_leaflet_map"),x=r("./events/map_move_events"),D=function(z,B){var A=z.lastIndexOf(".");return z.slice(A)===B?z.slice(0,A):z};u.exports=function(z,B,A,J,O,P,T,M){var X={canvasId:"canvas",width:void 0,height:void 0,indoorsEnabled:!1,displayEntranceMarkers:!0,coverageTreeManifest:"",environmentThemesManifest:"",headingDegrees:0,center:L.latLng([37.7858,-122.401]),zoom:16,
doubleClickZoom:!0,zoomControl:!1,zoomAnimation:!1,minZoom:0,maxZoom:20,zoomSnap:0,viewVerticallyLocked:!1,showIndoorWrldWatermark:!0,trafficEnabled:!0,trafficDisableWhenEnteringIndoorMaps:!0,indoorLabelsAlwaysHidden:!1,targetVSyncInterval:1,frameRateThrottleWhenIdleEnabled:!1,throttledTargetFrameIntervalMilliseconds:1E3,idleSecondsBeforeFrameRateThrottle:30,drawClearColor:"#000000ff",indoorMapBackgroundColor:"#000000c0"};M=L.extend(X,M);X=new k(B);var V=new l(B),Y=new c(B,M.center,M.zoom,M.viewVerticallyLocked),
R=new f(B,this,z,M.indoorId,M.floorIndex,M.center,M.headingDegrees,M.zoom,M.showIndoorWrldWatermark,M.indoorMapBackgroundColor),ea=new h(B),da=new a(B),ca=new w(B),E=new b(J,R),N=new d(B,M.drawClearColor),Q=new e(B),W=new g(B),fa=new n(B),aa=new m(B),Z=new q(B),K=new t(B),U=new y(B),S=new H(B),ha=new F(B,M.targetVSyncInterval,M.throttledTargetFrameIntervalMilliseconds,M.idleSecondsBeforeFrameRateThrottle,M.frameRateThrottleWhenIdleEnabled),ia=z?M.canvasId+z:M.canvasId,ka=M.width||A.clientWidth,la=
M.height||A.clientHeight,na="wrld-map-container"+z,ma=new p(P,O,A,ia,ka,la,M.drawClearColor,na,z);A=ma.canvas;T.canvas=A;P=L.latLng(M.center);var ra=M.zoom,sa=M.headingDegrees,ta=M.indoorsEnabled?"1":"0",ua=D(M.coverageTreeManifest,".gz"),va=D(M.environmentThemesManifest,".gz");T.arguments=[ia,z.toString(),ka.toString(),la.toString(),J,P.lat.toString(),P.lng.toString(),ra.toString(),sa.toString(),ta,ua,va,M.doubleClickZoom?"1":"0",na,M.trafficEnabled?"1":"0",M.trafficDisableWhenEnteringIndoorMaps?
"1":"0",M.indoorLabelsAlwaysHidden?"1":"0"];this.leafletMap=new I(O,ma.overlay,M,Y,V,X,R,ea,da,ca,E,N,Q,W,fa,aa,Z,K,U,S,ha);this.leafletMap._initEvents(!1,A);var wa=new x(this.leafletMap),oa=[ca,X,R,V,Y,ea,da,N,Q,W,fa,aa,Z,K,U,S,ha];this._indoorEntranceMarkerUpdater=null;M.displayEntranceMarkers&&(this._indoorEntranceMarkerUpdater=new C(this.leafletMap,R));var qa=null,xa=function(){var ba=ma.width(),ja=ma.height();if(ba!==ka||ja!==la)qa(ba,ja),ka=ba,la=ja};this.onInitialized=function(ba,ja){ma.onInitialized();
qa=T.cwrap("resizeCanvas",null,["number","number"]);B.onInitialized(ba,ja,ya,za,Aa);wa.setEventCallbacks(B.cameraApi);oa.forEach(function(Ba){Ba.onInitialized()});this.leafletMap.onInitialized(B)};this.onError=function(ba){ma.onError(ba)};this._setIndoorTransitionCompleteEventListener=function(ba){this.leafletMap.once("moveend",ba)};var pa=this,ya=function(ba){xa();oa.forEach(function(ja){ja.onUpdate(ba)});pa.leafletMap._onUpdate()},za=function(ba){oa.forEach(function(ja){ja.onDraw(ba)});pa.leafletMap._onDraw()},
Aa=function(){oa.forEach(function(ba){ba.onInitialStreamingCompleted()});pa.leafletMap.onInitialStreamingCompleted()}}},{"../public/eegeo_leaflet_map":64,"./blue_sphere_module":2,"./buildings_module":3,"./camera_module":4,"./events/map_move_events":31,"./frame_rate_module":32,"./heatmap_module":33,"./html_map_container":34,"./indoor_entrance_marker_updater":36,"./indoor_map_entity_information_module":37,"./indoor_map_floor_outline_information_module":38,"./indoors_module":41,"./layer_point_mapping_module":42,
"./map_runtime_module":44,"./polygon_module":46,"./polyline_module":48,"./precache_module":50,"./prop_module":51,"./rendering_module":53,"./routing_module":54,"./themes_module":55,"./version_module":56}],7:[function(r,u,v){var p={HEIGHT_ABOVE_GROUND:"heightAboveGround",HEIGHT_ABOVE_SEA_LEVEL:"heightAboveSeaLevel"};u.exports={ElevationModeType:p,isValidElevationMode:function(k){return k===p.HEIGHT_ABOVE_GROUND||k===p.HEIGHT_ABOVE_SEA_LEVEL},getElevationModeInt:function(k){var f=1;k&&k.toLowerCase()===
p.HEIGHT_ABOVE_SEA_LEVEL.toLowerCase()&&(f=0);return f}}},{}],8:[function(r,u,v){var p=r("./emscripten_memory"),k=r("./emscripten_geofence_api.js"),f=r("./emscripten_indoors_api.js"),l=r("./emscripten_precache_api.js"),c=r("./emscripten_spaces_api.js"),h=r("./emscripten_themes_api.js"),a=r("./emscripten_camera_api.js"),b=r("./emscripten_expand_floors_api.js"),d=r("./emscripten_indoor_entity_api.js"),e=r("./emscripten_buildings_api.js"),g=r("./emscripten_rendering_api.js"),n=r("./emscripten_layer_point_mapping_api.js"),
m=r("./emscripten_props_api.js"),q=r("./emscripten_indoor_map_entity_information_api.js"),t=r("./emscripten_indoor_map_floor_outline_information_api.js"),w=r("./emscripten_polyline_api.js"),y=r("./emscripten_blue_sphere_api.js"),H=r("./emscripten_map_runtime_api.js"),F=r("./emscripten_version_api.js"),C=r("./emscripten_heatmap_api.js"),I=r("./emscripten_frame_rate_api.js");u.exports=function(x){var D=!1,z=null,B=null;this.frameRateApi=this.heatmapApi=this.versionApi=this.mapRuntimeApi=this.blueSphereApi=
this.polylineApi=this.indoorMapFloorOutlineInformationApi=this.indoorMapEntityInformationApi=this.propsApi=this.layerPointMappingApi=this.buildingsApi=this.renderingApi=this.indoorEntityApi=this.expandFloorsApi=this.cameraApi=this.themesApi=this.spacesApi=this.precacheApi=this.indoorsApi=this.geofenceApi=null;this.onInitialized=function(A,J,O,P,T){z=A;B=J;A=x.cwrap;J=new p(x);this.geofenceApi=new k(z,A,x);this.spacesApi=new c(z,A,x,J);this.themesApi=new h(z,A,x);this.expandFloorsApi=new b(z,A,x);
this.layerPointMappingApi=new n(B,A,x,J);this.buildingsApi=new e(B,A,x,J);this.indoorsApi=new f(B,A,x,J);this.cameraApi=new a(B,A,x,J);this.indoorEntityApi=new d(B,A,x,J);this.precacheApi=new l(B,A,x);this.indoorMapEntityInformationApi=new q(B,A,x,J);this.indoorMapFloorOutlineInformationApi=new t(B,A,x,J);this.polylineApi=new w(B,A,x,J);this.blueSphereApi=new y(B,A,x,J);this.mapRuntimeApi=new H(B,A,x,J);this.versionApi=new F(B,A,J);this.heatmapApi=new C(B,A,x,J);this.renderingApi=new g(B,A,x,J);this.frameRateApi=
new I(B,A,x,J);this.propsApi=new m(B,A,x,J);x.cwrap("setTopLevelCallbacks",null,["number","number","number","number"])(z,x.addFunction(O),x.addFunction(P),x.addFunction(T));D=!0};this.ready=function(){return D}}},{"./emscripten_blue_sphere_api.js":9,"./emscripten_buildings_api.js":10,"./emscripten_camera_api.js":11,"./emscripten_expand_floors_api.js":12,"./emscripten_frame_rate_api.js":13,"./emscripten_geofence_api.js":14,"./emscripten_heatmap_api.js":15,"./emscripten_indoor_entity_api.js":16,"./emscripten_indoor_map_entity_information_api.js":17,
"./emscripten_indoor_map_floor_outline_information_api.js":18,"./emscripten_indoors_api.js":19,"./emscripten_layer_point_mapping_api.js":21,"./emscripten_map_runtime_api.js":22,"./emscripten_memory":23,"./emscripten_polyline_api.js":24,"./emscripten_precache_api.js":25,"./emscripten_props_api.js":26,"./emscripten_rendering_api.js":27,"./emscripten_spaces_api.js":28,"./emscripten_themes_api.js":29,"./emscripten_version_api.js":30}],9:[function(r,u,v){u.exports=function(p,k,f,l){var c=k("blueSphereApi_setEnabled",
null,["number","number"]),h=k("blueSphereApi_setCoordinate",null,["number","number","number"]),a=k("blueSphereApi_setElevation",null,["number","number"]),b=k("blueSphereApi_setIndoorMap",null,["number","string","number","number"]),d=k("blueSphereApi_setHeadingDegrees",null,["number","number"]),e=k("blueSphereApi_showOrientation",null,["number","number"]);this.updateNativeState=function(g){var n=g.getLocation(),m=g.getIndoorMapId();n?(c(p,g.isEnabled()),h(p,n.lat,n.lng),a(p,g.getElevation()),b(p,m,
m.length,g.getIndoorMapFloorId()),d(p,g.getHeadingDegrees()),e(p,g.isOrientationVisible())):c(p,!1)}}},{}],10:[function(r,u,v){var p=r("../../public/buildings/buildings");u.exports=function(k,f,l,c){var h=f("buildingsApi_SetBuildingHighlightChangedCallback",null,["number","number"]),a=f("buildingsApi_CreateHighlightAtLocation",null,"number number number number number number number number".split(" ")),b=f("buildingsApi_CreateHighlightAtScreenPoint",null,"number number number number number number number number".split(" ")),
d=f("buildingsApi_DestroyHighlight",null,["number","number"]),e=f("buildingsApi_SetHighlightColor",null,"number number number number number number".split(" ")),g=f("buildingsApi_TryGetBuildingInformationBufferSizes","number",["number","number","number","number"]),n=f("buildingsApi_TryGetBuildingInformation","number","number number number number number number number number number number number number number number".split(" ")),m=f("buildingsApi_TryFindIntersectionWithBuilding","number",["number","number",
"number"]);this.registerBuildingInformationReceivedCallback=function(q){h(k,l.addFunction(q))};this.createBuildingHighlight=function(q){var t=q.getOptions();q=q.getColor();var w=t.getIsInformationOnly()?0:1;t.getSelectionMode()===p.BuildingHighlightSelectionType.SELECT_AT_LOCATION?(t=t.getSelectionLocation(),q=a(k,t.lat,t.lng,q.x/255,q.y/255,q.z/255,q.w/255,w)):(t=t.getSelectionScreenPoint(),q=b(k,t.x,t.y,q.x/255,q.y/255,q.z/255,q.w/255,w));return q};this.destroyBuildingHighlight=function(q){d(k,
q)};this.setHighlightColor=function(q,t){e(k,q,t.x/255,t.y/255,t.z/255,t.w/255)};this.tryGetBuildingInformation=function(q){var t=c.createInt32Buffer(1),w=c.createInt32Buffer(1),y=c.createInt32Buffer(1),H=g(k,q,t.ptr,w.ptr,y.ptr),F=c.consumeBufferToArray(t)[0];w=c.consumeBufferToArray(w)[0];var C=c.consumeBufferToArray(y)[0];if(!H)return null;var I=c.createInt8Buffer(F),x=c.createDoubleBuffer(1),D=c.createDoubleBuffer(1);y=c.createBufferFromArray([0,0],c.createDoubleBuffer);var z=c.createDoubleBuffer(2*
w);w=c.createInt32Buffer(C);t=c.createDoubleBuffer(C);C=c.createDoubleBuffer(C);H=n(k,q,I.ptr,F,x.ptr,D.ptr,y.ptr,z.ptr,z.element_count,w.ptr,w.element_count,t.ptr,t.element_count,C.ptr,C.element_count);q=c.consumeUtf8BufferToString(I);F=c.consumeBufferToArray(x);D=c.consumeBufferToArray(D);y=L.latLng(c.consumeBufferToArray(y));y=new p.BuildingDimensions(F,D,y);z=c.consumeBufferToArray(z);F=c.consumeBufferToArray(w);t=c.consumeBufferToArray(t);C=c.consumeBufferToArray(C);D=[];for(I=x=0;I<w.element_count;++I){for(var B=
F[I],A=[],J=0;J<B;++J){var O=z[x++],P=z[x++];A.push(L.latLng(O,P))}B=new p.BuildingContour(t[I],C[I],A);D.push(B)}return H?new p.BuildingInformation(q,y,D):null};this.findIntersectionWithBuilding=function(q){var t=c.createBufferFromArray([q.origin.x,q.origin.y,q.origin.z,q.direction.x,q.direction.y,q.direction.z],c.createDoubleBuffer),w=c.createDoubleBuffer(3);q=m(k,t.ptr,w.ptr);c.freeBuffer(t);t=c.consumeBufferToArray(w);return{found:q,point:L.latLng(t)}}}},{"../../public/buildings/buildings":62}],
11:[function(r,u,v){u.exports=function(p,k,f,l){var c=k("cameraApi_setViewUsingZenithAngle","number","number number number number number number number number number number number number number number number number".split(" ")),h=k("cameraApi_setViewToBounds",null,"number number number number number number number number number".split(" ")),a=k("cameraApi_getDistanceToInterest","number",["number"]),b=k("cameraApi_getInterestLatLong",null,["number","number"]),d=k("cameraApi_getPitchDegrees","number",
["number"]),e=k("cameraApi_getHeadingDegrees","number",["number"]),g=k("cameraApi_setEventCallback",null,["number","number"]),n=k("cameraApi_getDistanceFromZoomLevel","number",["number","number"]),m=k("cameraApi_getZoomLevel","number",["number"]),q=k("cameraApi_setVerticallyLocked",null,["number","number"]);this.setView=function(t){var w="animate"in t?t.animate:!0,y="location"in t?L.latLng(t.location):null,H="zoom"in t?this.getDistanceFromZoomLevel(t.zoom):"distance"in t?t.distance:null,F="headingDegrees"in
t?t.headingDegrees:null,C="tiltDegrees"in t?t.tiltDegrees:null,I="durationSeconds"in t?t.durationSeconds:null,x="animate"in t&&!0===t.animate;t="allowInterruption"in t?t.allowInterruption:!0;var D=!0;null===y&&(y={lat:0,lng:0,alt:0},D=!1);return c(p,w,y.lat||0,y.lng||0,y.alt||0,D,H||0,null!==H,F||0,null!==F,C||0,null!==C,I||0,null!==I,!x,t)};this.setViewToBounds=function(t){var w=L.latLngBounds(t.bounds),y=w._northEast;w=w._southWest;h(p,y.lat,y.lng,y.alt||0,w.lat,w.lng,w.alt||0,"animate"in t?t.animate:
!0,"allowInterruption"in t?t.allowInterruption:!0)};this.getDistanceToInterest=function(){return a(p)};this.getInterestLatLong=function(){var t=[0,0];l.passDoubles(t,function(w,y){b(p,w);t=l.readDoubles(w,2)});return t};this.getPitchDegrees=function(){return d(p)};this.getHeadingDegrees=function(){return e(p)};this.setEventCallback=function(t){g(p,f.addFunction(t))};this.getDistanceFromZoomLevel=function(t){return n(p,t)};this.getZoomLevel=function(){return m(p)};this.setVerticallyLocked=function(t){q(p,
t)}}},{}],12:[function(r,u,v){u.exports=function(p,k,f){var l=null,c=null,h=null,a=null,b=null,d=null,e=null,g=null,n=null,m=null;this.expandIndoorMap=function(){h=h||k("expandIndoorMap","number",["number"]);return h(p)};this.collapseIndoorMap=function(){a=a||k("collapseIndoorMap",null,["number"]);return a(p)};this.getFloorParam=function(){l=l||k("getFloorParam",null,["number"]);return l(p)};this.setFloorParam=function(q){c=c||k("setFloorParam",null,["number","number"]);return c(p,q)};this.setCollapseStartCallback=
function(q){b=b||k("setCollapseStartCallback",null,["number","number"]);b(p,f.addFunction(q))};this.setCollapseCallback=function(q){d=d||k("setCollapseCallback",null,["number","number"]);d(p,f.addFunction(q))};this.setCollapseEndCallback=function(q){e=e||k("setCollapseEndCallback",null,["number","number"]);e(p,f.addFunction(q))};this.setExpandStartCallback=function(q){g=g||k("setExpandStartCallback",null,["number","number"]);g(p,f.addFunction(q))};this.setExpandCallback=function(q){n=n||k("setExpandCallback",
null,["number","number"]);n(p,f.addFunction(q))};this.setExpandEndCallback=function(q){m=m||k("setExpandEndCallback",null,["number","number"]);m(p,f.addFunction(q))}}},{}],13:[function(r,u,v){u.exports=function(p,k,f,l){var c=k("frameRateApi_SetTargetVSyncInterval",null,["number","number"]),h=k("frameRateApi_SetThrottledTargetFrameInterval",null,["number","number"]),a=k("frameRateApi_SetIdleSecondsBeforeThrottle",null,["number","number"]),b=k("frameRateApi_SetThrottleWhenIdleEnabled",null,["number",
"number"]),d=k("frameRateApi_CancelThrottle",null,["number"]);this.setTargetVSyncInterval=function(e){c(p,e)};this.setThrottledTargetFrameInterval=function(e){h(p,e)};this.setIdleSecondsBeforeThrottle=function(e){a(p,e)};this.setThrottleWhenIdleEnabled=function(e){b(p,e?1:0)};this.cancelThrottle=function(){d(p)}}},{}],14:[function(r,u,v){var p=r("../elevation_mode.js");u.exports=function(k,f,l){var c=f("removeGeofence",null,["number","number"]),h=f("setGeofenceColor",null,"number number number number number number".split(" ")),
a=f("createGeofenceFromRawCoords",null,"number number number number number number number string number number".split(" "));this._getElevationIsAboveSeaLevelFromConfig=function(b){return"undefined"!==typeof b.elevationMode?b.elevationMode.toLowerCase()===p.ElevationModeType.HEIGHT_ABOVE_SEA_LEVEL.toLowerCase():b.offsetFromSeaLevel||!1};this._getAltitudeOffsetFromConfig=function(b){return"undefined"!==typeof b.elevation?b.elevation:b.altitudeOffset||0};this.createGeofence=function(b,d,e){var g=[],n=
[];n.push(b.length);b.forEach(function(w){g.push(w.lat);g.push(w.lng)});d.forEach(function(w){n.push(w.length);w.forEach(function(y){g.push(y.lat);g.push(y.lng)})});b=l._malloc(8*g.length);for(d=0;d<g.length;++d)l.setValue(b+8*d,g[d],"double");d=l._malloc(4*n.length);for(var m=0;m<n.length;++m)l.setValue(d+4*m,n[m],"i32");m=e.indoorMapId||"";var q=this._getElevationIsAboveSeaLevelFromConfig(e),t=this._getAltitudeOffsetFromConfig(e);e=a(k,b,g.length,d,n.length,q,t,m,m.length,e.indoorMapFloorId||0);
l._free(b);l._free(d);return e};this.removeGeofence=function(b){c(k,b)};this.setGeofenceColor=function(b,d){h(k,b,d.x/255,d.y/255,d.z/255,d.w/255)}}},{"../elevation_mode.js":7}],15:[function(r,u,v){var p=r("../elevation_mode.js"),k=r("../../public/heatmap.js"),f=r("./emscripten_interop_utils.js");u.exports=function(l,c,h,a){function b(z){var B=0;z.forEach(function(A){A===k.HeatmapOcclusionMapFeature.GROUND?B|=1:A===k.HeatmapOcclusionMapFeature.BUILDINGS?B|=2:A===k.HeatmapOcclusionMapFeature.TREES?
B|=4:A===k.HeatmapOcclusionMapFeature.TRANSPORT&&(B|=8)});return B}function d(z){var B=[];Object.entries(z).forEach(function(A){A=$jscomp.makeIterator(A);A.next();A=A.next().value;if(0<A.weight){B.push(A.latLng.lat);B.push(A.latLng.lng);var J=0;void 0!==A.latLng.alt&&(J=A.latLng.alt);B.push(J);B.push(A.weight)}});return B}var e=c("heatmapApi_createHeatmap","number","number string number number number number number number number number number number number number number number number number number number number number number number number number number number number number number number number number number number number number".split(" ")),
g=c("heatmapApi_destroyHeatmap",null,["number","number"]),n=c("heatmapApi_setIndoorMap",null,["number","number","string","number","number"]),m=c("heatmapApi_setElevation",null,["number","number","number","number"]),q=c("heatmapApi_setDensityBlend",null,["number","number","number"]),t=c("heatmapApi_setInterpolateDensityByZoom",null,["number","number","number","number","number"]),w=c("heatmapApi_setIntensityBias",null,["number","number","number"]),y=c("heatmapApi_setIntensityScale",null,["number","number",
"number"]),H=c("heatmapApi_setOpacity",null,["number","number","number"]),F=c("heatmapApi_setColorGradient",null,"number number number number number number".split(" ")),C=c("heatmapApi_setResolution",null,["number","number","number"]),I=c("heatmapApi_setHeatmapDensities",null,"number number number number number number number number".split(" ")),x=c("heatmapApi_useApproximation",null,["number","number","number"]),D=c("heatmapApi_setData",null,"number number number number number number".split(" "));
this.createHeatmap=function(z){var B=[],A=[];z.getPolygonPoints().forEach(function(Z){A.push(Z.length);Z.forEach(function(K){B.push(K.lat);B.push(K.lng);B.push(K.alt?K.alt:0)})});0===B.length&&A.push(0);var J=a.createBufferFromArray(B,a.createDoubleBuffer),O=a.createBufferFromArray(A,a.createInt32Buffer),P=z.getIndoorMapId(),T=z.getIndoorMapFloorId(),M=z.getElevation(),X=p.getElevationModeInt(z.getElevationMode()),V=d(z.getData());V=a.createBufferFromArray(V,a.createDoubleBuffer);var Y=[],R=[],ea=
[];z.getDensityStops().forEach(function(Z){Y.push(Z.stop);R.push(Z.radius);ea.push(Z.gain)});var da=[],ca=[];z.getColorGradient().forEach(function(Z){da.push(Z.stop);ca.push(f.colorToRgba32(Z.color))});var E=a.createBufferFromArray(Y,a.createDoubleBuffer),N=a.createBufferFromArray(R,a.createDoubleBuffer),Q=a.createBufferFromArray(ea,a.createDoubleBuffer),W=a.createBufferFromArray(da,a.createDoubleBuffer),fa=a.createBufferFromArray(ca,a.createInt32Buffer),aa=b(z.getOccludedMapFeatures());z=e(l,P,P.length,
T,M,X,J.ptr,J.element_count,O.ptr,O.element_count,V.ptr,V.element_count,z.getWeightMin(),z.getWeightMax(),z.getResolutionPixels(),z.getTextureBorderPercent(),z.getUseApproximation()?1:0,E.ptr,E.element_count,N.ptr,N.element_count,Q.ptr,Q.element_count,W.ptr,W.element_count,fa.ptr,fa.element_count,z.getDensityBlend(),z.getInterpolateDensityByZoom(),z.getZoomMin(),z.getZoomMax(),z.getOpacity(),z.getIntensityBias(),z.getIntensityScale(),aa,z.getOccludedAlpha(),z.getOccludedSaturation(),z.getOccludedBrightness());
a.freeBuffer(J);a.freeBuffer(O);a.freeBuffer(V);a.freeBuffer(E);a.freeBuffer(N);a.freeBuffer(Q);a.freeBuffer(W);a.freeBuffer(fa);return z};this.destroyHeatmap=function(z){g(l,z)};this.updateNativeState=function(z,B){if(B._anyChanged()){var A=B._getChangedFlags();if(A.indoorMap){var J=B.getIndoorMapId();n(l,z,J,J.length,B.getIndoorMapFloorId())}A.elevation&&(J=p.getElevationModeInt(B.getElevationMode()),m(l,z,B.getElevation(),J));A.densityBlend&&q(l,z,B.getDensityBlend());A.densityBlend&&t(l,z,B.getInterpolateDensityByZoom(),
B.getZoomMin(),B.getZoomMax());A.intensityBias&&w(l,z,B.getIntensityBias());A.intensityScale&&y(l,z,B.getIntensityScale());A.opacity&&H(l,z,B.getOpacity());if(A.colorGradient){var O=[],P=[];B.getColorGradient().forEach(function(R){O.push(R.stop);P.push(f.colorToRgba32(R.color))});J=a.createBufferFromArray(O,a.createDoubleBuffer);var T=a.createBufferFromArray(P,a.createInt32Buffer);F(l,z,J.ptr,J.element_count,T.ptr,T.element_count);a.freeBuffer(J);a.freeBuffer(T)}A.resolution&&C(l,z,B.getResolutionPixels());
if(A.densityStops){var M=[],X=[],V=[];B.getDensityStops().forEach(function(R){M.push(R.stop);X.push(R.radius);V.push(R.gain)});J=a.createBufferFromArray(M,a.createDoubleBuffer);T=a.createBufferFromArray(X,a.createDoubleBuffer);var Y=a.createBufferFromArray(V,a.createDoubleBuffer);I(l,z,J.ptr,J.element_count,T.ptr,T.element_count,Y.ptr,Y.element_count);a.freeBuffer(J);a.freeBuffer(T);a.freeBuffer(Y)}A.useApproximation&&x(l,z,B.getUseApproximation()?1:0);A.data&&(A=d(B.getData()),A=a.createBufferFromArray(A,
a.createDoubleBuffer),D(l,z,A.ptr,A.element_count,B.getWeightMin(),B.getWeightMax()),a.freeBuffer(A));B._clearChangedFlags()}}}},{"../../public/heatmap.js":65,"../elevation_mode.js":7,"./emscripten_interop_utils.js":20}],16:[function(r,u,v){u.exports=function(p,k,f,l){var c=k("indoorEntityApi_SetIndoorEntityPickedCallback",null,["number","number"]),h=k("indoorEntityApi_SetHighlights",null,["number","string","number","number","number"]),a=k("indoorEntityApi_ClearHighlights",null,["number","string",
"number","number"]),b=k("indoorEntityApi_ClearAllHighlights",null,["number"]),d=null,e=function(m){null!==d&&(m=l.stringifyPointer(m),d(m))},g=function(m,q,t){l.passStrings(m,function(w,y){l.passDoubles(q,function(H,F){h(p,t,w,y,H)})})},n=function(m,q){l.passStrings(m,function(t,w){a(p,q,t,w)})};this.onInitialized=function(){c(p,f.addFunction(e))};this.registerIndoorEntityPickedCallback=function(m){d=m};this.setHighlights=function(m,q,t){null!==t&&void 0!==t&&("string"===typeof m&&(m=[m]),g(m,q,t))};
this.clearHighlights=function(m,q){void 0===m?b(p):null!==q&&void 0!==q&&("string"===typeof m&&(m=[m]),n(m,q))}}},{}],17:[function(r,u,v){var p=r("../../public/indoorMapEntities/indoorMapEntities");u.exports=function(k,f,l,c){var h=f("indoorEntityInformationApi_IndoorMapEntityInformationChangedCallback",null,["number","number"]),a=f("indoorMapEntityInformation_CreateIndoorMapEntityInformation","number",["number","string"]),b=f("indoorMapEntityInformation_DestroyIndoorMapEntityInformation",null,["number",
"number"]),d=f("indoorEntityInformationApi_TryGetIndoorMapEntityCountBuffer","number",["number","number","number"]),e=f("indoorEntityInformationApi_TryGetIndoorMapEntityInformationLoadState","number",["number","number","number"]),g=f("indoorEntityInformationApi_TryGetIndoorMapEntityBuffersSize","number",["number","number","number","number","number"]),n=f("indoorEntityInformationApi_TryGetIndoorMapEntityModels","number","number number number number number number number number number number number number".split(" "));
this.registerIndoorMapEntityInformationChangedCallback=function(m){h(k,l.addFunction(m))};this.createIndoorMapEntityInformation=function(m){m=m.getIndoorMapId();return a(k,m)};this.destroyIndoorMapEntityInformation=function(m){b(k,m)};this.tryGetIndoorMapEntityInformation=function(m){var q=c.createInt32Buffer(1),t=e(k,m,q.ptr);q=c.consumeBufferToArray(q);if(!t)return null;var w=c.createInt32Buffer(1);t=d(k,m,w.ptr);w=c.consumeBufferToArray(w)[0];if(!t)return null;var y=c.createInt32Buffer(3),H=c.createInt32Buffer(w);
t=g(k,m,w,H.ptr,y.ptr);var F=c.consumeBufferToArray(y);H=c.consumeBufferToArray(H);y=F[0];var C=F[1],I=F[2];if(!t)return null;var x=c.createInt8Buffer(y),D=c.createInt32Buffer(w);F=c.createDoubleBuffer(2*w);var z=c.createInt32Buffer(w),B=c.createInt32Buffer(C),A=c.createDoubleBuffer(I);t=n(k,m,w,x.ptr,y,D.ptr,F.ptr,z.ptr,B.ptr,C,A.ptr,I);m=c.consumeUtf8BufferToString(x);y=c.consumeBufferToArray(D);F=c.consumeBufferToArray(F);z=c.consumeBufferToArray(z);B=c.consumeBufferToArray(B);A=c.consumeBufferToArray(A);
if(!t)return null;t=[];for(x=I=D=C=0;x<w;x++){var J=C+H[x],O=m.slice(C,J);C=J;J=y[x];for(var P=L.latLng(F[2*x],F[2*x+1]),T=[],M=D+z[x],X=D;X<M;X++){for(var V=[],Y=I+B[X],R=I;R<Y;R++)V.push(L.latLng(A[2*R],A[2*R+1])),I++;T.push(V);D++}O=new p.IndoorMapEntity(O,J,P,T);t.push(O)}return{LoadState:q[0],IndoorMapEntities:t}}}},{"../../public/indoorMapEntities/indoorMapEntities":66}],18:[function(r,u,v){var p=r("../../public/indoorMapFloorOutlines/indoor_map_floor_outline_polygon"),k=r("../../public/indoorMapFloorOutlines/indoor_map_floor_outline_polygon_ring");
u.exports=function(f,l,c,h){var a=l("indoorMapFloorOutlineInformationApi_IndoorMapFloorOutlineInformationLoadedCallback",null,["number","number"]),b=l("indoorMapFloorOutlineInformationApi_CreateIndoorMapFloorOutlineInformation","number",["number","string","number"]),d=l("indoorMapFloorOutlineInformationApi_DestroyIndoorMapFloorOutlineInformation",null,["number","number"]),e=l("indoorMapFloorOutlineInformationApi_GetIndoorMapFloorOutlineInformationLoaded","number",["number","number"]),g=l("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlineBufferSize",
"number",["number","number","number"]),n=l("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlinePolygonBufferSizes","number","number number number number number number".split(" ")),m=l("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlinePolygon","number","number number number number number number number number".split(" "));this.registerIndoorMapFloorOutlineInformationLoadedCallback=function(t){a(f,c.addFunction(t))};this.createIndoorMapFloorOutlineInformation=function(t){var w=
t.getIndoorMapId();t=t.getIndoorMapFloorId();return b(f,w,t)};this.destroyIndoorMapFloorOutlineInformation=function(t){d(f,t)};this.getIndoorMapFloorOutlineInformationLoaded=function(t){return e(f,t)};this.tryGetIndoorMapFloorOutlineInformation=function(t){var w=h.createInt32Buffer(1),y=g(f,t,w.ptr);w=h.consumeBufferToArray(w)[0];if(!y)return null;var H=[],F;for(F=0;F<w;F++){var C=h.createInt32Buffer(1),I=h.createInt32Buffer(1),x=h.createInt32Buffer(1);y=n(f,t,F,C.ptr,I.ptr,x.ptr);C=h.consumeBufferToArray(C)[0];
I=h.consumeBufferToArray(I)[0];var D=h.consumeBufferToArray(x)[0];if(!y)return null;var z=h.createDoubleBuffer(2*C);x=h.createInt32Buffer(I);D=h.createDoubleBuffer(2*D);y=m(f,t,F,z.ptr,z.element_count,x.ptr,x.element_count,D.ptr,D.element_count);z=h.consumeBufferToArray(z);x=h.consumeBufferToArray(x);D=h.consumeBufferToArray(D);C=q(z,0,C);z=0;for(var B=[],A=0;A<I;A++){var J=x[A],O=q(D,z,J);z+=2*J;B.push(O)}if(!y)return null;y=new p(C,B);H.push(y)}return H};var q=function(t,w,y){for(var H=[],F=0;F<
y;++F){var C=t[w++],I=t[w++];H.push(L.latLng(C,I))}return new k(H)}}},{"../../public/indoorMapFloorOutlines/indoor_map_floor_outline_polygon":71,"../../public/indoorMapFloorOutlines/indoor_map_floor_outline_polygon_ring":72}],19:[function(r,u,v){var p=r("./emscripten_interop_utils.js");u.exports=function(k,f,l,c){var h=f("indoorsApi_RegisterIndoorMapCallbacks",null,"number number number number number number number number number".split(" ")),a=f("indoorsApi_EnterIndoorMap",null,["number","string"]),
b=f("indoorsApi_ExitIndoorMap",null,["number"]),d=f("indoorsApi_HasActiveIndoorMap","number",["number"]),e=f("indoorsApi_GetActiveIndoorMapId","string",["number"]),g=f("indoorsApi_GetActiveIndoorMapName","string",["number"]),n=f("indoorsApi_GetActiveIndoorMapSourceVendor","string",["number"]),m=f("indoorsApi_GetActiveIndoorMapFloorCount","number",["number"]),q=f("indoorsApi_GetActiveIndoorMapUserData","string",["number"]),t=f("indoorsApi_GetSelectedFloorIndex","number",["number"]),w=f("indoorsApi_SetSelectedFloorIndex",
"number",["number","number"]),y=f("indoorsApi_GetFloorName","string",["number","number"]),H=f("indoorsApi_GetFloorShortName","string",["number","number"]),F=f("indoorsApi_GetFloorNumber","number",["number","number"]),C=f("indoorsApi_GetFloorHeightAboveSeaLevel","number",["number","number"]),I=f("indoorsApi_TryGetReadableNameBufferSize","number",["number","string","number","number"]),x=f("indoorsApi_TryGetReadableName","number",["number","string","number","number","number"]),D=f("indoorsApi_TryGetFloorReadableNameBufferSize",
"number",["number","string","number","number","number"]),z=f("indoorsApi_TryGetFloorReadableName","number","number string number number number number".split(" ")),B=f("indoorsApi_TryGetFloorShortNameBufferSize","number",["number","string","number","number","number"]),A=f("indoorsApi_TryGetFloorShortName","number","number string number number number number".split(" ")),J=f("indoorsApi_SetBackgroundColor",null,["number","number"]),O=null,P=null,T=null,M=null,X=null,V=null,Y=null,R=null,ea=function(){null!==
O&&O()},da=function(){null!==P&&P()},ca=function(){null!==T&&T()},E=function(){null!==M&&M()},N=function(K,U,S,ha){U=c.stringifyPointer(U);S=c.stringifyPointer(S);ha=c.readDoubles(ha,3);ha=L.latLng(ha);K(U,S,ha)},Q=function(K,U,S){null!==X&&N(X,K,U,S)},W=function(K,U,S){null!==V&&N(V,K,U,S)},fa=function(K){null!==Y&&(K=c.stringifyPointer(K),Y(K))},aa=function(K){null!==R&&(K=c.stringifyPointer(K),R(K))};this.onInitialized=function(){h(k,l.addFunction(ea),l.addFunction(da),l.addFunction(ca),l.addFunction(E),
l.addFunction(Q),l.addFunction(W),l.addFunction(fa),l.addFunction(aa))};this.setNotificationCallbacks=function(K,U,S,ha,ia,ka,la,na){O=K;P=U;T=S;M=ha;X=ia;V=ka;Y=la;R=na};this.enterIndoorMap=function(K){return a(k,K)};this.exitIndoorMap=function(){b(k)};this.hasActiveIndoorMap=function(){return!!d(k)};this.getActiveIndoorMapId=function(){return e(k)};this.getActiveIndoorMapName=function(){return g(k)};this.getActiveIndoorMapSourceVendor=function(){return n(k)};this.getActiveIndoorMapFloorCount=function(){return m(k)};
this.getActiveIndoorMapUserData=function(){return q(k)};this.getSelectedFloorIndex=function(){return t(k)};this.setSelectedFloorIndex=function(K){return!!w(k,K)};this.getFloorName=function(K){return y(k,K)};this.getFloorShortName=function(K){return H(k,K)};this.getFloorNumber=function(K){return F(k,K)};this.getFloorHeightAboveSeaLevel=function(K){return C(k,K)};this.tryGetReadableName=function(K){var U=c.createInt32Buffer(1),S=I(k,K,K.length,U.ptr);if(!S)return null;S=c.consumeBufferToArray(U)[0];
U=c.createInt8Buffer(S);return(S=x(k,K,K.length,U.ptr,S))?c.consumeUtf8BufferToString(U):null};var Z=function(K,U,S,ha){var ia=c.createInt32Buffer(1);S=S(k,K,K.length,U,ia.ptr);if(!S)return null;S=c.consumeBufferToArray(ia)[0];ia=c.createInt8Buffer(S);return(S=ha(k,K,K.length,U,ia.ptr,S))?c.consumeUtf8BufferToString(ia):null};this.tryGetFloorReadableName=function(K,U){return Z(K,U,D,z)};this.tryGetFloorShortName=function(K,U){return Z(K,U,B,A)};this.setBackgroundColor=function(K){K=p.colorToRgba32(K);
J(k,K)}}},{"./emscripten_interop_utils.js":20}],20:[function(r,u,v){function p(l){return((l.x&255)<<24)+((l.y&255)<<16)+((l.z&255)<<8)+(l.w&255)}function k(l){l=l.replace(/^#/,"");var c=255;8===l.length?c=parseInt(l.slice(6,8),16)&255:4===l.length&&(c=parseInt(l.slice(3,4).repeat(2),16)&255);var h=16777215;if(6===l.length||8===l.length)h=parseInt(l.substring(0,6),16)&16777215;else if(3===l.length||4===l.length)h=parseInt(l[0].repeat(2)+l[1].repeat(2)+l[2].repeat(2),16)&16777215;return(h<<8)+c}var f=
r("../../public/space");u.exports={colorToRgba32:function(l){if("string"===typeof l)return k(l);if(Array.isArray(l)){var c=255;if(Array.isArray(l)&&3<=l.length){var h=l[0];var a=l[1];var b=l[2];3<l.length&&(c=l[3])}else throw Error("Unable to parse color from array: "+String(l));if(isNaN(h)||isNaN(a)||isNaN(b)||isNaN(c))throw Error("Unable to parse color - value out of range: "+String(l));l=new f.Vector4(h,a,b,c);return p(l)}if("object"===typeof l){b=a=h=void 0;c=255;if("object"===typeof l)l.hasOwnProperty("r")?
h=l.r:l.hasOwnProperty("x")&&(h=l.x),l.hasOwnProperty("g")?a=l.g:l.hasOwnProperty("y")&&(a=l.y),l.hasOwnProperty("b")?b=l.b:l.hasOwnProperty("z")&&(b=l.z),l.hasOwnProperty("a")?c=l.a:l.hasOwnProperty("w")&&(c=l.w);else throw Error("Unable to parse color: "+String(l));if(isNaN(h)||isNaN(a)||isNaN(b)||isNaN(c))throw Error("Unable to parse color - value out of range: "+String(l));l=new f.Vector4(h,a,b,c);return p(l)}throw Error("Unable to parse color: "+String(l));},hexToRgba32:k}},{"../../public/space":83}],
21:[function(r,u,v){u.exports=function(p,k,f,l){var c=null,h=null,a=null,b=null;this._createLatLngsNumberArray=function(d){for(var e=Array(2*d.length),g=0;g<d.length;g++){var n=d[g],m=2*g;e[m]=n.lat;e[m+1]=n.lng}return e};this.createPointMapping=function(d,e,g,n,m,q){c=c||k("createLayerMapping",null,"number number number number string number number number number".split(" "));q=this._createLatLngsNumberArray(q);l.passDoubles(q,function(t,w){c(p,d,e,g,n,n.length,m,t,w)})};this.createPointMappingWithFloorIndex=
function(d,e,g,n,m,q){h=h||k("createLayerMappingWithFloorIndex",null,"number number number number string number number number number".split(" "));q=this._createLatLngsNumberArray(q);l.passDoubles(q,function(t,w){h(p,d,e,g,n,n.length,m,t,w)})};this.removePointMapping=function(d){a=a||k("removeLayerMapping",null,["number","number"]);a(p,d)};this.getLatLngsForLayer=function(d,e){b=b||k("getPointsOnMapForLayer","number",["number","number","number"]);var g=Array(3*e);l.passDoubles(g,function(y,H){H=b(p,
d,y);if(g.length!==H)throw Error("_getPointsOnMapForLayer : unexpected array length. Expected '"+H+"' but was '"+g.length+"'.");g=l.readDoubles(y,H)});e=Array(e);for(var n=0,m=0;m<g.length;m+=3){var q=g[m],t=g[m+1],w=g[m+2];e[n++]=L.latLng(q,t,w)}return e}}},{}],22:[function(r,u,v){u.exports=function(p,k,f,l){var c=k("webglPause",null,["number"]),h=k("webglResume",null,["number"]);this.onPause=function(){c(p)};this.onResume=function(){h(p)}}},{}],23:[function(r,u,v){u.exports=function(p){this.readDoubles=
function(k,f){for(var l=[],c=0;c<f;++c){var h=p.getValue(k+8*c,"double");l.push(h)}return l};this.passDoubles=function(k,f){for(var l=p._malloc(8*k.length),c=0;c<k.length;++c)p.setValue(l+8*c,k[c],"double");f(l,k.length);p._free(l)};this.passString=function(k,f){var l=p.lengthBytesUTF8(k),c=p._malloc(l);p.stringToUTF8(k,c,l);f(c);p._free(c)};this.passStrings=function(k,f){for(var l=p._malloc(4*k.length),c=[],h=0;h<k.length;++h){var a=p.lengthBytesUTF8(k[h])+1,b=p._malloc(a);p.stringToUTF8(k[h],b,
a);p.setValue(l+4*h,b,"*");c.push(b)}f(l,k.length);for(k=0;k<c.length;++k)p._free(c[k]);p._free(l)};this.passInt32s=function(k,f){for(var l=p._malloc(4*k.length),c=0;c<k.length;++c)p.setValue(l+4*c,k[c],"i32");f(l,k.length);p._free(l)};this.stringifyPointer=function(k){return p.UTF8ToString(k)};this.createInt8Buffer=function(k){return{ptr:p._malloc(k),element_count:k,element_type:"i8",element_size_bytes:1}};this.createInt32Buffer=function(k){return{ptr:p._malloc(4*k),element_count:k,element_type:"i32",
element_size_bytes:4}};this.createDoubleBuffer=function(k){return{ptr:p._malloc(8*k),element_count:k,element_type:"double",element_size_bytes:8}};this.createBufferFromArray=function(k,f){f=f(k.length);for(var l=0;l<f.element_count;++l)p.setValue(f.ptr+l*f.element_size_bytes,k[l],f.element_type);return f};this.consumeBufferToArray=function(k){for(var f=[],l=0;l<k.element_count;++l){var c=p.getValue(k.ptr+l*k.element_size_bytes,k.element_type);f.push(c)}p._free(k.ptr);return f};this.freeBuffer=function(k){p._free(k.ptr)};
this.createUtf8BufferFromString=function(k){var f=p.lengthBytesUTF8(k)+1,l=this.createInt8Buffer(f);p.stringToUTF8(k,l.ptr,f);return l};this.consumeUtf8BufferToString=function(k){var f=p.UTF8ToString(k.ptr);p._free(k.ptr);return f}}},{}],24:[function(r,u,v){var p=r("../elevation_mode.js"),k=r("./emscripten_interop_utils.js");u.exports=function(f,l,c,h){var a=l("polylineApi_createPolyline","number","number string number number number number number number number number number number number".split(" ")),
b=l("polylineApi_destroyPolyline",null,["number","number"]),d=l("polylineApi_setIndoorMap",null,["number","number","string","number","number"]),e=l("polylineApi_setElevation",null,["number","number","number"]),g=l("polylineApi_setStyleAttributes",null,["number","number","number","number","number"]);this.createPolyline=function(n){var m=[],q=[],t=!1;n.getLatLngs().forEach(function(z){m.push(z.lat);m.push(z.lng);var B=0;void 0!==z.alt&&(t=!0,B=z.alt);q.push(B)});t||(q=[]);var w=h.createBufferFromArray(m,
h.createDoubleBuffer),y=h.createBufferFromArray(q,h.createDoubleBuffer),H=n.getIndoorMapId(),F=n.getIndoorMapFloorId(),C=n.getElevation(),I=p.getElevationModeInt(n.getElevationMode()),x=n.getWidth(),D=k.colorToRgba32(n.getColor());n=n.getMiterLimit();H=a(f,H,H.length,F,C,I,w.ptr,w.element_count,y.ptr,y.element_count,x,D,n);h.freeBuffer(w);h.freeBuffer(y);return H};this.destroyPolyline=function(n){b(f,n)};this.updateNativeState=function(n,m){if(m._needsNativeUpdate){m._needsNativeUpdate=!1;var q=m.getIndoorMapId(),
t=p.getElevationModeInt(m.getElevationMode()),w=k.colorToRgba32(m.getColor());d(f,n,q,q.length,m.getIndoorMapFloorId());e(f,n,m.getElevation(),t);g(f,n,m.getWidth(),w,m.getMiterLimit())}}}},{"../elevation_mode.js":7,"./emscripten_interop_utils.js":20}],25:[function(r,u,v){u.exports=function(p,k,f){var l=null,c=null,h=null,a=null,b=null;this.registerCallbacks=function(d,e){null!==b&&f.removeFunction(b);b=f.addFunction(d);null!==a&&f.removeFunction(a);a=f.addFunction(e);h=h||k("precacheApi_setPrecacheCallbacks",
null,["number","number","number"]);h(p,b,a)};this.beginPrecacheOperation=function(d){l=l||k("precacheApi_beginPrecacheOperation","number",["number","number","number","number"]);var e=d.getCentre();return l(p,e.lat,e.lng,d.getRadius())};this.cancelPrecacheOperation=function(d){c=c||k("precacheApi_cancelPrecacheOperation",null,["number","number"]);c(p,d)}}},{}],26:[function(r,u,v){var p=r("../elevation_mode.js");u.exports=function(k,f,l,c){var h=null,a=null,b=null,d=null,e=null,g=null,n=null,m=null,
q=null,t=null,w=null,y=null,H=null,F=null;this.createProp=function(C,I,x,D,z,B,A,J,O){h=h||f("propsApi_createProp","number","number string number string number number number number number string".split(" "));A=p.getElevationModeInt(A);return h(k,C,I,x,D,z,B,A,J,O)};this.createProps=function(C,I,x,D,z,B,A,J,O){var P=C.length;if(I.length!==P||x.length!==P||D.length!==P||z.length!==P||B.length!==P||A.length!==P||J.length!==P||O.length!==P)throw Error("Unequal array element counts in call to createProps.");
a=a||f("propsApi_createProps",null,"number number number number number number number number number number number number".split(" "));var T=c.createInt32Buffer(P),M=[];A.forEach(function(ca){M.push(p.getElevationModeInt(ca))});var X=c.createBufferFromArray(I,c.createInt32Buffer),V=c.createBufferFromArray(D,c.createDoubleBuffer),Y=c.createBufferFromArray(z,c.createDoubleBuffer),R=c.createBufferFromArray(B,c.createDoubleBuffer),ea=c.createBufferFromArray(M,c.createInt32Buffer),da=c.createBufferFromArray(J,
c.createDoubleBuffer);c.passStrings(C,function(ca,E){c.passStrings(x,function(N,Q){c.passStrings(O,function(W,fa){a(k,P,ca,X.ptr,N,V.ptr,Y.ptr,R.ptr,ea.ptr,da.ptr,W,T.ptr)})})});c.freeBuffer(da);c.freeBuffer(ea);c.freeBuffer(R);c.freeBuffer(V);c.freeBuffer(Y);c.freeBuffer(X);return c.consumeBufferToArray(T)};this.destroyProp=function(C){b=b||f("propsApi_destroyProp",null,["number","number"]);b(k,C)};this.destroyProps=function(C){d=d||f("propsApi_destroyProps",null,["number","number","number"]);c.passInt32s(C,
function(I,x){d(k,I,x)})};this.propExists=function(C){e=e||f("propsApi_propExists","number",["number","number"]);return e(k,C)};this.setLocation=function(C,I,x){g=g||f("propsApi_setLocation",null,["number","number","number","number"]);g(k,C,I,x)};this.setElevation=function(C,I){n=n||f("propsApi_setElevation",null,["number","number","number"]);n(k,C,I)};this.setElevationMode=function(C,I){m=m||f("propsApi_setElevationMode",null,["number","number","number"]);I=p.getElevationModeInt(I);m(k,C,I)};this.setGeometryId=
function(C,I){q=q||f("propsApi_setGeometryId",null,["number","number","string"]);q(k,C,I)};this.setHeadingDegrees=function(C,I){t=t||f("propsApi_setHeadingDegrees",null,["number","number","number","number"]);t(k,C,I)};this.setAutomaticIndoorMapPopulationEnabled=function(C){w=w||f("propsApi_setAutomaticIndoorMapPopulationEnabled",null,["number","number"]);w(k,C)};this.isAutomaticIndoorMapPopulationEnabled=function(){y=y||f("propsApi_isAutomaticIndoorMapPopulationEnabled","number",["number"]);return y(k)};
this.setIndoorMapPopulationServiceUrl=function(C){H=H||f("propsApi_setIndoorMapPopulationServiceUrl",null,["number","string"]);H(k,C)};this.setIndoorMapPopulationRequestCompletedCallback=function(C){F=F||f("propsApi_setIndoorMapPopulationRequestCompletedCallback",null,["number","number","number"]);F(k,l.addFunction(C))}}},{"../elevation_mode.js":7}],27:[function(r,u,v){var p=r("../../public/space"),k=r("./emscripten_interop_utils.js");u.exports=function(f,l,c,h){var a=l("renderingApi_SetMapCollapsed",
null,["number","number"]),b=l("renderingApi_SetClearColor",null,["number","number"]),d=l("renderingApi_GetCameraRelativePosition",null,"number number number number number number".split(" ")),e=l("renderingApi_GetCameraProjectionMatrix",null,["number","number","number"]),g=l("renderingApi_GetCameraOrientationMatrix",null,["number","number","number"]),n=l("renderingApi_GetLightingData",null,["number","number","number"]),m=l("renderingApi_GetNorthFacingOrientationMatrix",null,["number","number","number",
"number","number"]);this.setMapCollapsed=function(q){a(f,q?1:0)};this.setClearColor=function(q){q=k.hexToRgba32(q);b(f,q)};this.getCameraRelativePosition=function(q){var t=Array(3);h.passDoubles(t,function(w,y){d(f,q.lat,q.lng,q.alt||0,y,w);t=h.readDoubles(w,y)});return new p.Vector3(t)};this.getNorthFacingOrientationMatrix=function(q){var t=Array(16);h.passDoubles(t,function(w,y){m(f,q.lat,q.lng,y,w);t=h.readDoubles(w,y)});return t};this.getCameraProjectionMatrix=function(){var q=Array(16);h.passDoubles(q,
function(t,w){e(f,w,t);q=h.readDoubles(t,w)});return q};this.getCameraOrientationMatrix=function(){var q=Array(16);h.passDoubles(q,function(t,w){g(f,w,t);q=h.readDoubles(t,w)});return q};this.getLightingData=function(){var q=Array(21);h.passDoubles(q,function(t,w){n(f,w,t);q=h.readDoubles(t,w)});return{key:{direction:new p.Vector3(q[0],q[1],q[2]),color:new p.Vector3(q[9],q[10],q[11])},back:{direction:new p.Vector3(q[3],q[4],q[5]),color:new p.Vector3(q[12],q[13],q[14])},fill:{direction:new p.Vector3(q[6],
q[7],q[8]),color:new p.Vector3(q[15],q[16],q[17])},ambient:{color:new p.Vector3(q[18],q[19],q[20])}}}}},{"../../public/space":83,"./emscripten_interop_utils.js":20}],28:[function(r,u,v){var p=r("../../public/space");u.exports=function(k,f,l,c){var h=null,a=null,b=null,d=null,e=null,g=null,n=null,m=null,q=f("spacesApi_ScreenPointToRay",null,["number","number","number","number"]),t=f("spacesApi_LatLongToVerticallyDownRay",null,["number","number","number","number"]),w=function(x,D,z){h=h||f("worldToScreen",
null,["number","number","number","number","number"]);var B=[0,0,0];c.passDoubles(B,function(A,J){h(k,x,D,z,A);B=c.readDoubles(A,3)});return new p.Vector3(B)},y=function(x,D,z){var B=[0,0,0],A=!1;c.passDoubles(B,function(J,O){A=!!z(k,x,D,J);B=c.readDoubles(J,3)});return A?L.latLng(B):null},H=function(x,D,z,B){e=e||f("getUpdatedAltitudeAtLatLng","number","number number number number number number".split(" "));var A=[0,0],J=!1;c.passDoubles(A,function(O,P){(J=!!e(k,x,D,z,B,O))&&(A=c.readDoubles(O,2))});
return J?A:null},F=function(x,D){g=g||f("getMortonKeyAtLatLng",null,["number","number","number"]);var z="";c.passString(z,function(B){g(x,D,B);z=c.stringifyPointer(B)});return z},C=function(x){n=n||f("getMortonKeyCenter",null,["string","number"]);var D=[0,0];c.passDoubles(D,function(z,B){n(x,z);D=c.readDoubles(z,2)});D.forEach(function(z,B){isNaN(z)&&(D[B]=0)});return L.latLng(D)},I=function(x,D){m=m||f("getMortonKeyCorners",null,["string","number","number"]);var z=[0,0,0,0,0,0,0,0];c.passDoubles(z,
function(B,A){m(x,D,B);z=c.readDoubles(B,8)});z.forEach(function(B,A){isNaN(B)&&(z[A]=0)});return[L.latLng(z.slice(0,2)),L.latLng(z.slice(2,4)),L.latLng(z.slice(4,6)),L.latLng(z.slice(6))]};this.worldToScreen=function(x){x=L.latLng(x);return w(x.lat,x.lng,x.alt||0)};this.screenToTerrainPoint=function(x){var D=L.point(x);x=D.x;D=D.y;a=a||f("screenToTerrainPoint","number",["number","number","number","number"]);return y(x,D,a)};this.screenToIndoorPoint=function(x){var D=L.point(x);x=D.x;D=D.y;b=b||f("screenToIndoorPoint",
"number",["number","number","number","number"]);return y(x,D,b)};this.screenToWorldPoint=function(x){return this.screenToIndoorPoint(x)||this.screenToTerrainPoint(x)};this.getAltitudeAtLatLng=function(x){var D=x.lat;x=x.lng;d=d||f("getAltitudeAtLatLng","number",["number","number","number"]);return d(k,D,x)};this.getUpdatedAltitudeAtLatLng=function(x,D,z){return H(x.lat,x.lng,D,z)};this.screenPointToRay=function(x){x=L.point(x);var D=c.createDoubleBuffer(6);q(k,x.x,x.y,D.ptr);D=c.consumeBufferToArray(D);
x=new p.Vector3(D[0],D[1],D[2]);D=new p.Vector3(D[3],D[4],D[5]);return{origin:x,direction:D}};this.latLongToVerticallyDownRay=function(x){var D=c.createDoubleBuffer(6);t(k,x.lat,x.lng,D.ptr);D=c.consumeBufferToArray(D);x=new p.Vector3(D[0],D[1],D[2]);D=new p.Vector3(D[3],D[4],D[5]);return{origin:x,direction:D}};this.getMortonKeyAtLatLng=function(x){return F(x.lat,x.lng)};this.getMortonKeyCenter=function(x){return C(x)};this.getMortonKeyCorners=function(x,D){return I(x,D||0)}}},{"../../public/space":83}],
29:[function(r,u,v){u.exports=function(p,k,f){var l=null,c=null,h=null,a=null;this.setTheme=function(b){l=l||k("setTheme",null,["number","string"]);l(p,b)};this.setState=function(b,d){c=c||k("setState",null,["number","string","number"]);c(p,b,d)};this.setThemeManifest=function(b){h=h||k("setThemeManifest",null,["number","string"]);h(p,b)};this.registerStreamingCompletedCallback=function(b){a=a||k("setStreamingCompletedCallback",null,["number","number"]);a(p,f.addFunction(b))}}},{}],30:[function(r,
u,v){u.exports=function(p,k,f){var l=k("versionApi_GetPlatformVersionStringSize","number",["number"]),c=k("versionApi_TryGetPlatformVersionString","number",["number","number","number"]),h=k("versionApi_GetPlatformHashStringSize","number",["number"]),a=k("versionApi_TryGetPlatformHashString","number",["number","number","number"]),b=function(d,e){d=d(p);var g=f.createInt8Buffer(d);return e(p,g.ptr,d)?f.consumeUtf8BufferToString(g):null};this.getPlatformVersion=function(){return b(l,c)};this.getPlatformVersionHash=
function(){return b(h,a)}}},{}],31:[function(r,u,v){u.exports=function(p){var k="move movestart moveend drag dragstart dragend pan panstart panend rotate rotatestart rotateend tilt tiltstart tiltend zoom zoomstart zoomend transitionstart transitionend".split(" "),f=function(l){p.fire(k[l])};this.setEventCallbacks=function(l){l.setEventCallback(f)}}},{}],32:[function(r,u,v){function p(k,f,l,c,h){var a=f,b=l,d=c,e=h,g=!1;this.onInitialized=function(){k.frameRateApi.setTargetVSyncInterval(a);k.frameRateApi.setThrottledTargetFrameInterval(b);
k.frameRateApi.setIdleSecondsBeforeThrottle(d);k.frameRateApi.setThrottleWhenIdleEnabled(e);g=!0};this.ready=function(){return g};this.setTargetVSyncInterval=function(n){a=n;g&&k.frameRateApi.setTargetVSyncInterval(a)};this.setThrottledTargetFrameInterval=function(n){b=n;g&&k.frameRateApi.setThrottledTargetFrameInterval(b)};this.setIdleSecondsBeforeThrottle=function(n){d=n;g&&k.frameRateApi.setIdleSecondsBeforeThrottle(d)};this.setThrottleWhenIdleEnabled=function(n){e=n;g&&k.frameRateApi.setThrottleWhenIdleEnabled(e)};
this.cancelThrottle=function(){g&&k.frameRateApi.cancelThrottle()}}r=r("./map_module");p.prototype=r;u.exports=p},{"./map_module":43}],33:[function(r,u,v){function p(k){var f={},l=[],c=!1,h=function(){l.forEach(function(b){a(b)});l=[]},a=function(b){var d=k.heatmapApi.createHeatmap(b);f[d]=b;return d};this.addHeatmap=function(b){c?a(b):l.push(b)};this.removeHeatmap=function(b){if(c){var d=Object.keys(f).find(function(e){return f[e]===b});void 0!==d&&(k.heatmapApi.destroyHeatmap(d),delete f[d])}else d=
l.indexOf(b),-1<d&&l.splice(d,1)};this.onUpdate=function(){c&&Object.keys(f).forEach(function(b){k.heatmapApi.updateNativeState(b,f[b])})};this.onInitialized=function(){c=!0;h()}}r=r("./map_module");p.prototype=r;u.exports=p},{"./map_module":43}],34:[function(r,u,v){var p=function(k,f){var l=!1,c=function(h){l&&(f.style.transform="rotate("+(h||0)/1E3*360%360+"deg)",k.requestAnimationFrame(c))};this.startSpinning=function(){l=!0;c()};this.stopSpinning=function(){l=!1}};u.exports=function(k,f,l,c,h,
a,b,d,e){var g=function(n,m,q,t){m=k.createElement(m);for(var w in q)m.setAttribute(w,q[w]);for(var y in t)m.style[y]=t[y];n.appendChild(m);return m};this.mapContainer=function(n){n=g(n,"div",{"class":"wrld-map-container",id:d},{position:"relative",width:"100%",height:"100%","line-height":"0px",padding:"0px",margin:"0px",overflow:"hidden",cursor:"default"});var m=document.createElement("style");m.type="text/css";m.innerHTML=".leaflet-dragging .wrld-map-container { cursor: move; cursor: -webkit-grabbing; cursor: -moz-grabbing; }";
document.head.appendChild(m);n.onmousedown=function(q){if(1===q.button)return!1};"undefined"===typeof n.onwheel&&(n.onwheel=null);return n}(l);this.loadingSpinnerIcon=g(this.mapContainer,"div",{},{position:"absolute",width:"18px",height:"18px","z-index":"20","background-image":"url('https://cdn-webgl.wrld3d.com/wrldjs/resources/loading_spinner.png')"});this.overlay=g(this.mapContainer,"div",{"class":"wrld-leaflet-overlay"},{position:"absolute",overflow:"hidden",width:"100%",height:"100%",background:"transparent",
"pointer-events":"none"});this.indoorMapWatermark=g(this.mapContainer,"img",{id:"wrld-indoor-map-watermark"+e,"class":"wrld-indoor-map-watermark",draggable:"false"},{position:"absolute","z-index":"20",display:"block",margin:"auto auto 0 auto",left:"0",right:"0",bottom:"-50px",transition:"all 500ms"});this.canvas=g(this.mapContainer,"canvas",{"class":"wrld-map-canvas",id:c,oncontextmenu:"event.preventDefault();",width:h.toString(),height:a.toString()},{"background-color":b});this.loadingSpinner=new p(f,
this.loadingSpinnerIcon);this.loadingSpinner.startSpinning();this.onInitialized=function(){this.loadingSpinner.stopSpinning();this.loadingSpinnerIcon.parentNode.removeChild(this.loadingSpinnerIcon)};this.onError=function(n){this.loadingSpinner.stopSpinning();g(this.mapContainer,"div",{"class":"wrld-error-message"},{position:"absolute",left:"0px",bottom:"0px","line-height":"normal",color:"white","font-family":"sans-serif","font-weight":"bold",margin:"0.5em"}).textContent=n};this.width=function(){return this.mapContainer.clientWidth};
this.height=function(){return this.mapContainer.clientHeight}}},{}],35:[function(r,u,v){u.exports=function(){var p={};this.insertObject=function(k,f){p[k]=f;return k};this.removeObjectById=function(k){var f=p[k];delete p[k];return f};this.idForObject=function(k){for(var f in p)if(p[f]===k)return f;return null};this.getObjectById=function(k){return p[k]};this.forEachItem=function(k){for(var f in p)k(f,p[f])}}},{}],36:[function(r,u,v){var p=r("../public/marker");u.exports=function(k,f){var l={},c=L.layerGroup([]),
h=L.icon({iconUrl:"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor_map_entrance_marker.png",iconRetinaUrl:"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor_map_entrance_marker@2.png",iconSize:[48,48],iconAnchor:[24,48]}),a=function(d){var e=p.marker(d.getLatLng(),{title:d.getIndoorMapName(),icon:h});e.on("click",function(){f.enter(d)});return e},b=function(){k.addLayer(c)};b();f.on("indoorentranceadd",function(d){var e=d.entrance;d=e.getIndoorMapId();e=a(e);e.addTo(c);l[d]=e});f.on("indoorentranceremove",
function(d){d=d.entrance.getIndoorMapId();c.removeLayer(l[d]);delete l[d]});f.on("indoormapenter",function(){k.removeLayer(c)});f.on("indoormapexit",b)}},{"../public/marker":77}],37:[function(r,u,v){function p(f){var l={},c={},h=[],a=!1,b=null,d=function(){h.forEach(function(m){e(m)});h=[]},e=function(m){var q=f.indoorMapEntityInformationApi.createIndoorMapEntityInformation(m);l[q]=m;m._setNativeHandle(q);q in c&&(delete c[q],n(q));return q};this.addIndoorMapEntityInformation=function(m){a?e(m):h.push(m)};
this.removeIndoorMapEntityInformation=function(m){if(a){var q=m.getNativeId();void 0!==q&&(f.indoorMapEntityInformationApi.destroyIndoorMapEntityInformation(q),delete l[q],m._setNativeHandle(null))}else m=h.indexOf(m),-1<m&&h.splice(m,1)};this.onInitialized=function(){a=!0;f.indoorMapEntityInformationApi.registerIndoorMapEntityInformationChangedCallback(g);d()};this.setIndoorMapEntityInformationChangedCallback=function(m){b=m};var g=function(m){m in l?n(m):c[m]=!0},n=function(m){var q=l[m];m=f.indoorMapEntityInformationApi.tryGetIndoorMapEntityInformation(m);
null!==m&&q._setData(m);null!==b&&b(q)}}function k(f){var l=new p(f),c=this,h=function(a){c.fire("indoormapentityinformationchanged",{indoorMapEntityInformation:a})};this.onInitialized=function(){l.setIndoorMapEntityInformationChangedCallback(h);l.onInitialized()};this._getImpl=function(){return l}}r=r("./map_module");r=L.extend({},r,L.Mixin.Events);k.prototype=r;u.exports=k},{"./map_module":43}],38:[function(r,u,v){function p(f){var l={},c={},h=[],a=!1,b=null,d=function(){h.forEach(function(m){e(m)});
h=[]},e=function(m){var q=f.indoorMapFloorOutlineInformationApi.createIndoorMapFloorOutlineInformation(m);l[q]=m;m._setNativeHandle(q);q in c&&(delete c[q],n(q));return q};this.addIndoorMapFloorOutlineInformation=function(m){a?e(m):h.push(m)};this.removeIndoorMapFloorOutlineInformation=function(m){if(a){var q=m.getId();void 0!==q&&(f.indoorMapFloorOutlineInformationApi.destroyIndoorMapFloorOutlineInformation(q),delete l[q],m._setNativeHandle(null))}else m=h.indexOf(m),-1<m&&h.splice(m,1)};this.onInitialized=
function(){a=!0;f.indoorMapFloorOutlineInformationApi.registerIndoorMapFloorOutlineInformationLoadedCallback(g);d()};this.setIndoorMapFloorOutlineInformationLoadedCallback=function(m){b=m};var g=function(m){m in l?n(m):c[m]=!0},n=function(m){var q=l[m];f.indoorMapFloorOutlineInformationApi.getIndoorMapFloorOutlineInformationLoaded(m)&&(m=f.indoorMapFloorOutlineInformationApi.tryGetIndoorMapFloorOutlineInformation(m),null!==m&&(q._setData(m),null!==b&&b(q)))}}function k(f){var l=new p(f),c=this,h=
function(a){c.fire("indoormapflooroutlineinformationloaded",{indoorMapFloorOutlineInformation:a})};this.onInitialized=function(){l.setIndoorMapFloorOutlineInformationLoadedCallback(h);l.onInitialized()};this._getImpl=function(){return l}}r=r("./map_module");r=L.extend({},r,L.Mixin.Events);k.prototype=r;u.exports=k},{"./map_module":43}],39:[function(r,u,v){v=u.exports={};var p=function(f,l){return"undefined"===typeof f.options?null:l in f.options?f.options[l]:null};v.getIndoorMapId=function(f){f=p(f,
"indoorMapId");return""===f?null:f};v.hasIndoorMap=function(f){return null!==this.getIndoorMapId(f)};v.getIndoorMapFloorId=function(f){return p(f,"indoorMapFloorId")};v.getIndoorMapFloorIndex=function(f){var l=p(f,"indoorMapFloorIndex");return null!==l?l:p(f,"indoorFloorIndex")};v.getLayerDisplayOption=function(f){return p(f,"displayOption")||"currentFloor"};v.matchesCurrentFloor=function(f,l,c){return f===this.getIndoorMapFloorId(c)?!0:l===this.getIndoorMapFloorIndex(c)};v.matchesIndoorMap=function(f,
l,c,h){var a=this.getLayerDisplayOption(h);return"always"===a||"currentIndoorMap"===a&&f===this.getIndoorMapId(h)||"currentFloor"===a&&f===this.getIndoorMapId(h)&&this.matchesCurrentFloor(l,c,h)?!0:!1};var k=function(f,l,c,h){c in f&&(h in l||(l[h]=f[c]))};v.copyIndoorMapOptions=function(f,l){k(f,l,"indoorMapId","indoorMapId");k(f,l,"indoorMapFloorId","indoorMapFloorId");k(f,l,"indoorMapFloorIndex","indoorMapFloorIndex");k(f,l,"indoorFloorIndex","indoorMapFloorIndex")}},{}],40:[function(r,u,v){u.exports=
function(p,k){var f=null,l="wrld-indoor-map-watermark"+p,c=function(h){h=h.toLowerCase();"eegeo"===h&&(h="wrld");return"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor-vendors/"+h+"_logo.png"};(function(){["eegeo","micello"].forEach(function(h){h=c(h);(new Image).src=h})})();this.showWatermarkForVendor=function(h){if("eegeo"!==h||k)h=c(h),null===f&&(f=document.getElementById(l)),f.src=h,f.style.bottom=0};this.hideWatermark=function(){null!==f&&(f.style.bottom="-50px")}}},{}],41:[function(r,u,
v){v=r("./map_module");var p=r("../public/indoors/indoors"),k=r("./indoor_watermark_controller");r=function(f,l,c,h,a,b,d,e,g,n){var m=null,q={},t=!1,w=null,y=!1,H=new k(c,g),F=n,C=this,I=function(){try{var E=JSON.parse(f.indoorsApi.getActiveIndoorMapUserData())}catch(Q){return[]}if("object"!==typeof E.search_menu_items||!(E.search_menu_items.items instanceof Array))return[];var N=[];E.search_menu_items.items.forEach(function(Q){N.push({name:Q.name,search_tag:Q.search_tag,icon_key:Q.icon_key})});
return N},x=function(){for(var E=f.indoorsApi.getActiveIndoorMapId(),N=f.indoorsApi.getActiveIndoorMapName(),Q=f.indoorsApi.getActiveIndoorMapSourceVendor(),W=f.indoorsApi.getActiveIndoorMapFloorCount(),fa=[],aa=0;aa<W;++aa){var Z=aa,K=f.indoorsApi.getFloorName(aa),U=f.indoorsApi.getFloorShortName(aa),S=f.indoorsApi.getFloorNumber(aa);Z=new p.IndoorMapFloor(S,Z,K,U);fa.push(Z)}aa=I();m=new p.IndoorMap(E,N,Q,W,fa,aa,C.exit);C.fire("indoormapenter",{indoorMap:m})},D=function(){C.fire("indoormapenterfailed",
{})},z=function(){var E=m;m=null;H.hideWatermark();C.fire("indoormapexit",{indoorMap:E})},B=function(){C.fire("indoormapfloorchange",{floor:C.getFloor()})},A=function(E,N,Q){E=new p.IndoorMapEntrance(E,N,L.latLng([Q.lat,Q.lng]));q[E.getIndoorMapId()]=E;C.fire("indoorentranceadd",{entrance:E})},J=function(E,N,Q){E=new p.IndoorMapEntrance(E,N,Q);delete q[E.getIndoorMapId()];C.fire("indoorentranceremove",{entrance:E})},O=function(E){C.fire("indoormapload",{indoorMapId:E})},P=function(E){C.fire("indoormapunload",
{indoorMapId:E})},T=function(E){E=E.split("|");C.fire("indoorentityclick",{ids:E})},M=function(){C.fire("collapsestart")},X=function(){C.fire("collapse")},V=function(){C.fire("collapseend")},Y=function(){C.fire("expandstart")},R=function(){C.fire("expand")},ea=function(){C.fire("expandend")},da=function(E){y=!0;t?(f.cameraApi.setView({location:E.latLng,distance:E.distance,allowInterruption:!1,headingDegrees:E.orientation}),l._setIndoorTransitionCompleteEventListener(function(){var N=E.indoorMapId;
C.fire("indoormapenterrequested");f.indoorsApi.enterIndoorMap(N)}),C.once("indoormapenter",function(){y=!1;var N=m.getIndoorMapSourceVendor();H.showWatermarkForVendor(N)}),C.once("indoormapenterfailed",function(){y=!1})):w=E};this.onInitialized=function(){f.indoorsApi.onInitialized();f.indoorsApi.setNotificationCallbacks(x,D,z,B,A,J,O,P);f.indoorEntityApi.onInitialized();f.indoorEntityApi.registerIndoorEntityPickedCallback(T);f.expandFloorsApi.setCollapseStartCallback(M);f.expandFloorsApi.setCollapseCallback(X);
f.expandFloorsApi.setCollapseEndCallback(V);f.expandFloorsApi.setExpandStartCallback(Y);f.expandFloorsApi.setExpandCallback(R);f.expandFloorsApi.setExpandEndCallback(ea);f.indoorsApi.setBackgroundColor(F)};this.onInitialStreamingCompleted=function(){t=!0;if(h&&(this.enter(h,{latLng:b,zoom:e,indoorMapId:h,orientation:d}),a))this.once("indoormapenter",function(){this.setFloor(Number(a))});null!==w&&(da(w),w=null)};this.exit=function(){f.ready()&&(f.indoorsApi.exitIndoorMap(),H.hideWatermark());w=null;
y=!1;return this};this.isIndoors=function(){return null!==m};this.getActiveIndoorMap=function(){return m};this.getFloor=function(){if(this.isIndoors()){var E=f.indoorsApi.getSelectedFloorIndex();return m.getFloors()[E]}return null};this.setFloor=function(E){if(!this.isIndoors())return!1;var N=null,Q=m.getFloors();if("number"===typeof E)N=E;else if("object"===typeof E)E=Q.indexOf(E),N=0<=E?E:null;else if("string"===typeof E)for(var W=0;W<Q.length;++W)if(Q[W].getFloorShortName()===E){N=W;break}return null!==
N?f.indoorsApi.setSelectedFloorIndex(N):!1};this.moveUp=function(E){E="undefined"===typeof E?1:E;var N=this.getFloor();return null===N?!1:this.setFloor(N.getFloorIndex()+E)};this.moveDown=function(E){return this.moveUp("undefined"===typeof E?-1:-E)};this.enter=function(E,N){if(this.isIndoors()||y)return!1;var Q=null;"object"===typeof E&&"getIndoorMapId"in E&&"function"===typeof E.getIndoorMapId?Q=E.getIndoorMapId():"string"===typeof E&&(Q=E);E=q[Q]||null;var W=null;null!==E?W=E.getLatLng():N&&N.latLng&&
(W=N.latLng);if(null===W)return!1;N||(N={latLng:W,distance:400,indoorMapId:Q,orientation:0});da(N);return!0};this.getFloorInterpolation=function(){return null!==m?f.expandFloorsApi.getFloorParam()/m.getFloorCount():0};this.getFloorHeightAboveSeaLevel=function(E){return this.isIndoors()&&0<=E&&E<m.getFloorCount()?f.indoorsApi.getFloorHeightAboveSeaLevel(E):null};this.tryGetReadableName=function(E){return f.ready()?f.indoorsApi.tryGetReadableName(E):null};this.tryGetFloorReadableName=function(E,N){return f.ready()?
f.indoorsApi.tryGetFloorReadableName(E,N):null};this.tryGetFloorShortName=function(E,N){return f.ready()?f.indoorsApi.tryGetFloorShortName(E,N):null};this.setFloorInterpolation=function(E){null!==m&&(E*=m.getFloorCount(),f.expandFloorsApi.setFloorParam(E));return this};this.setFloorFromInterpolation=function(E){if(null===m)return!1;E="undefined"===typeof E?this.getFloorInterpolation():E;E=Math.round(E*m.getFloorCount());return this.setFloor(E)};this.expand=function(){f.expandFloorsApi.expandIndoorMap();
return this};this.collapse=function(){f.expandFloorsApi.collapseIndoorMap();return this};this.setEntityHighlights=function(E,N,Q){t&&(Q=ca(Q),f.indoorEntityApi.setHighlights(E,N,Q))};this.clearEntityHighlights=function(E,N){t&&(N=ca(N),f.indoorEntityApi.clearHighlights(E,N))};var ca=function(E){void 0!==E&&null!==E||null===m||(E=m.getIndoorMapId());return E};this.setBackgroundColor=function(E){F=E;t&&f.indoorsApi.setBackgroundColor(E)}};v=L.extend({},v,L.Mixin.Events);r.prototype=v;u.exports=r},{"../public/indoors/indoors":76,
"./indoor_watermark_controller":40,"./map_module":43}],42:[function(r,u,v){v=r("./map_module");var p=r("./indoor_map_layer_options.js"),k=r("./elevation_mode.js"),f=L.point(-100,-100);r=function(l){var c=null,h=!1,a={},b=this,d=[];this.onInitialized=function(){h=!0;c=l.spacesApi;this._createPendingLayers()};var e=function(g){return g.reduce(function(n,m){return n.concat(Array.isArray(m)?e(m):m)},[])};this._getLayerId=function(g){return L.stamp(g)};this._useWrldSdkPointMappingForLayer=function(g){return"function"!==
typeof g.getLatLng&&"function"!==typeof g.getLatLngs?!1:!0};this._createAndAdd=function(g){if(this._useWrldSdkPointMappingForLayer(g)){var n=this._getLayerId(g);n in a&&this.removePointMapping(g);var m="function"===typeof g.getLatLngs?g.getLatLngs():[g.getLatLng()];m=e(m);var q=g.options.elevation||0,t=k.getElevationModeInt(g.options.elevationMode),w=l.layerPointMappingApi,y=p.getIndoorMapId(g),H=p.getIndoorMapFloorIndex(g);!0===(null!==y&&null!==H)?w.createPointMappingWithFloorIndex(n,q,t,y,H,m):
(g=p.getIndoorMapFloorId(g),H=null!==y&&null!==g,w.createPointMapping(n,q,t,!0===H?y:"",!0===H?g:0,m));a[n]=w.getLatLngsForLayer(n,m.length)}};this._createPendingLayers=function(){d.forEach(function(g){b._createAndAdd(g)});d=[]};this.createPointMapping=function(g){this._useWrldSdkPointMappingForLayer(g)&&(h?this._createAndAdd(g):d.push(g))};this.removePointMapping=function(g){h?(g=this._getLayerId(g),g in a&&(l.layerPointMappingApi.removePointMapping(g),delete a[g])):(g=d.indexOf(g),-1<g&&d.splice(g,
1))};this._updateMappings=function(){if(h){var g=l.layerPointMappingApi,n;for(n in a)a[n]=g.getLatLngsForLayer(n,a[n].length)}};this.onDraw=function(){h&&this._updateMappings()};this._getDefaultLatLngsFromLayer=function(g){return"function"===typeof g.getLatLngs?g.getLatLngs():"function"===typeof g.getLatLng?[g.getLatLng()]:null};this.latLngsForLayer=function(g){if(!h)return this._getDefaultLatLngsFromLayer(g);var n=this._getLayerId(g);return n in a?a[n]:this._getDefaultLatLngsFromLayer(g)};this.projectLatlngs=
function(g,n,m,q){if(!h||!this._useWrldSdkPointMappingForLayer(g))return!1;g=this.latLngsForLayer(g);if(null===g)return!1;this._projectLatlngsRecursive(n,g,0,m,q);return!0};this._latLngToLayerPoint=function(g){return h?c.worldToScreen(g).toPoint():f};this._projectLatlngsRecursive=function(g,n,m,q,t){var w=g.length,y;if(g[0]instanceof L.LatLng){g=[];for(y=0;y<w;y++,m++)g[y]=this._latLngToLayerPoint(n[m]),t.extend(g[y]);q.push(g)}else for(y=0;y<w;y++)m=this._projectLatlngsRecursive(g[y],n,m,q,t);return m}};
r.prototype=v;u.exports=r},{"./elevation_mode.js":7,"./indoor_map_layer_options.js":39,"./map_module":43}],43:[function(r,u,v){u.exports={onUpdate:function(p){},onDraw:function(p){},onInitialized:function(){},onInitialStreamingCompleted:function(){}}},{}],44:[function(r,u,v){function p(k){var f=!1;this.Pause=function(){if(f)k.mapRuntimeApi.onPause()};this.Resume=function(){if(f)k.mapRuntimeApi.onResume()};this.onInitialized=function(){f=!0}}r=r("./map_module");p.prototype=r;u.exports=p},{"./map_module":43}],
45:[function(r,u,v){Array.prototype.findIndex||(Array.prototype.findIndex=function(p,k){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!==typeof p)throw new TypeError("predicate must be a function");for(var f=Object(this),l=f.length>>>0,c,h=0;h<l;h++)if(c=f[h],p.call(k,c,h,f))return h;return-1});Array.prototype.find||(Array.prototype.find=function(p,k){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==
typeof p)throw new TypeError("predicate must be a function");for(var f=Object(this),l=f.length>>>0,c,h=0;h<l;h++)if(c=f[h],p.call(k,c,h,f))return c})},{}],46:[function(r,u,v){function p(k){var f={},l=[],c=!1,h=function(){l.forEach(function(b){a(b)});l=[]},a=function(b){var d=k.geofenceApi.createGeofence(b.getPoints(),b.getHoles(),b._getConfig());f[d]=b;return d};this.addPolygon=function(b){c?a(b):l.push(b)};this.removePolygon=function(b){if(c){var d=Object.keys(f).find(function(e){return f[e]===b});
void 0!==d&&(k.geofenceApi.removeGeofence(d),delete f[d])}else d=l.indexOf(b),-1<d&&l.splice(d,1)};this.onUpdate=function(){c&&Object.keys(f).forEach(function(b){var d=f[b];d._colorNeedsChanged()&&(k.geofenceApi.setGeofenceColor(b,d.getColor()),d._onColorChanged())})};this.onInitialized=function(){c=!0;h()}}r=r("./map_module");p.prototype=r;u.exports=p},{"./map_module":43}],47:[function(r,u,v){var p=r("leaflet"),k=r("./elevation_mode.js"),f=p.Polygon.extend({options:{elevation:0,elevationMode:k.ElevationModeType.HEIGHT_ABOVE_GROUND},
_projectLatlngs:function(l,c,h){this._map._projectLatlngs(this,l,c,h)||p.Polygon.prototype._projectLatlngs.call(this,l,c,h)},setLatLngs:function(l){this._setLatLngs(l);this._map&&this._map._createPointMapping(this);return this.redraw()},_convertLatLngs:function(l){l=p.Polygon.prototype._convertLatLngs.call(this,l);this._map&&this._map._createPointMapping(this);return l},getElevation:function(){return this.options.elevation},setElevation:function(l){this.options.elevation=l;null!==this._map&&this._map._createPointMapping(this);
return this},setElevationMode:function(l){k.isValidElevationMode(l)&&(this.options.elevationMode=l,null!==this._map&&this._map._createPointMapping(this));return this},getElevationMode:function(){return this.options.elevationMode}});u.exports={PolygonShim:f,polygonShim:function(l,c){return new f(l,c)}}},{"./elevation_mode.js":7,leaflet:1}],48:[function(r,u,v){function p(k){var f={},l=[],c=!1,h=function(){l.forEach(function(b){a(b)});l=[]},a=function(b){var d=k.polylineApi.createPolyline(b);f[d]=b;
return d};this.addPolyline=function(b){c?a(b):l.push(b)};this.removePolyline=function(b){if(c){var d=Object.keys(f).find(function(e){return f[e]===b});void 0!==d&&(k.polylineApi.destroyPolyline(d),delete f[d])}else d=l.indexOf(b),-1<d&&l.splice(d,1)};this.onUpdate=function(){c&&Object.keys(f).forEach(function(b){k.polylineApi.updateNativeState(b,f[b])})};this.onInitialized=function(){c=!0;h()}}r=r("./map_module");p.prototype=r;u.exports=p},{"./map_module":43}],49:[function(r,u,v){var p=r("leaflet"),
k=r("./elevation_mode.js"),f=p.Polyline.extend({options:{elevation:0,elevationMode:k.ElevationModeType.HEIGHT_ABOVE_GROUND},_projectLatlngs:function(l,c,h){this._map._projectLatlngs(this,l,c,h)||p.Polyline.prototype._projectLatlngs.call(this,l,c,h)},setLatLngs:function(l){l=p.Polyline.prototype.setLatLngs.call(this,l);this._map&&this._map._createPointMapping(this);return l},addLatLng:function(l,c){l=p.Polyline.prototype.addLatLng.call(this,c);this._map&&this._map._createPointMapping(this);return l},
getElevation:function(){return this.options.elevation},setElevation:function(l){this.options.elevation=l;null!==this._map&&this._map._createPointMapping(this);return this},setElevationMode:function(l){k.isValidElevationMode(l)&&(this.options.elevationMode=l,null!==this._map&&this._map._createPointMapping(this));return this},getElevationMode:function(){return this.options.elevationMode}});u.exports={PolylineShim:f,polylineShim:function(l,c){return new f(l,c)}}},{"./elevation_mode.js":7,leaflet:1}],
50:[function(r,u,v){v=r("./map_module");var p=r("./id_to_object_map"),k=r("../public/precaching/precache_operation_result"),f=function(c){this.cancel=function(){c.cancel()}},l=function(c,h,a){var b=L.latLng(c),d=!1;this.getCentre=function(){return b};this.getRadius=function(){return h};this.cancel=function(){d=!0};this.isCancelled=function(){return d};this.notifyComplete=function(){a(new k(!0))};this.notifyCancelled=function(){a(new k(!1))}};r=function(c){var h=new p,a=[],b=!1,d=function(q){var t=
c.precacheApi.beginPrecacheOperation(q);h.insertObject(t,q);return t},e=function(){a.forEach(function(q){q.isCancelled()?q.notifyCancelled():d(q)});a=[]},g=function(q){q.forEach(function(t){c.precacheApi.cancelPrecacheOperation(t)})},n=function(q){h.removeObjectById(q).notifyComplete()},m=function(q){h.removeObjectById(q).notifyCancelled()};this.getMaximumPrecacheRadius=function(){return 16E3};this.precache=function(q,t,w){var y=16E3<t||0>=t?Error("radius outside of valid (0.0, 16000] range."):null;
if(null!==y)throw y;q=new l(q,t,w);b?(t=d(q),h.insertObject(t,q)):a.push(q);return new f(q)};this.onInitialized=function(){b=!0;c.precacheApi.registerCallbacks(n,m);e()};this.onUpdate=function(q){if(b){var t=[];h.forEachItem(function(w,y){y.isCancelled()&&t.push(w)});g(t)}}};r.prototype=v;u.exports=r},{"../public/precaching/precache_operation_result":81,"./id_to_object_map":35,"./map_module":43}],51:[function(r,u,v){v=r("./map_module");var p=r("./id_to_object_map");r=function(k){var f=[],l=new p,
c=!1,h=!1,a="",b=!1,d=!1,e=this,g=function(m){for(var q=[],t=[],w=[],y=[],H=[],F=[],C=[],I=[],x=[],D=0;D<m.length;++D){var z=m[D];q.push(z.getIndoorMapId());t.push(z.getIndoorMapFloorId());w.push(z.getName());y.push(z.getLocation().lat);H.push(z.getLocation().lng);F.push(z.getElevation());C.push(z.getElevationMode());I.push(z.getHeadingDegrees());x.push(z.getGeometryId())}q=k.propsApi.createProps(q,t,w,y,H,F,C,I,x);for(D=0;D<q.length;++D)l.insertObject(q[D],m[D])},n=function(m,q){e.fire("indoormappopulationrequestcomplete",
{succeeded:0===m?!1:!0,httpStatusCode:q})};this.addProp=function(m){if(d){var q=k.propsApi.createProp(m.getIndoorMapId(),m.getIndoorMapFloorId(),m.getName(),m.getLocation().lat,m.getLocation().lng,m.getElevation(),m.getElevationMode(),m.getHeadingDegrees(),m.getGeometryId());l.insertObject(q,m)}else f.push(m)};this.addProps=function(m){d?g(m):f=f.concat(m)};this.removeProp=function(m){d&&0===f.length?(m=l.idForObject(m),null!==m&&(k.propsApi.destroyProp(m),l.removeObjectById(m))):(m=f.indexOf(m),
-1<m&&f.splice(m,1))};this.removeProps=function(m){var q=0;if(d&&0===f.length){for(var t=[];q<m.length;++q){var w=l.idForObject(m[q]);l.removeObjectById(w);t.push(parseInt(w))}k.propsApi.destroyProps(t)}else for(;q<m.length;++q)t=f.indexOf(m[q]),-1<t&&f.splice(t,1)};this.onInitialized=function(){d=!0;0!==f.length&&(g(f),f=[]);c&&this.setAutomaticIndoorMapPopulationEnabled(h);b&&this.setIndoorMapPopulationServiceUrl(a);k.propsApi.setIndoorMapPopulationRequestCompletedCallback(n)};this.onUpdate=function(m){d&&
l.forEachItem(function(q,t){t._locationNeedsChanged()&&(k.propsApi.setLocation(q,t.getLocation().lat,t.getLocation().lng),t._onLocationChanged());t._headingDegreesNeedsChanged()&&(k.propsApi.setHeadingDegrees(q,t.getHeadingDegrees()),t._onHeadingDegreesChanged());t._elevationNeedsChanged()&&(k.propsApi.setElevation(q,t.getElevation()),t._onElevationChanged());t._elevationModeNeedsChanged()&&(k.propsApi.setElevationMode(q,t.getElevationMode()),t._onElevationModeChanged());t._geometryIdNeedsChanged()&&
(k.propsApi.setGeometryId(q,t.getGeometryId()),t._onGeometryIdChanged())})};this.setAutomaticIndoorMapPopulationEnabled=function(m){d?k.propsApi.setAutomaticIndoorMapPopulationEnabled(m):(h=m,c=!0)};this.isAutomaticIndoorMapPopulationEnabled=function(){return d?k.propsApi.isAutomaticIndoorMapPopulationEnabled():h};this.setIndoorMapPopulationServiceUrl=function(m){if(d)return k.propsApi.setIndoorMapPopulationServiceUrl(m);a=m;b=!0}};v=L.extend({},v,L.Mixin.Events);r.prototype=v;u.exports=r},{"./id_to_object_map":35,
"./map_module":43}],52:[function(r,u,v){var p=r("leaflet"),k=r("./elevation_mode.js"),f=p.Rectangle.extend({options:{elevation:0,elevationMode:k.ElevationModeType.HEIGHT_ABOVE_GROUND},_projectLatlngs:function(l,c,h){this._map._projectLatlngs(this,l,c,h)||p.Rectangle.prototype._projectLatlngs.call(this,l,c,h)},setLatLngs:function(l){l=p.Rectangle.prototype.setLatLngs.call(this,l);this._map&&this._map._createPointMapping(this);return l},getElevation:function(){return this.options.elevation},setElevation:function(l){this.options.elevation=
l;null!==this._map&&this._map._createPointMapping(this);return this},setElevationMode:function(l){k.isValidElevationMode(l)&&(this.options.elevationMode=l,null!==this._map&&this._map._createPointMapping(this));return this},getElevationMode:function(){return this.options.elevationMode}});u.exports={RectangleShim:f,rectangleShim:function(l,c){return new f(l,c)}}},{"./elevation_mode.js":7,leaflet:1}],53:[function(r,u,v){function p(k,f){var l=!1,c=f,h=!1;this.onInitialized=function(){k.renderingApi.setClearColor(c);
k.renderingApi.setMapCollapsed(l);h=!0};this.ready=function(){return h};this.setMapCollapsed=function(a){l=a;h&&k.renderingApi.setMapCollapsed(l)};this.isMapCollapsed=function(a){return l};this.setClearColor=function(a){c=a;h&&k.renderingApi.setClearColor(c)};this.getCameraRelativePosition=function(a){return h?k.renderingApi.getCameraRelativePosition(a):null};this.getNorthFacingOrientationMatrix=function(a){return h?k.renderingApi.getNorthFacingOrientationMatrix(a):null};this.getCameraProjectionMatrix=
function(){return h?k.renderingApi.getCameraProjectionMatrix():null};this.getCameraOrientationMatrix=function(){return h?k.renderingApi.getCameraOrientationMatrix():null};this.getLightingData=function(){return h?k.renderingApi.getLightingData():null}}r=r("./map_module");p.prototype=r;u.exports=p},{"./map_module":43}],54:[function(r,u,v){r=r("./map_module");v=function(p,k){var f=function(a,b){b="{"+b+":";var d=a.indexOf(b);return-1!==d&&(a=a.slice(d+b.length),b=a.indexOf("}"),-1!==b)?a.substring(0,
b):null},l=function(a){a=a.routes;for(var b=[],d=0;d<a.length;++d)for(var e=a[d].legs,g=0;g<e.length;++g){for(var n=e[g].steps,m=[],q=0;q<n.length;q++){var t=n[q].name,w=f(t,"level");if("multiple"!==w){var y={},H=[];y.indoorMapId=f(t,"bid");"e2657c93-2d13-412a-89fe-0949a14e7eea"===y.indoorMapId?y.indoorMapId="westport_house":"c857d08d-7de1-4447-9ff8-6747649a00e0"===y.indoorMapId&&(y.indoorMapId="70f9b00f-8c4f-4570-9a23-62bd80a76f8a");w&&(y.indoorMapFloorId=parseInt(w));t=n[q].geometry.coordinates;
for(w=0;w<t.length;w++){var F=t[w];H.push([F[1],F[0]])}y.points=H;m.push(y)}}b.push(m)}return b},c=function(a,b){return function(){var d=JSON.parse(this.responseText);if("Ok"===d.code)if("type"in d&&"multipart"===d.type)for(var e=d.routes,g=0;g<e.length;++g)d=l(e[g]),a(d);else d=l(d),a(d);else null!==b&&void 0!==b&&b(d)}},h=function(a){return function(){a.abort()}};this.getRoute=function(a,b,d,e){e=e||"walking";for(var g="https://routing.wrld3d.com/v1/route?loc=",n=0;n<a.length;++n)g+=a[n].join(","),
n<a.length-1&&(g+="%3B");g+="&apikey="+p;a=new XMLHttpRequest;a.open("GET",g+"&limit=400&travelmode="+e,!0);a.onload=c(b,d);k.on("indoormapexit",h(a));a.send()}};v.prototype=r;u.exports=v},{"./map_module":43}],55:[function(r,u,v){v=r("./map_module");var p=r("../public/themes");r=function(k){var f=!1,l="Summer",c="Day",h="Default",a=!1,b=!1,d=function(){f&&(a&&(k.themesApi.setTheme(l),a=!1),b&&(k.themesApi.setState(c+h,1),b=!1))},e=function(n,m,q){var t=function(y){var H=[],F;for(F in y)H.push(y[F]);
return H},w=function(y,H){var F=y.toUpperCase();return(H=H.find(function(C){return 0===F.localeCompare(C.toUpperCase())}))?H:y};return{season:w(n,t(p.season)),time:w(m,t(p.time)),weather:w(q,t(p.weather))}},g=function(){f=!0;d()};this.setTheme=function(n,m,q){n=e(n,m,q);n.season!==l&&(a=!0);if(n.time!==c||n.weather!==h)b=!0;l=n.season;c=n.time;h=n.weather;d()};this.setSeason=function(n){this.setTheme(n,c,h)};this.setTime=function(n){this.setTheme(l,n,h)};this.setWeather=function(n){this.setTheme(l,
c,n)};this.setEnvironmentThemesManifest=function(n){f&&k.themesApi.setThemeManifest(n)};this.onInitialized=function(){k.themesApi.registerStreamingCompletedCallback(g)}};r.prototype=v;u.exports=r},{"../public/themes":84,"./map_module":43}],56:[function(r,u,v){function p(k){var f=!1;this.getVersion=function(){return f?k.versionApi.getPlatformVersion():null};this.getVersionHash=function(){return f?k.versionApi.getPlatformVersionHash():null};this.onInitialized=function(){f=!0}}r=r("./map_module");p.prototype=
r;u.exports=p},{"./map_module":43}],57:[function(r,u,v){u.exports=function(p,k,f){this.getBottomAltitude=function(){return p};this.getTopAltitude=function(){return k};this.getPoints=function(){return f};this.toJson=function(){return{bottom_altitude:p,top_altitude:k,points:f}}}},{}],58:[function(r,u,v){u.exports=function(p,k,f){this.getBaseAltitude=function(){return p};this.getTopAltitude=function(){return k};this.getCentroid=function(){return f};this.toJson=function(){return{base_altitude:p,top_altitude:k,
centroid:f}}}},{}],59:[function(r,u,v){var p=r("../space"),k=function(f){var l=null,c=null,h=f.getColor(),a=null;this.getColor=function(){return new p.Vector4(h)};this.getOptions=function(){return f};this.setColor=function(b){h=new p.Vector4(b);null!==c&&c.buildings._getImpl().notifyBuildingHighlightChanged(this);return this};this.getId=function(){return l};this.addTo=function(b){null!==c&&this.remove();c=b;c.buildings._getImpl().addBuildingHighlight(this);return this};this.remove=function(){null!==
c&&(c.buildings._getImpl().removeBuildingHighlight(this),c=null);return this};this._setNativeHandle=function(b){l=b};this._setBuildingInformation=function(b){a=b};this.getBuildingInformation=function(){return a}};u.exports={BuildingHighlight:k,buildingHighlight:function(f){return new k(f)}}},{"../space":83}],60:[function(r,u,v){var p=r("../space"),k={SELECT_AT_LOCATION:"selectAtLocation",SELECT_AT_SCEEN_POINT:"selectAtScreenPoint"},f=function(){var l=L.latLng([0,0]),c=L.Point(0,0),h="selectAtLocation",
a=[255,255,0,128],b=!1;this.highlightBuildingAtLocation=function(d){h=k.SELECT_AT_LOCATION;l=L.latLng(d);return this};this.highlightBuildingAtScreenPoint=function(d){h=k.SELECT_AT_SCREEN_POINT;c=L.point(d);return this};this.color=function(d){a=d;return this};this.informationOnly=function(){b=!0;return this};this.getSelectionMode=function(){return h};this.getSelectionLocation=function(){return l};this.getSelectionScreenPoint=function(){return c};this.getColor=function(){return new p.Vector4(a)};this.getIsInformationOnly=
function(){return b}};u.exports={BuildingHighlightOptions:f,buildingHighlightOptions:function(){return new f},BuildingHighlightSelectionType:k}},{"../space":83}],61:[function(r,u,v){u.exports=function(p,k,f){this.getBuildingId=function(){return p};this.getBuildingDimensions=function(){return k};this.getBuildingContours=function(){return f};this.toJson=function(){return{building_id:p,building_dimensions:k.toJson(),building_contours:f.map(function(l){return l.toJson()})}}}},{}],62:[function(r,u,v){v=
r("./building_highlight");var p=r("./building_highlight_options"),k=r("./building_information"),f=r("./building_dimensions");r=r("./building_contour");u.exports={BuildingHighlight:v.BuildingHighlight,BuildingHighlightOptions:p.BuildingHighlightOptions,buildingHighlight:v.buildingHighlight,buildingHighlightOptions:p.buildingHighlightOptions,BuildingHighlightSelectionType:p.BuildingHighlightSelectionType,BuildingInformation:k,BuildingDimensions:f,BuildingContour:r}},{"./building_contour":57,"./building_dimensions":58,
"./building_highlight":59,"./building_highlight_options":60,"./building_information":61}],63:[function(r,u,v){var p=r("../private/elevation_mode.js"),k=L.Circle.extend({options:{elevation:0,elevationMode:p.ElevationModeType.HEIGHT_ABOVE_GROUND},_project:function(){var f=this._map.latLngsForLayer(this)[0],l=f.lat,c=f.lng;f=f.alt||0;var h=this._map,a=Math.PI/180,b=this._mRadius/6378100/a,d=Math.sin(l*a),e=Math.cos(l*a);d=Math.acos((Math.cos(b*a)-d*d)/(e*e))/a;if(isNaN(d)||0===d)d=b/Math.cos(l*a);e=
h.getCameraHeadingDegrees()*a;a=[l+b*Math.cos(e),c+d*Math.sin(e),f];b=[l-b*Math.sin(e),c+d*Math.cos(e),f];this._point=h.latLngToLayerPoint([l,c,f]);this._radius=isNaN(d)?0:Math.max(Math.round(this._point.distanceTo(h.latLngToLayerPoint(b))),1);this._radiusY=Math.max(Math.round(this._point.distanceTo(h.latLngToLayerPoint(a))),1);this._updateBounds()},getElevation:function(){return this.options.elevation},setElevation:function(f){this.options.elevation=f;null!==this._map&&this._map._createPointMapping(this);
return this},setElevationMode:function(f){p.isValidElevationMode(f)&&(this.options.elevationMode=f,null!==this._map&&this._map._createPointMapping(this));return this},getElevationMode:function(){return this.options.elevationMode}});u.exports={Circle:k,circle:function(f,l,c){return new k(f,l,c)}}},{"../private/elevation_mode.js":7}],64:[function(r,u,v){var p=r("../public/popup.js"),k=r("../private/indoor_map_layer_options.js"),f=L.point(-100,-100),l=L.latLng(0,0),c=function(h){var a=h.lat*Math.PI/
180;h=h.lng*Math.PI/180;return{x:Math.cos(a)*Math.cos(h),y:Math.cos(a)*Math.sin(h),z:Math.sin(a)}};L.Renderer.include({_updateTransform:function(){}});r=L.Map.extend({initialize:function(h,a,b,d,e,g,n,m,q,t,w,y,H,F,C,I,x,D,z,B,A){this._browserWindow=h;this._cameraModule=d;this._precacheModule=e;this._polygonModule=m;this._polylineModule=q;this._layerPointMappingModule=t;this._frameRateModule=A;this.themes=g;this.indoors=n;this.routes=w;this.rendering=y;this.buildings=H;this.props=F;this.indoorMapEntities=
C;this.indoorMapFloorOutlines=I;this.blueSphere=x;this.versionModule=z;this.heatmaps=B;this._mapRuntimeModule=D;this._layersOnMap={};this._spacesApi=null;this._viewInitialized=this._ready=!1;L.Map.prototype.initialize.call(this,a,b);this.dragging.disable();this.touchZoom.disable();this.doubleClickZoom.disable();this.scrollWheelZoom.disable();this.boxZoom.disable();this.keyboard.disable();this.attributionControl.setPrefix("<a href='http://leafletjs.com' title='A JS library for interactive maps' target='_blank'>Leaflet</a>");
this.attributionControl.addAttribution("3D Maps &copy; <a href='https://www.wrld3d.com' target='_blank'>WRLD</a> and <a href='https://www.wrld3d.com/legal/' target='_blank'>partners</a>")},_initEvents:function(h,a){if(L.DomEvent&&a){this._targets={};this._targets[L.stamp(a)]=this;h=h?"off":"on";L.DomEvent[h](a,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this);L.DomEvent[h](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",
this._handleDOMEvent,this);if(this.options.trackResize)L.DomEvent[h](this._browserWindow,"resize",this._onResize,this);if(L.Browser.any3d&&this.options.transform3DLimit)this[h]("moveend",this._onMoveEnd)}},_handleDOMEvent:function(h){L.Map.prototype._handleDOMEvent.call(this,h);"contextmenu"===h.type&&L.DomEvent.preventDefault(h);if("mousedown"===h.type)for(var a=h.target;a&&"string"===typeof a.className&&"wrld-map-container"!==a.className;){if(-1!==a.className.indexOf("leaflet-marker")){L.DomEvent.stopPropagation(h);
break}a=a.parentNode}},addLayer:function(h){var a=L.stamp(h);a in this._layersOnMap||(this._createPointMapping(h),this._layersOnMap[a]=h,L.Map.prototype.addLayer.call(this,h))},removeLayer:function(h){var a=L.stamp(h);a in this._layersOnMap&&(this._removePointMapping(h),L.Map.prototype.removeLayer.call(this,h),delete this._layersOnMap[a])},onInitialized:function(h){this._spacesApi=h.spacesApi;this._ready=!0;h=this.getPanes();h.mapPane.style["z-index"]="10";h.mapPane.style["pointer-events"]="auto";
h.overlayPane.style["pointer-events"]="none";this.fire("initialize")},onInitialStreamingCompleted:function(){this.fire("initialstreamingcomplete")},latLngToLayerPoint:function(h){return this._ready?this._spacesApi.worldToScreen(h).toPoint():f},layerPointToLatLng:function(h){return(this._ready?this._spacesApi.screenToWorldPoint(h):null)||l},latLngToContainerPoint:function(h){return this.latLngToLayerPoint(h)},containerPointToLatLng:function(h){return this.layerPointToLatLng(h)},containerPointToLayerPoint:function(h){return h},
layerPointToContainerPoint:function(h){return h},latLngsForLayer:function(h){return this._layerPointMappingModule.latLngsForLayer(h)},_createPointMapping:function(h){this._layerPointMappingModule.createPointMapping(h)},_removePointMapping:function(h){this._layerPointMappingModule.removePointMapping(h)},_projectLatlngs:function(h,a,b,d){return this._layerPointMappingModule.projectLatlngs(h,a,b,d)},_updateZoom:function(){this._zoom=this.getZoom()},setView:function(h,a,b){this._viewInitialized||(L.Map.prototype.setView.call(this,
h,a,{reset:!0}),this._viewInitialized=!0);a="undefined"===typeof a?this._zoom:this._limitZoom(a);h=this._limitCenter(L.latLng(h),a,this.options.maxBounds);b=b||{};"animate"in b||(b.pan&&"animate"in b.pan?b.animate=b.pan.animate:b.zoom&&"animate"in b.zoom&&(b.animate=b.zoom.animate));"allowInterruption"in b||(b.pan&&"allowInterruption"in b.pan?b.allowInterruption=b.pan.allowInterruption:b.zoom&&"allowInterruption"in b.zoom&&(b.allowInterruption=b.zoom.allowInterruption));b.location=h;b.zoom=a;this._cameraModule.setView(b);
return this},zoomIn:function(h,a){h=h||1;h={location:this.getCenter(),zoom:this._cameraModule.getCurrentZoomLevel()+h,durationSeconds:.33,allowInterruption:!1};h.zoom<=this.getMaxZoom()&&(this.fire("zoomstart"),this.once("transitionend",function(){this.fire("zoomend")}),this._cameraModule.setView(h),this._updateZoom());return this},zoomOut:function(h,a){h=h||1;h={location:this.getCenter(),zoom:this._cameraModule.getCurrentZoomLevel()-h,durationSeconds:.33,allowInterruption:!1};h.zoom>=this.getMinZoom()&&
(this.fire("zoomstart"),this.once("transitionend",function(){this.fire("zoomend")}),this._cameraModule.setView(h),this._updateZoom());return this},setZoomAround:function(){return this},setViewVerticallyLocked:function(h){this._cameraModule.setVerticallyLocked(h)},fitBounds:function(h,a){this._cameraModule.setViewToBounds({bounds:h});return this},fitWorld:function(){return this.setZoom(0)},panTo:function(h,a){this._updateZoom();return L.Map.prototype.panTo.call(this,h,a)},panInsideBounds:function(h,
a){this._updateZoom();return L.Map.prototype.panInsideBounds.call(this,h,a)},panBy:function(){return this},getCenter:function(){return this._cameraModule.getCenter()},pause:function(){return this._mapRuntimeModule.Pause()},resume:function(){return this._mapRuntimeModule.Resume()},getZoom:function(){return this._zoom=this._cameraModule.getCurrentZoomLevel()},getBounds:function(){var h=this.layerPointToLatLng(new L.Point(0,0)),a=this.layerPointToLatLng(new L.Point(this.getContainer().clientWidth,0)),
b=this.layerPointToLatLng(new L.Point(0,this.getContainer().clientHeight)),d=this.layerPointToLatLng(new L.Point(this.getContainer().clientWidth,this.getContainer().clientHeight));return new L.LatLngBounds([h,a,b,d])},locate:function(){return this},stopLocate:function(){return this},remove:function(){return this},openPopup:function(h,a,b){h instanceof L.Popup||(h=(new p.Popup(b)).setLatLng(a).setContent(h));return L.Map.prototype.openPopup.call(this,h,a,b)},_onUpdate:function(){this.fire("update")},
_onDraw:function(){this._updateLayerVisibility();this.eachLayer(function(h){h.update?h.update():h.redraw&&h.redraw()});this.fire("draw")},getAltitudeAtLatLng:function(h){return this._ready?this._spacesApi.getAltitudeAtLatLng(h):0},getMortonKeyAtLatLng:function(h){return this._ready?this._spacesApi.getMortonKeyAtLatLng(h):null},getMortonKeyCenter:function(h){return this._ready?this._spacesApi.getMortonKeyCenter(h):null},getMortonKeyCorners:function(h,a){return this._ready?this._spacesApi.getMortonKeyCorners(h,
a):null},getCameraDistanceToInterest:function(){return this._cameraModule.getDistanceToInterest()},getCameraPitchDegrees:function(){return this._cameraModule.getPitchDegrees()},setCameraTiltDegrees:function(h){this._cameraModule.setTiltDegrees(h);return this},getCameraTiltDegrees:function(){return this._cameraModule.getTiltDegrees()},getCameraHeadingDegrees:function(){return this._cameraModule.getHeadingDegrees()},setCameraHeadingDegrees:function(h){this._cameraModule.setHeadingDegrees(h);return this},
getMaximumPrecacheRadius:function(){return this._precacheModule.getMaximumPrecacheRadius()},precache:function(h,a,b){return this.precacheWithDetailedResult(h,a,function(d){b(d.succeeded)})},precacheWithDetailedResult:function(h,a,b){return this._precacheModule.precache(h,a,b)},setMapCollapsed:function(h){this.rendering.setMapCollapsed(h)},isMapCollapsed:function(){return this.rendering.isMapCollapsed()},setDrawClearColor:function(h){this.rendering.setClearColor(h)},setTargetVSyncInterval:function(h){this._frameRateModule.setTargetVSyncInterval(h)},
setThrottledTargetFrameInterval:function(h){this._frameRateModule.setThrottledTargetFrameInterval(h)},setIdleSecondsBeforeThrottle:function(h){this._frameRateModule.setIdleSecondsBeforeThrottle(h)},setThrottleWhenIdleEnabled:function(h){this._frameRateModule.setThrottleWhenIdleEnabled(h)},cancelFrameRateThrottle:function(){this._frameRateModule.cancelThrottle()},isHardwareAccelerationAvailable:function(){var h=document.createElement("canvas"),a={failIfMajorPerformanceCaveat:!0};h=h.getContext("webgl",
a)||h.getContext("experimental-webgl",a);return!!(h&&h instanceof WebGLRenderingContext)},_getAngleFromCameraToHorizon:function(){var h=this.getCameraDistanceToInterest();return Math.acos(6378100/(6378100+h))},_isLatLngBehindEarth:function(h,a,b){h=c(h);return a.x*h.x+a.y*h.y+a.z*h.z<Math.cos(b)},_updateLayerVisibility:function(){var h=Object.keys(this._layersOnMap),a=c(this.getCenter()),b=this._getAngleFromCameraToHorizon(),d=this;h.forEach(function(e){e=d._layersOnMap[e];if(void 0!==e){var g="getLatLng"in
e?e.getLatLng():"getBounds"in e?e.getBounds().isValid()?e.getBounds().getCenter():null:null;if(!(null===g||e instanceof L.FeatureGroup)){g=d._isLatLngBehindEarth(g,a,b);var n=d.hasLayer(e),m=d._isVisibleForCurrentMapState(e);n||g||!m?!n||!g&&m||L.Map.prototype.removeLayer.call(d,e):L.Map.prototype.addLayer.call(d,e)}}})},_isVisibleForCurrentMapState:function(h){var a=!this.indoors.isIndoors(),b=!k.hasIndoorMap(h);return"currentMap"===h.options.displayOption?!0:a?b:b?!1:k.matchesIndoorMap(this.indoors.getActiveIndoorMap().getIndoorMapId(),
this.indoors.getFloor()._getFloorId(),this.indoors.getFloor().getFloorIndex(),h)},_rawPanBy:function(h){}});u.exports=r},{"../private/indoor_map_layer_options.js":39,"../public/popup.js":80}],65:[function(r,u,v){var p=r("../private/elevation_mode.js");r={GROUND:"ground",BUILDINGS:"buildings",TREES:"trees",TRANSPORT:"transport"};var k=(L.Layer?L.Layer:L.Class).extend({constants:{RESOLUTION_PIXELS_MIN:64,RESOLUTION_PIXELS_MAX:2048},options:{dataCoordProperty:"latLng",dataWeightProperty:"weight",elevation:0,
elevationMode:p.ElevationModeType.HEIGHT_ABOVE_GROUND,indoorMapId:"",indoorMapFloorId:0,polygonPoints:[],weightMin:0,weightMax:1,resolutionPixels:512,textureBorderPercent:.05,useApproximation:!0,densityStops:[{stop:0,radius:5,gain:1},{stop:1,radius:15,gain:1}],densityBlend:0,interpolateDensityByZoom:!1,zoomMin:15,zoomMax:18,colorGradient:[{stop:0,color:"#ffffff00"},{stop:.2,color:"#ffffb2ff"},{stop:.4,color:"#fecc5cff"},{stop:.6,color:"#fd8d3cff"},{stop:.8,color:"#f03b20ff"},{stop:1,color:"#bd0026ff"}],
opacity:1,intensityBias:0,intensityScale:1,occludedMapFeatures:[r.BUILDINGS,r.TREES],occludedAlpha:.85,occludedSaturation:.7,occludedBrightness:.7},_loadPointData:function(f){var l=[],c=this.options.dataCoordProperty,h=this.options.dataWeightProperty;f.forEach(function(a){var b=1;if(c in a){var d=a[c];h in a&&(b=a[h])}else d=L.latLng(a[0],a[1]),2<a.length&&(b=a[2]);l.push({latLng:d,weight:b})});return l},_getArrayDepth:function(f){var l=0;do f=f[0],l++;while(Array.isArray(f));return l},_loadLatLngAlts:function(f){var l=
[];f.forEach(function(c){l.push(L.latLng(c))});return l},_loadPolygonRings:function(f){var l=[],c=this._getArrayDepth(f);if(2===c)l.push(this._loadLatLngAlts(f));else if(3===c)f.forEach(function(h){l.push(this._loadLatLngAlts(h))},this);else if(0===f.length)l=[];else throw Error("Incorrect array depth for heatmap options.polygonPoints.");return l},_loadDensityParams:function(f){if(Array.isArray(f)){if(2>f.length)throw Error("Expected array [<stop>, <radius>, <(optional) gain>] when parsing options.densityStops");
var l=f[0];var c=f[1];f=2<f.length?f[2]:1}else{if(void 0===f.stop||void 0===f.radius)throw Error("Expected object {stop:<stop>, radius:<radius>, (optional) gain:<gain>} when parsing options.densityStops");l=f.stop;c=f.radius;f=f.gain||1}if(isNaN(l))throw Error("Expected Number for heatmap density stop parameter: "+String(l));if(isNaN(c))throw Error("Expected Number for heatmap radius parameter: "+String(c));if(isNaN(f))throw Error("Expected Number for heatmap gain parameter: "+String(f));return{stop:l,
radius:c,gain:f}},_loadDensityStops:function(f){var l=[],c=this._getArrayDepth(f);if(1===c&&"number"===typeof f[0])l.push(this._loadDensityParams(f));else if(2>=c)f.forEach(function(h){l.push(this._loadDensityParams(h))},this);else throw Error("Incorrect array depth for heatmap options.densityStops.");return l},_loadColorStop:function(f){if(Array.isArray(f)){if(2>f.length)throw Error("Expected array [<stop>, <color>] when parsing options.colorGradient");var l=f[0];f=f[1]}else{if(void 0===f.stop||
void 0===f.color)throw Error("Expected object {stop:<stop>, color:<color>} when parsing options.colorGradient");l=f.stop;f=f.color}if(isNaN(l))throw Error("Expected Number for color stop parameter: "+String(l));return{stop:l,color:f}},_loadColorGradient:function(f){var l=[],c=this._getArrayDepth(f);if(1===c&&"number"===typeof f[0])l.push(this._loadColorStop(f));else if(2>=c)f.forEach(function(h){l.push(this._loadColorStop(h))},this);else throw Error("Incorrect array depth for heatmap options.colorGradient.");
return l},initialize:function(f,l){this.setOptions(l);l.hasOwnProperty("linkData")&&(l.linkData?(console.log("Heatmap - linking data in place"),this._pointData=f):(console.log("Heatmap - loading point data to new buffer (default)"),this._pointData=this._loadPointData(f)))},getData:function(){return this._pointData},setData:function(f){this._pointData=this._loadPointData(f);this._changedFlags.data=!0;return this},getPolygonPoints:function(){return this.options.polygonPoints},getIndoorMapId:function(){return this.options.indoorMapId},
getIndoorMapFloorId:function(){return this.options.indoorMapFloorId},getElevation:function(){return this.options.elevation},getElevationMode:function(){return this.options.elevationMode},getWeightMin:function(){return this.options.weightMin},getWeightMax:function(){return this.options.weightMax},getResolutionPixels:function(){return this.options.resolutionPixels},getTextureBorderPercent:function(){return this.options.textureBorderPercent},getUseApproximation:function(){return this.options.useApproximation},
getDensityStops:function(){return this.options.densityStops},getDensityBlend:function(){return this.options.densityBlend},getInterpolateDensityByZoom:function(){return this.options.interpolateDensityByZoom},getZoomMin:function(){return this.options.zoomMin},getZoomMax:function(){return this.options.zoomMax},getColorGradient:function(){return this.options.colorGradient},getOpacity:function(){return this.options.opacity},getIntensityBias:function(){return this.options.intensityBias},getIntensityScale:function(){return this.options.intensityScale},
getOccludedMapFeatures:function(){return this.options.occludedMapFeatures},getOccludedAlpha:function(){return this.options.occludedAlpha},getOccludedSaturation:function(){return this.options.occludedSaturation},getOccludedBrightness:function(){return this.options.occludedBrightness},setIndoorMapWithFloorId:function(f,l){if(isNaN(l))throw Error("Heatmap indoorMapFloorId cannot be NaN");this.options.indoorMapId=f||k.prototype.options.indoorMapId;this.options.indoorMapFloorId=l;this._changedFlags.indoorMap=
!0;return this},setElevation:function(f){if(isNaN(f))throw Error("Heatmap elevation cannot be NaN");this.options.elevation=f;this._changedFlags.elevation=!0;return this},setElevationMode:function(f){if(!p.isValidElevationMode(f))throw Error("Heatmap elevationMode must be valid");this.options.elevationMode=f;this._changedFlags.elevation=!0;return this},setDensityBlend:function(f){if(isNaN(f))throw Error("Heatmap densityBlend cannot be NaN");this.options.densityBlend=Math.min(Math.max(f,0),1);this._changedFlags.densityBlend=
!0;return this},setInterpolateDensityByZoom:function(f){this.options.interpolateDensityByZoom=f?!0:!1;this._changedFlags.interpolateDensityByZoom=!0;return this},setZoomMin:function(f){if(isNaN(f))throw Error("Heatmap zoomMin cannot be NaN");this.options.zoomMin=Math.max(f,0);this._changedFlags.interpolateDensityByZoom=!0;return this},setZoomMax:function(f){if(isNaN(f))throw Error("Heatmap zoomMax cannot be NaN");this.options.zoomMax=Math.max(f,0);this._changedFlags.interpolateDensityByZoom=!0;return this},
setIntensityBias:function(f){if(isNaN(f))throw Error("Heatmap intensityBias cannot be NaN");this.options.intensityBias=Math.min(Math.max(f,0),1);this._changedFlags.intensityBias=!0;return this},setIntensityScale:function(f){if(isNaN(f))throw Error("Heatmap intensityScale cannot be NaN");this.options.intensityScale=Math.max(f,0);this._changedFlags.intensityScale=!0;return this},setOpacity:function(f){if(isNaN(f))throw Error("Heatmap opacity cannot be NaN");this.options.opacity=Math.min(Math.max(f,
0),1);this._changedFlags.opacity=!0;return this},setColorGradient:function(f){this.options.colorGradient=this._loadColorGradient(f);this._changedFlags.colorGradient=!0;return this},setResolution:function(f){if(isNaN(f))throw Error("Heatmap resolutionPixels cannot be NaN");this.options.resolutionPixels=Math.max(Math.min(f,this.constants.RESOLUTION_PIXELS_MAX),this.constants.RESOLUTION_PIXELS_MIN);this._changedFlags.resolution=!0;return this},setDensityStops:function(f){this.options.densityStops=this._loadDensityStops(f);
this._changedFlags.densityStops=!0;return this},setUseApproximation:function(f){this.options.useApproximation=f?!0:!1;this._changedFlags.useApproximation=!0;return this},setWeightMin:function(f){if(isNaN(f))throw Error("Heatmap weightMin cannot be NaN");this.options.weightMin=f;this._changedFlags.data=!0;return this},setWeightMax:function(f){if(isNaN(f))throw Error("Heatmap weightMax cannot be NaN");this.options.weightMax=f;this._changedFlags.data=!0;return this},setPolygonPoints:function(f){this.options.polygonPoints=
this._loadPolygonRings(f);this._changedFlags.polygon=!0;return this},setOptions:function(f){L.setOptions(this,f);(f.hasOwnProperty("indoorMapId")||f.hasOwnProperty("indooindoorMapFloorIdMapId"))&&this.setIndoorMapWithFloorId(this.options.indoorMapId,this.options.indoorMapFloorId);f.hasOwnProperty("elevation")&&this.setElevation(this.options.elevation);f.hasOwnProperty("elevationMode")&&this.setElevationMode(this.options.elevationMode);f.hasOwnProperty("densityBlend")&&this.setDensityBlend(this.options.densityBlend);
f.hasOwnProperty("interpolateDensityByZoom")&&this.setInterpolateDensityByZoom(this.options.interpolateDensityByZoom);f.hasOwnProperty("zoomMin")&&this.setZoomMin(this.options.zoomMin);f.hasOwnProperty("zoomMax")&&this.setZoomMax(this.options.zoomMax);f.hasOwnProperty("intensityBias")&&this.setIntensityBias(this.options.intensityBias);f.hasOwnProperty("intensityScale")&&this.setIntensityScale(this.options.intensityScale);f.hasOwnProperty("opacity")&&this.setOpacity(this.options.opacity);f.hasOwnProperty("colorGradient")&&
this.setColorGradient(this.options.colorGradient);f.hasOwnProperty("resolutionPixels")&&this.setResolution(this.options.resolutionPixels);f.hasOwnProperty("densityStops")&&this.setDensityStops(this.options.densityStops);f.hasOwnProperty("useApproximation")&&this.setUseApproximation(this.options.useApproximation);f.hasOwnProperty("weightMin")&&this.setWeightMin(this.options.weightMin);f.hasOwnProperty("weightMax")&&this.setWeightMax(this.options.weightMax);f.hasOwnProperty("polygonPoints")&&this.setPolygonPoints(this.options.polygonPoints);
return this},_update:function(){},beforeAdd:function(f){},onAdd:function(){this._map.heatmaps.addHeatmap(this)},onRemove:function(){this._map.heatmaps.removeHeatmap(this)},redraw:function(){},_changedFlags:{indoorMap:!1,elevation:!1,densityBlend:!1,interpolateDensityByZoom:!1,intensityBias:!1,intensityScale:!1,opacity:!1,colorGradient:!1,occludedStyle:!1,resolution:!1,densityStops:!1,useApproximation:!1,data:!1,polygon:!1},_anyChanged:function(){return Object.values(this._changedFlags).some(Boolean)},
_getChangedFlags:function(){return this._changedFlags},_clearChangedFlags:function(){Object.keys(this._changedFlags).forEach(function(f){this._changedFlags[f]=!1},this)}});u.exports={Heatmap:k,heatmap:function(f,l){return new k(f,l||{})},HeatmapOcclusionMapFeature:r}},{"../private/elevation_mode.js":7}],66:[function(r,u,v){v=r("./indoor_map_entity_information");r=r("./indoor_map_entity");u.exports={IndoorMapEntity:r,IndoorMapEntityInformation:v.IndoorMapEntityInformation,indoorMapEntityInformation:v.indoorMapEntityInformation}},
{"./indoor_map_entity":67,"./indoor_map_entity_information":68}],67:[function(r,u,v){u.exports=function(p,k,f,l){this.getIndoorMapEntityId=function(){return p};this.getIndoorMapFloorId=function(){return k};this.getPosition=function(){return f};this.getOutline=function(){return l}}},{}],68:[function(r,u,v){var p=function(k){var f=null,l=null,c=[],h="None";this.getIndoorMapId=function(){return k};this.getIndoorMapEntities=function(){return c};this.getLoadState=function(){return h};this.getNativeId=
function(){return f};this.addTo=function(a){null!==l&&this.remove();l=a;l.indoorMapEntities._getImpl().addIndoorMapEntityInformation(this);return this};this.remove=function(){null!==l&&(l.indoorMapEntities._getImpl().removeIndoorMapEntityInformation(this),l=null);return this};this._setNativeHandle=function(a){f=a};this._setData=function(a){c=a.IndoorMapEntities;switch(a.LoadState){case 0:h="None";break;case 1:h="Partial";break;case 2:h="Complete"}}};u.exports={IndoorMapEntityInformation:p,indoorMapEntityInformation:function(k){return new p(k)}}},
{}],69:[function(r,u,v){v=r("./indoor_map_floor_outline_information");var p=r("./indoor_map_floor_outline_polygon");r=r("./indoor_map_floor_outline_polygon_ring");u.exports={IndoorMapFloorOutlinePolygon:p,IndoorMapFloorOutlinePolygonRing:r,IndoorMapFloorOutlineInformation:v.IndoorMapFloorOutlineInformation,indoorMapFloorOutlineInformation:v.indoorMapFloorOutlineInformation}},{"./indoor_map_floor_outline_information":70,"./indoor_map_floor_outline_polygon":71,"./indoor_map_floor_outline_polygon_ring":72}],
70:[function(r,u,v){var p=function(k,f){var l=null,c=null,h=[],a=!1;this.getIndoorMapId=function(){return k};this.getIndoorMapFloorId=function(){return f};this.getIndoorMapFloorOutlinePolygons=function(){return h};this.getIsLoaded=function(){return a};this.getId=function(){return l};this.addTo=function(b){null!==c&&this.remove();c=b;c.indoorMapFloorOutlines._getImpl().addIndoorMapFloorOutlineInformation(this);return this};this.remove=function(){null!==c&&(c.indoorMapFloorOutlines._getImpl().removeIndoorMapFloorOutlineInformation(this),
c=null);return this};this._setNativeHandle=function(b){l=b};this._setData=function(b){h=b;a=!0}};u.exports={IndoorMapFloorOutlineInformation:p,indoorMapFloorOutlineInformation:function(k,f){return new p(k,f)}}},{}],71:[function(r,u,v){u.exports=function(p,k){this.getOuterRing=function(){return p};this.getInnerRings=function(){return k}}},{}],72:[function(r,u,v){u.exports=function(p){this.getLatLngPoints=function(){return p}}},{}],73:[function(r,u,v){u.exports=function(p,k,f,l,c,h,a){this.exit=a;this.getIndoorMapId=
function(){return p};this.getIndoorMapName=function(){return k};this.getIndoorMapSourceVendor=function(){return f};this.getFloorCount=function(){return l};this.getFloors=function(){return c};this.getSearchTags=function(){return h}}},{}],74:[function(r,u,v){u.exports=function(p,k,f){this.getIndoorMapId=function(){return p};this.getIndoorMapName=function(){return k};this.getLatLng=function(){return f}}},{}],75:[function(r,u,v){u.exports=function(p,k,f,l){this.getFloorId=function(){return l};this._getFloorId=
function(){return p};this.getFloorIndex=function(){return k};this.getFloorName=function(){return f};this.getFloorShortName=function(){return l}}},{}],76:[function(r,u,v){v=r("./indoor_map");var p=r("./indoor_map_entrance");r=r("./indoor_map_floor");u.exports={IndoorMap:v,IndoorMapEntrance:p,IndoorMapFloor:r}},{"./indoor_map":73,"./indoor_map_entrance":74,"./indoor_map_floor":75}],77:[function(r,u,v){var p=r("../private/indoor_map_layer_options.js"),k=r("../private/elevation_mode.js"),f=r("./popup"),
l=r("../private/eegeo_dom_util"),c=L.Marker.extend({initialize:function(h,a){L.Marker.prototype.initialize.call(this,h,a);this.on("dragstart",this._onDragStart);this.on("drag",this._onDrag);this.on("dragend",this._onDragEnd);this._elevationBeforeDrag=0;this._isDragging=!1;this._lngOffsetForDrag=this._latOffsetForDrag=0},options:{elevation:0,elevationMode:k.ElevationModeType.HEIGHT_ABOVE_GROUND},getElevation:function(){return this.options.elevation},setElevation:function(h){this.options.elevation=
h;null!==this._map&&this._map._createPointMapping(this);return this},setElevationMode:function(h){k.isValidElevationMode(h)&&(this.options.elevationMode=h,null!==this._map&&this._map._createPointMapping(this));return this},getElevationMode:function(){return this.options.elevationMode},setIndoorMapWithFloorId:function(h,a){this.options.indoorMapId=h;this.options.indoorMapFloorId=a;null!==this._map&&this._map._createPointMapping(this);return this},setIndoorMapWithFloorIndex:function(h,a){this.options.indoorMapId=
h;this.options.indoorMapFloorIndex=a;null!==this._map&&this._map._createPointMapping(this);return this},setOutdoor:function(){delete this.options.indoorMapId;delete this.options.indoorMapFloorId;delete this.options.indoorMapFloorIndex;null!==this._map&&this._map._createPointMapping(this);return this},setLatLng:function(h){h=L.Marker.prototype.setLatLng.call(this,h);this._map&&this._map._createPointMapping(this);return h},update:function(){if(this._icon){var h=this._map.latLngsForLayer(this);h=this._isDragging?
this._map.latLngToLayerPoint(this.getLatLng()):this._map.latLngToLayerPoint(h[0]);this._setPos(h)}return this},_setPos:function(h){var a=L.Browser.gecko?l.setPositionSmooth:L.DomUtil.setPosition;a(this._icon,h);this._shadow&&a(this._shadow,h);this._zIndex=parseInt(1E4*h.y)+1E4*this.options.zIndexOffset;this._resetZIndex()},bindPopup:function(h,a){var b=h;b instanceof L.Popup||(a||(a={}),"elevation"in a||(a.elevation=this.getElevation()),"elevationMode"in a||(a.elevationMode=this.options.elevationMode),
p.copyIndoorMapOptions(this.options,a),b=(new f.Popup(a,this)).setContent(h));return L.Marker.prototype.bindPopup.call(this,b,a)},_onDragStart:function(){this._isDragging=!0;this._elevationBeforeDrag=this.getElevation();var h=L.DomUtil.getPosition(this._icon);h=this._map.layerPointToLatLng(h);var a=this.getLatLng();this._latOffsetForDrag=a.lat-h.lat;this._lngOffsetForDrag=a.lng-h.lng;this.setLatLng(h)},_onDrag:function(h){this._map._createPointMapping(this)},_onDragEnd:function(h){h=this.getLatLng();
this.options.indoorMapId?this.setLatLng(new L.LatLng(h.lat+this._latOffsetForDrag,h.lng+this._lngOffsetForDrag,this._elevationBeforeDrag)):(this.setLatLng(new L.LatLng(h.lat,h.lng)),this.options.elevation=0);this._map._createPointMapping(this);this._elevationBeforeDrag=this._lngOffsetForDrag=this._latOffsetForDrag=0;this._isDragging=!1}});u.exports={Marker:c,marker:function(h,a){return new c(h,a)}}},{"../private/eegeo_dom_util":5,"../private/elevation_mode.js":7,"../private/indoor_map_layer_options.js":39,
"./popup":80}],78:[function(r,u,v){var p=r("leaflet"),k=r("./space"),f=function(l,c){function h(t){var w=[];t.forEach(function(y){w.push(p.latLng(y))});return w}var a=null,b=[],d=[],e=c||{},g=0,n=l;do n=n[0],g++;while(Array.isArray(n));if(2===g)b=h(l);else if(3===g)b=h(l[0]),l.splice(1).forEach(function(t){d.push(h(t))});else throw Error("Incorrect array input format.");var m=new k.Vector4(c.color||[0,0,255,128]),q=!0;this.getColor=function(){return new k.Vector4(m)};this.setColor=function(t){m=new k.Vector4(t);
q=!0;return this};this.addHole=function(t){d.push(h(t));return this};this.getHoles=function(){return d};this.getPoints=function(){return b};this._colorNeedsChanged=function(){return q};this._onColorChanged=function(){q=!1};this.addTo=function(t){null!==a&&this.remove();a=t;t._polygonModule.addPolygon(this);return this};this.remove=function(){null!==a&&(a._polygonModule.removePolygon(this),a=null);return this};this._getConfig=function(){return e}};u.exports={Polygon:f,polygon:function(l,c){return new f(l,
c||{})}}},{"./space":83,leaflet:1}],79:[function(r,u,v){var p=r("leaflet"),k=r("../private/elevation_mode.js"),f=p.Polyline.extend({initialize:function(l,c){p.Polyline.prototype.initialize.call(this,l,c)},options:{elevation:0,elevationMode:k.ElevationModeType.HEIGHT_ABOVE_GROUND,indoorMapId:"",indoorMapFloorId:0,weight:3,miterLimit:10},getPoints:function(){return this.getLatLngs()},getIndoorMapId:function(){return this.options.indoorMapId},getIndoorMapFloorId:function(){return this.options.indoorMapFloorId},
getElevation:function(){return this.options.elevation},getElevationMode:function(){return this.options.elevationMode},getWidth:function(){return this.options.weight||this.options.width},getColor:function(){return this.options.color},getMiterLimit:function(){return this.options.miterLimit},setIndoorMapWithFloorId:function(l,c){this.options.indoorMapId=l;this.options.indoorMapFloorId=c;this._needsNativeUpdate=!0;return this},setElevation:function(l){this.options.elevation=l;this._needsNativeUpdate=
!0;return this},setElevationMode:function(l){k.isValidElevationMode(l)&&(this.options.elevationMode=l);this._needsNativeUpdate=!0;return this},setOptions:function(l){return this.setStyle(l)},setStyle:function(l){p.Polyline.prototype.setStyle.call(this,l);this._needsNativeUpdate=!0;return this},_needsNativeUpdate:!1,_update:function(){},beforeAdd:function(l){},onAdd:function(){this._map._polylineModule.addPolyline(this)},onRemove:function(){this._map._polylineModule.removePolyline(this)},redraw:function(){}});
u.exports={Polyline:f,polyline:function(l,c){return new f(l,c||{})}}},{"../private/elevation_mode.js":7,leaflet:1}],80:[function(r,u,v){var p=L.Popup.extend({options:{elevation:0,closeWhenMovedOffscreen:!1},_onScreen:!1,getElevation:function(){return this.options.elevation},setElevation:function(k){this.options.elevation=k;return this},getCloseWhenMovedOffscreen:function(){return this.options.closeWhenMovedOffscreen},setCloseWhenMovedOffscreen:function(k){this.options.closeWhenMovedOffscreen=k;return this},
_updateContent:function(){if(this._content){var k=this._contentNode,f="function"===typeof this._content?this._content(this._source||this):this._content,l=!0;f.outerHTML&&f.outerHTML===k.innerHTML&&(l=!1);if("string"===typeof f)k.innerHTML=f;else if(!k.hasChildNodes()||l){for(;k.hasChildNodes();)k.removeChild(k.firstChild);k.appendChild(f)}this.fire("contentupdate")}},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),
this._container.style.visibility="",this._adjustPan(),this.options.closeWhenMovedOffscreen&&(this._onScreen&&this._checkOutOfBounds()?(this._onScreen=!1,this._close()):this._onScreen=!this._checkOutOfBounds()))},_updatePosition:function(){if(this._map){var k=this._map.latLngsForLayer(this),f=this._map.latLngToLayerPoint(k[0]);k=L.point(this.options.offset);var l=this._getAnchor();l.x=Math.round(l.x);l.y=Math.round(l.y);this._zoomAnimated?L.DomUtil.setPosition(this._container,f.add(l)):k=k.add(f).add(l);
f=this._containerBottom=-k.y;k=this._containerLeft=-Math.round(this._containerWidth/2)+k.x;f=Math.round(f)+"px";k=Math.round(k)+"px";L.DomUtil.getStyle(this._container,"left")!==k&&(this._container.style.left=k);L.DomUtil.getStyle(this._container,"bottom")!==f&&(this._container.style.bottom=f)}},_checkOutOfBounds:function(){var k=this._container.getBoundingClientRect(),f=k.bottom-k.top,l=k.right-k.left,c=this._map._container.getBoundingClientRect(),h=k.top<c.top-f/2,a=k.right>c.right+l/2;l=k.left<
c.left-l/2;return k.bottom>c.bottom+f/2||h||a||l}});u.exports={Popup:p,popup:function(k,f){return new p(k,f)}}},{}],81:[function(r,u,v){u.exports=function(p){this.getSucceeded=function(){return p}}},{}],82:[function(r,u,v){var p=r("../private/elevation_mode.js"),k=function(f,l,c,h){var a=null,b=l,d=!1,e=c,g=!1,n=h.indoorMapId||"",m=h.indoorMapFloorId||0,q=h.headingDegrees||0,t=!1,w=h.elevation||0,y=!1,H=h.elevationMode||p.ElevationModeType.HEIGHT_ABOVE_GROUND,F=!1;this.getLocation=function(){return e};
this.setLocation=function(C){e=C;g=!0};this.getIndoorMapId=function(){return n};this.getIndoorMapFloorId=function(){return m};this.getHeadingDegrees=function(){return q};this.setHeadingDegrees=function(C){q=C;t=!0};this.getElevation=function(){return w};this.setElevation=function(C){w=C;y=!0};this.getElevationMode=function(){return H};this.setElevationMode=function(C){p.isValidElevationMode(C)&&(H=C,F=!0)};this.getGeometryId=function(){return b};this.setGeometryId=function(C){b=C;d=!0};this.getName=
function(){return f};this._geometryIdNeedsChanged=function(){return d};this._onGeometryIdChanged=function(){d=!1};this._elevationNeedsChanged=function(){return y};this._onElevationChanged=function(){y=!1};this._elevationModeNeedsChanged=function(){return F};this._onElevationModeChanged=function(){F=!1};this._headingDegreesNeedsChanged=function(){return t};this._onHeadingDegreesChanged=function(){t=!1};this._locationNeedsChanged=function(){return g};this._onLocationChanged=function(){g=!1};this.addTo=
function(C){null!==a&&this.remove();a=C;C.props.addProp(this);return this};this.remove=function(){null!==a&&(a.props.removeProp(this),a=null);return this}};u.exports={Prop:k,prop:function(f,l,c,h){return new k(f,l,c,h||{})}}},{"../private/elevation_mode.js":7}],83:[function(r,u,v){var p=[27428700,14720762,8E6,4512909,2087317,1248854,660556,351205,185652,83092,41899,21377,11294,5818,3106,1890,1300,821,500,300,108,58,31,17,9,5],k=function(c,h){var a=p.findIndex(function(d){return h(c,d)}),b=p.length-
1;return-1===a?b:a},f=function(c){c=k(c,function(h,a){return h>a});return Math.max(0,c-1)},l=function(c){return k(c,function(h,a){return h>=a})};u.exports={Vector3:function(c,h,a){"number"===typeof c?(this.x=c,this.y=h,this.z=a||0):(this.x=c.x||c[0],this.y=c.y||c[1],this.z=c.z||c[2]||0);this.toPoint=function(){return L.point(this.x,this.y)}},Vector4:function(c,h,a,b){"number"===typeof c?(this.x=c,this.y=h,this.z=a||0,this.w=b||1):(this.x=c.x||c[0],this.y=c.y||c[1],this.z=c.z||c[2]||0,this.w=c.w||
c[3]||1)},zoomToDistance:function(c){0>c?c=0:c>=p.length&&(c=p.length-1);var h=Math.floor(c),a=p[h];return a+(c-h)*(p[Math.ceil(c)]-a)},distanceToZoom:function(c){var h=p.length-1;c<p[h]&&(c=p[h]);c>p[0]&&(c=p[0]);h=f(c);var a=l(c),b=p[h]-p[a];c-=p[a];return h===a?a:a+c/b*(h-a)}}},{}],84:[function(r,u,v){u.exports={season:{Spring:"Spring",Summer:"Summer",Autumn:"Autumn",Winter:"Winter"},time:{Dawn:"Dawn",Day:"Day",Dusk:"Dusk",Night:"Night"},weather:{Clear:"Default",Overcast:"Overcast",Foggy:"Foggy",
Rainy:"Rainy",Snowy:"Snowy"}}},{}],85:[function(r,u,v){v=r("leaflet");var p=r("./private/eegeo_map_controller"),k=r("./private/emscripten_api/emscripten_api"),f=r("./public/marker.js"),l=r("./public/popup.js"),c=r("./public/polygon.js"),h=r("./public/polyline.js"),a=r("./public/prop.js"),b=r("./private/polygon_shim.js"),d=r("./private/polyline_shim.js"),e=r("./private/rectangle_shim.js"),g=r("./public/circle.js"),n=r("./public/heatmap.js");r("./private/polyfills.js");var m=[],q=!1,t=!1,w=[],y=function(){t=
!0;w.forEach(function(F){window.createWrldModule(F)});w=[]},H=function(){if(!q){var F=document.createElement("script");F.src="https://cdn-webgl.wrld3d.com/eegeojs/public/latest/eeGeoWebGL.jgz";F.onload=y;document.body.appendChild(F);q=!0}var C={locateFile:function(I){return"https://cdn-webgl.wrld3d.com/eegeojs/public/latest/"+I},onExit:function(I){if(1===I){var x="Error: wrld.js failed to initialize";C.ctx||(x="Error: WebGL unavailable in this browser");m.forEach(function(D){D.onError(x)})}}};return C};
r={map:function(F,C,I){var x=H(),D=F,z=null;"string"===typeof F&&(z=F,D=document.getElementById(z));if(!D)throw"No map container found"+(null===z?"":" with id '"+z+"'");F=D;D=document;z=window;var B=m.length,A=new k(x);F=new p(B,A,F,C,z,D,x,I||{});m.push(F);t?window.createWrldModule(x):w.push(x);return F.leafletMap},Marker:f.Marker,marker:f.marker,Popup:l.Popup,popup:l.popup,Polygon:c.Polygon,polygon:c.polygon,Polyline:h.Polyline,polyline:h.polyline,Prop:a.Prop,prop:a.prop,Heatmap:n.Heatmap,heatmap:n.heatmap,
indoors:r("./public/indoors/indoors"),space:r("./public/space"),themes:r("./public/themes"),buildings:r("./public/buildings/buildings"),indoorMapEntities:r("./public/indoorMapEntities/indoorMapEntities"),indoorMapFloorOutlines:r("./public/indoorMapFloorOutlines/indoorMapFloorOutlines"),getMapById:function(F){return m[F]}};v.popup=l.popup;v.circle=g.circle;v.marker=f.marker;v.polygon=b.polygonShim;v.polyline=d.polylineShim;v.rectangle=e.rectangleShim;window.L=v;v.Wrld=r;v.eeGeo=v.Wrld;v.Icon.Default.imagePath=
"http://cdn.leafletjs.com/leaflet/v1.0.1/images/";u.exports=v.Wrld},{"./private/eegeo_map_controller":6,"./private/emscripten_api/emscripten_api":8,"./private/polyfills.js":45,"./private/polygon_shim.js":47,"./private/polyline_shim.js":49,"./private/rectangle_shim.js":52,"./public/buildings/buildings":62,"./public/circle.js":63,"./public/heatmap.js":65,"./public/indoorMapEntities/indoorMapEntities":66,"./public/indoorMapFloorOutlines/indoorMapFloorOutlines":69,"./public/indoors/indoors":76,"./public/marker.js":77,
"./public/polygon.js":78,"./public/polyline.js":79,"./public/popup.js":80,"./public/prop.js":82,"./public/space":83,"./public/themes":84,leaflet:1}]},{},[85])(85)});
